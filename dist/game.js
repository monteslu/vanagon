//>>built
(function(a,e){var g,i,f,q=function(){},l=function(b){for(var c in b)return 0;return 1},p={}.toString,m=function(b){return"[object Function]"==p.call(b)},d=function(b){return"[object String]"==p.call(b)},r=function(b){return"[object Array]"==p.call(b)},c=function(b,c){if(b)for(var d=0;d<b.length;)c(b[d++])},h=function(b,c){for(var d in c)b[d]=c[d];return b},b=function(b,c){return h(Error(b),{src:"dojoLoader",info:c})},o=1,k=function(){return"_"+o++},j=function(b,c,d){return pa(b,c,d,0,j)},v=this,
t=v.document,u=t&&t.createElement("DiV"),n=j.has=function(b){return m(x[b])?x[b]=x[b](v,t,u):x[b]},x=n.cache=e.hasCache;n.add=function(b,c,d,j){(void 0===x[b]||j)&&(x[b]=c);return d&&n(b)};for(var C in a.has)n.add(C,a.has[C],0,1);j.async=1;var F=new Function("return eval(arguments[0]);");j.eval=function(b,c){return F(b+"\r\n////@ sourceURL="+c)};var O={},D=j.signal=function(b,d){var j=O[b];c(j&&j.slice(0),function(b){b.apply(null,r(d)?d:[d])})},R=j.on=function(b,c){var d=O[b]||(O[b]=[]);d.push(c);
return{remove:function(){for(var b=0;b<d.length;b++)if(d[b]===c){d.splice(b,1);break}}}},U=[],ca={},V=[],A={},s=j.map={},I=[],y={},z="",w={},B={};C={};var J=function(b){var c,d,j,h;for(c in B)d=B[c],(j=c.match(/^url\:(.+)/))?w["url:"+qa(j[1],b)]=d:"*now"==c?h=d:"*noref"!=c&&(j=W(c,b),w[j.mid]=w["url:"+j.url]=d);h&&h(da(b));B={}},L=function(b){return b.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(b){return"\\"+b})},G=function(b,c){c.splice(0,c.length);for(var d in b)c.push([d,b[d],RegExp("^"+L(d)+
"(/|$)"),d.length]);c.sort(function(b,c){return c[3]-b[3]});return c},H=function(b){var c=b.name;c||(c=b,b={name:c});b=h({main:"main"},b);b.location=b.location?b.location:c;if(b.packageMap)s[c]=b.packageMap;if(!b.main.indexOf("./"))b.main=b.main.substring(2);A[c]=b},P=[],E=function(b,o,v){for(var k in b){if("waitSeconds"==k)j.waitms=1E3*(b[k]||0);"cacheBust"==k&&(z=b[k]?d(b[k])?b[k]:(new Date).getTime()+"":"");if("baseUrl"==k||"combo"==k)j[k]=b[k];b[k]!==x&&(j.rawConfig[k]=b[k],"has"!=k&&n.add("config-"+
k,b[k],0,o))}if(!j.baseUrl)j.baseUrl="./";/\/$/.test(j.baseUrl)||(j.baseUrl+="/");for(k in b.has)n.add(k,b.has[k],0,o);c(b.packages,H);for(f in b.packagePaths)c(b.packagePaths[f],function(b){var c=f+"/"+b;d(b)&&(b={name:b});b.location=c;H(b)});G(h(s,b.map),I);c(I,function(b){b[1]=G(b[1],[]);if("*"==b[0])I.star=b});G(h(ca,b.paths),V);c(b.aliases,function(b){d(b[0])&&(b[0]=RegExp("^"+L(b[0])+"$"));U.push(b)});if(o)P.push({config:b.config});else for(k in b.config)o=Q(k,v),o.config=h(o.config||{},b.config[k]);
if(b.cache)J(),B=b.cache,b.cache["*noref"]&&J();D("config",[b,j.rawConfig])};j.rawConfig={};E(e,1);E(a,1);E(C,1);var K=function(b){ea(function(){c(b.deps,ra)})},pa=function(c,o,v,a,u){var t;if(d(c)){if((t=Q(c,a,!0))&&t.executed)return t.result;throw b("undefinedModule",c);}r(c)||(E(c,0,a),c=o,o=v);if(r(c))if(c.length){for(var v="require*"+k(),f,g=[],n=0;n<c.length;)f=c[n++],g.push(Q(f,a));t=h(X("",v,0,""),{injected:2,deps:g,def:o||q,require:a?a.require:j,gc:1});y[t.mid]=t;K(t);var l=T&&0!="sync";
ea(function(){fa(t,l)});t.executed||N.push(t);Y()}else o&&o();return u},da=function(b){if(!b)return j;var c=b.require;if(!c)c=function(d,j,h){return pa(d,j,h,b,c)},b.require=h(c,j),c.module=b,c.toUrl=function(c){return qa(c,b)},c.toAbsMid=function(c){return ga(c,b)};return c},N=[],Z=[],M={},Ba=function(b){b.injected=1;M[b.mid]=1;b.url&&(M[b.url]=b.pack||1);Aa()},$=function(b){b.injected=2;delete M[b.mid];b.url&&delete M[b.url];l(M)&&Ca()},Da=j.idle=function(){return!Z.length&&l(M)&&!N.length&&!T},
ha=function(b,c){if(c)for(var d=0;d<c.length;d++)if(c[d][2].test(b))return c[d];return 0},sa=function(b){for(var c=[],d,j,b=b.replace(/\\/g,"/").split("/");b.length;)d=b.shift(),".."==d&&c.length&&".."!=j?(c.pop(),j=c[c.length-1]):"."!=d&&c.push(j=d);return c.join("/")},X=function(b,c,d,j){return{pid:b,mid:c,pack:d,url:j,executed:0,def:0}},ta=function(d,j,h,k,o,v,a,t){var u,q,f,n;n=/^\./.test(d);if(/(^\/)|(\:)|(\.js$)/.test(d)||n&&!j)return X(0,d,0,d);d=sa(n?j.mid+"/../"+d:d);if(/^\./.test(d))throw b("irrationalPath",
d);j&&(f=ha(j.mid,v));(f=(f=f||v.star)&&ha(d,f[1]))&&(d=f[1]+d.substring(f[3]));j=(g=d.match(/^([^\/]+)(\/(.+))?$/))?g[1]:"";(u=h[j])?d=j+"/"+(q=g[3]||u.main):j="";var l=0;c(U,function(b){var c=d.match(b[0]);c&&0<c.length&&(l=m(b[1])?d.replace(b[0],b[1]):b[1])});if(l)return ta(l,0,h,k,o,v,a,t);if(h=k[d])return t?X(h.pid,h.mid,h.pack,h.url):k[d];k=(f=ha(d,a))?f[1]+d.substring(f[3]):j?u.location+"/"+q:d;/(^\/)|(\:)/.test(k)||(k=o+k);return X(j,d,u,sa(k+".js"))},W=function(b,c){return ta(b,c,A,y,j.baseUrl,
I,V)},ua=function(b,c,d){return b.normalize?b.normalize(c,function(b){return ga(b,d)}):ga(c,d)},va=0,Q=function(b,c,d){var j,h;(j=b.match(/^(.+?)\!(.*)$/))?(h=Q(j[1],c,d),5===h.executed&&!h.load&&ia(h),h.load?(j=ua(h,j[2],c),b=h.mid+"!"+(h.dynamic?++va+"!":"")+j):(j=j[2],b=h.mid+"!"+ ++va+"!waitingForPlugin"),b={plugin:h,mid:b,req:da(c),prid:j}):b=W(b,c);return y[b.mid]||!d&&(y[b.mid]=b)},ga=j.toAbsMid=function(b,c){return W(b,c).mid},qa=j.toUrl=function(b,c){var d=W(b+"/x",c),j=d.url;return wa(0===
d.pid?b:j.substring(0,j.length-5))},xa={injected:2,executed:5,def:3,result:3},S=function(b){return y[b]=h({mid:b},xa)},Ea=S("require"),Fa=S("exports"),Ga=S("module"),aa={},ja=0,ia=function(b){var c=b.result;b.dynamic=c.dynamic;b.normalize=c.normalize;b.load=c.load;return b},Ha=function(b){var d={};c(b.loadQ,function(c){var j=ua(b,c.prid,c.req.module),k=b.dynamic?c.mid.replace(/waitingForPlugin$/,j):b.mid+"!"+j,j=h(h({},c),{mid:k,prid:j,injected:0});y[k]||ya(y[k]=j);d[c.mid]=y[k];$(c);delete y[c.mid]});
b.loadQ=0;var j=function(b){for(var c=b.deps||[],j=0;j<c.length;j++)(b=d[c[j].mid])&&(c[j]=b)},k;for(k in y)j(y[k]);c(N,j)},ka=function(b){j.trace("loader-finish-exec",[b.mid]);b.executed=5;b.defOrder=ja++;b.loadQ&&(ia(b),Ha(b));for(i=0;i<N.length;)N[i]===b?N.splice(i,1):i++;/^require\*/.test(b.mid)&&delete y[b.mid]},Ia=[],fa=function(b,c){if(4===b.executed)return j.trace("loader-circular-dependency",[Ia.concat(b.mid).join("->")]),!b.def||c?aa:b.cjs&&b.cjs.exports;if(!b.executed){if(!b.def)return aa;
var d=b.mid,h=b.deps||[],k,o=[],v=0;for(b.executed=4;v<h.length;){k=h[v++];k=k===Ea?da(b):k===Fa?b.cjs.exports:k===Ga?b.cjs:fa(k,c);if(k===aa)return b.executed=0,j.trace("loader-exec-module",["abort",d]),aa;o.push(k)}j.trace("loader-run-factory",[b.mid]);d=b.def;o=m(d)?d.apply(null,o):d;b.result=void 0===o&&b.cjs?b.cjs.exports:o;ka(b)}return b.result},T=0,ea=function(b){try{T++,b()}finally{T--}Da()&&D("idle",[])},Y=function(){T||ea(function(){for(var b,c,d=0;d<N.length;)b=ja,c=N[d],fa(c),b!=ja?d=
0:d++})};void 0===n("dojo-loader-eval-hint-url")&&n.add("dojo-loader-eval-hint-url",1);var wa=function(b){b+="";return b+(z?(/\?/.test(b)?"&":"?")+z:"")},ya=function(b){var c=b.plugin;5===c.executed&&!c.load&&ia(c);var d=function(c){b.result=c;$(b);ka(b);Y()};c.load?c.load(b.prid,b.req,d):c.loadQ?c.loadQ.push(b):(c.loadQ=[b],N.unshift(c),ra(c))},ba=0,la=0,ma=0,Ja=function(b,c){n("config-stripStrict")&&(b=b.replace(/"use strict"/g,""));ma=1;b===ba?ba.call(null):j.eval(b,n("dojo-loader-eval-hint-url")?
c.url:c.mid);ma=0},ra=function(b){var c=b.mid,d=b.url;if(!b.executed&&!b.injected&&!(M[c]||b.url&&(b.pack&&M[b.url]===b.pack||1==M[b.url])))if(Ba(b),b.plugin)ya(b);else{var k=function(){Ka(b);2!==b.injected&&($(b),h(b,xa),j.trace("loader-define-nonmodule",[b.url]));Y()};(ba=w[c]||w["url:"+b.url])?(j.trace("loader-inject",["cache",b.mid,d]),Ja(ba,b),k()):(j.trace("loader-inject",["script",b.mid,d]),la=b,j.injectUrl(wa(d),k,b),la=0)}},na=function(c,d,k){j.trace("loader-define-module",[c.mid,d]);if(2===
c.injected)return D("error",b("multipleDefine",c)),c;h(c,{deps:d,def:k,cjs:{id:c.mid,uri:c.url,exports:c.result={},setExports:function(b){c.cjs.exports=b},config:function(){return c.config}}});for(var o=0;o<d.length;o++)d[o]=Q(d[o],c);$(c);if(!m(k)&&!d.length)c.result=k,ka(c);return c},Ka=function(b,d){for(var j=[],h,k;Z.length;)k=Z.shift(),d&&(k[0]=d.shift()),h=k[0]&&Q(k[0])||b,j.push([h,k[1],k[2]]);J(b);c(j,function(b){K(na.apply(null,b))})},Ca=q,Aa=q;n.add("ie-event-behavior",!!t.attachEvent&&
("undefined"===typeof opera||"[object Opera]"!=opera.toString()));var oa=function(b,c,d,j){if(n("ie-event-behavior"))return b.attachEvent(d,j),function(){b.detachEvent(d,j)};b.addEventListener(c,j,!1);return function(){b.removeEventListener(c,j,!1)}},La=oa(window,"load","onload",function(){j.pageLoaded=1;"complete"!=t.readyState&&(t.readyState="complete");La()}),za=t.getElementsByTagName("script")[0],Ma=za.parentNode;j.injectUrl=function(c,d,j){var j=j.node=t.createElement("script"),h=oa(j,"load",
"onreadystatechange",function(b){var b=b||window.event,c=b.target||b.srcElement;if("load"===b.type||/complete|loaded/.test(c.readyState))h(),k(),d&&d()}),k=oa(j,"error","onerror",function(d){h();k();D("error",b("scriptError",[c,d]))});j.type="text/javascript";j.charset="utf-8";j.src=c;Ma.insertBefore(j,za);return j};j.log=q;j.trace=q;S=function(c,h,k){var o=arguments.length,v=["require","exports","module"],a=[0,c,h];1==o?a=[0,m(c)?v:[],c]:2==o&&d(c)?a=[c,m(h)?v:[],h]:3==o&&(a=[c,h,k]);j.trace("loader-define",
a.slice(0,2));if((o=a[0]&&Q(a[0]))&&!M[o.mid])K(na(o,a[1],a[2]));else if(!n("ie-event-behavior")||ma)Z.push(a);else{o=o||la;if(!o)for(c in M)if((v=y[c])&&v.node&&"interactive"===v.node.readyState){o=v;break}o?(J(o),K(na(o,a[1],a[2]))):D("error",b("ieDefineFailed",a[0]));Y()}};S.amd={vendor:"dojotoolkit.org"};h(h(j,e.loaderPatch),a.loaderPatch);R("error",function(b){try{if(console.error(b),b instanceof Error)for(var c in b);}catch(d){}});h(j,{uid:k,cache:w,packs:A});if(!v.define)v.define=S,v.require=
j,c(P,function(b){E(b)}),R=C.deps||a.deps||e.deps,C=C.callback||a.callback||e.callback,j.boot=R||C?[R||[],C]:0})(this.dojoConfig||this.djConfig||this.require||{},{async:1,hasCache:{"config-selectorEngine":"acme","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-loader":1,dom:1,"host-browser":1},packages:[{location:".",name:"dojo"},{location:"../dcl",main:"dcl",name:"dcl"},{location:"../frozen",main:"GameCore",name:"frozen"},{location:"../qrcode",name:"qrcode"},{location:"../game",main:"game",name:"game"},
{location:"../frozen-dev-boilerplate",name:"frozen-dev-boilerplate"}]});
require({cache:{"dist/game":function(){define([],1)},"game/game":function(){define("frozen/GameCore,frozen/ResourceManager,dojo/keys,dojo/_base/declare,frozen/Animation,frozen/box2d/Box,frozen/box2d/RectangleEntity,frozen/box2d/PolygonEntity,frozen/box2d/CircleEntity,frozen/box2d/MultiPolygonEntity,frozen/utils,dojo/dom,dojo/on,game/WsRpc,qrcode/qrcode,dojo/domReady!".split(","),function(a,e,g,i,f,q,l,p,m,d,r,c,h,b,o){var k="s"+Math.floor(1E7*Math.random()),j=new b({socket:io.connect("http://rebroadcast.nodester.com:80")});
window.wsrpc=j;var v=0,t=!1,i="http://rebroadcast.nodester.com/control?id="+k,u=!0,n=o(4,"M");n.addData(i);n.make();c.byId("logo").style.display="none";j.socket.on("broadcast",function(b){if(b.hasOwnProperty("beta"))v=b.beta;b.btnA&&(t=!0);b.btnB&&C.playSound(V);u=!1});j._ready.then(function(){j.joinChannel(k).then(function(){})});var x,C=new e,F=C.loadImage("images/longBackground.png"),O=C.loadImage("images/vanagon.png"),D=C.loadImage("images/tire.png"),R=C.loadSound("sounds/hit.wav"),U=C.loadSound("sounds/whoosh.wav"),
ca=C.loadSound("sounds/backWhoosh.wav"),V=C.loadSound("sounds/horn.wav"),e=[{x:1155,y:460,halfWidth:1500,halfHeight:20,staticBody:!0,type:"Rectangle"},{x:1155,y:-500,halfWidth:1500,halfHeight:20,staticBody:!0,type:"Rectangle"},{points:[{x:2.3333333333333712,y:-60},{x:123.33333333333337,y:51.666666666666686},{x:-126.66666666666663,y:50.666666666666686}],x:807.6666666666666,y:391.3333333333333,staticBody:!0,type:"Polygon"},{x:-40,y:10,halfWidth:30,halfHeight:1200,staticBody:!0,type:"Rectangle"},{x:2340,
y:10,halfWidth:30,halfHeight:1200,staticBody:!0,type:"Rectangle"},{points:[{x:3.3333333333332575,y:-100.33333333333331},{x:120.33333333333326,y:48.666666666666686},{x:-123.66666666666674,y:51.666666666666686}],x:2029.6666666666667,y:393.3333333333333,staticBody:!0,type:"Polygon"}],f=new f,c=C.loadImage("images/portal_orange_sheet_small.png"),A=f.createFromTile(12,100,c,120,80,0),s={x:600,y:100,collided:!0},c=C.loadImage("images/portal_blue_sheet_small.png"),I=f.createFromTile(12,100,c,120,80,0),y=
{x:2E3,y:100,collided:!0},z,w={},f=1,B,J,L;z=new q({intervalRate:60,adaptive:!1,width:770,height:480,scale:30,gravityY:9.8,resolveCollisions:!0});for(q=0;q<e.length;q++){f++;var c=e[q],G;"Rectangle"===c.type?G=new l({id:f,x:c.x/30,y:c.y/30,halfWidth:c.halfWidth/30,halfHeight:c.halfHeight/30,staticBody:!0}):"Polygon"===c.type&&(G=new p({id:f,x:c.x/30,y:c.y/30,points:r.scalePoints(c.points,1/30),staticBody:!0}));G&&(z.addBody(G),w[f]=G)}f++;B=new l({id:f,x:116/30,y:10.2,halfWidth:65/30,halfHeight:1,
staticBody:!1,draw:function(b,c){b.save();b.translate(this.x*c,this.y*c);b.rotate(this.angle);b.translate(-this.x*c,-this.y*c);b.fillStyle=this.color;b.drawImage(O,(this.x-this.halfWidth)*c-11,(this.y-this.halfHeight)*c-4);b.restore()}});z.addBody(B);w[f]=B;f++;J=new m({id:f,x:74/30,y:337/30,staticBody:!1,radius:20/30,friction:20,density:1,draw:function(b,c){b.save();b.translate(this.x*c,this.y*c);b.rotate(this.angle);b.translate(-this.x*c,-this.y*c);b.drawImage(D,(this.x-this.radius)*c,(this.y-this.radius)*
c);b.restore()}});z.addBody(J);w[f]=J;z.addRevoluteJoint(J.id,B.id);f++;L=new m({id:f,x:161/30,y:337/30,staticBody:!1,radius:20/30,friction:20,density:1,draw:function(b,c){b.save();b.translate(this.x*c,this.y*c);b.rotate(this.angle);b.translate(-this.x*c,-this.y*c);b.drawImage(D,(this.x-this.radius)*c,(this.y-this.radius)*c);b.restore()}});z.addBody(L);w[f]=L;z.addRevoluteJoint(L.id,B.id);(new a({canvasId:"canvas",gameAreaId:"gameArea",canvasPercentage:0.9,resourceManager:C,initInput:function(b){b.addKeyAction(g.LEFT_ARROW);
b.addKeyAction(g.RIGHT_ARROW);b.addKeyAction(g.UP_ARROW);b.addKeyAction(g.DOWN_ARROW);b.addKeyAction(g.ENTER);b.addKeyAction("A");b.addKeyAction("D")},handleInput:function(b){b.keyActions[g.LEFT_ARROW].isPressed()&&z.applyImpulseDegrees(B.id,270,6);b.keyActions[g.ENTER].isPressed()&&(u=!1);b.keyActions[g.RIGHT_ARROW].isPressed()&&z.applyImpulseDegrees(B.id,90,6);b.keyActions[g.UP_ARROW].isPressed()&&z.applyImpulseDegrees(B.id,0,6);b.keyActions.A.isPressed()&&(z.applyTorque(L.id,-30),z.applyTorque(J.id,
-30));b.keyActions.D.isPressed()&&(z.applyTorque(L.id,30),z.applyTorque(J.id,30));b.touchAction.isPressed()?z.applyImpulse(B.id,r.radiansFromCenter({x:30*B.x,y:30*B.y},b.touchAction.position),6):b.mouseAction.isPressed()&&z.applyImpulse(B.id,r.radiansFromCenter({x:30*B.x,y:30*B.y},b.mouseAction.position),6)},update:function(b){z.update();z.updateExternalState(w);A.update(b);I.update(b);z.applyTorque(L.id,2*v);z.applyTorque(J.id,2*v);t&&(t=!1,b=r.radiansToDegrees(B.angle),b%=360,0>b&&(b+=360),60<b&&
300>b&&(z.setPosition(B.id,B.x,B.y-2),z.setAngle(B.id,0)));var b=r.distance({x:30*B.x,y:30*B.y},y),c=r.distance({x:30*B.x,y:30*B.y},s);if(50<b)y.collided=!1;if(50<c)s.collided=!1;if(50>c&&!s.collided)y.collided=!0,z.setPosition(B.id,(y.x+350)/30,y.y/30),C.playSound(U);else if(50>b&&!y.collided)s.collided=!0,z.setPosition(B.id,(s.x-350)/30,s.y/30),C.playSound(ca);B.collisions&&B.collisions.forEach(function(b){10<b.impulse&&C.playSound(R)})},draw:function(b){if(u)b.fillStyle="#FFF",b.fillRect(0,0,this.canvas.width,
this.canvas.height),n.renderToContext(b,14,150,5);else{if(!x){var c=document.createElement("canvas");c.width=F.width;c.height=F.height;x=c.getContext("2d")}x.drawImage(F,0,0,F.width,F.height);A.draw(x,s.x-A.width/2,s.y-A.height/2);I.draw(x,y.x-I.width/2,y.y-I.height/2);B.draw(x,30);J.draw(x,30);L.draw(x,30);var c=30*B.x,d=0;c>=this.canvas.width/2&&c<=F.width-this.canvas.width/2?(d=-c+this.canvas.width/2,b.drawImage(x.canvas,d,0)):c>F.width-this.canvas.width/2?b.drawImage(x.canvas,this.canvas.width-
F.width,0):b.drawImage(x.canvas,0,0)}}})).run()})},"frozen/GameCore":function(){define("dcl,dcl/bases/Mixer,dojo/_base/lang,dojo/dom,./InputManager,./ResourceManager,./shims/RAF".split(","),function(a,e,g,i,f,q){return a(e,{statics:{FONT_SIZE:24},isRunning:!1,canvasId:null,maxStep:40,contextType:"2d",height:0,width:0,resourceManager:null,inputManager:null,loadingForeground:"#00F",loadingBackground:"#FFF",gameAreaId:null,canvasPercentage:0,stop:function(){this.isRunning=!1},run:function(){this.isRunning||
(this.init(),this.loadResources(this.resourceManager),this.initInput(this.inputManager),this.launchLoop())},loadResources:function(){},init:function(){if(!this.canvas)this.canvas=i.byId(this.canvasId);if(this.canvas){if(!this.context)this.context=this.canvas.getContext(this.contextType);if(this.context){this.height?this.canvas.height=this.height:this.height=this.canvas.height;this.width?this.canvas.width=this.width:this.width=this.canvas.width;if(!this.inputManager)this.inputManager=this.gameAreaId&&
this.canvasPercentage?new f({canvas:this.canvas,gameArea:i.byId(this.gameAreaId),canvasPercentage:this.canvasPercentage}):new f({canvas:this.canvas});this.inputManager.resize();if(!this.resourceManager)this.resourceManager=new q;this.loadResources(this.resourceManager);this.isRunning=!0}else alert("Sorry, your browser does not support a "+this.contextType+" drawing surface on canvas.  I recommend any browser but Internet Explorer")}else alert("Sorry, your browser does not support canvas.  I recommend any browser but Internet Explorer")},
initInput:function(){},handleInput:function(){},gameLoop:function(){this.currTime=(new Date).getTime();this.elapsedTime=Math.min(this.currTime-this.prevTime,this.maxStep);this.prevTime=this.currTime;this.resourceManager&&!this.resourceManager.resourcesReady()?(this.updateLoadingScreen(this.elapsedTime),this.drawLoadingScreen(this.context)):(this.handleInput(this.inputManager,this.elapsedTime),this.paused||this.update(this.elapsedTime),this.context.save(),this.draw(this.context),this.context.restore())},
launchLoop:function(){this.elapsedTime=0;var a=Date.now();this.prevTime=this.currTime=a;this.loopRunner=g.hitch(this,this.loopRunner);window.requestAnimationFrame(this.loopRunner)},loopRunner:function(){this.gameLoop();window.requestAnimationFrame(this.loopRunner)},update:function(){},updateLoadingScreen:function(){},draw:function(a){if("2d"===this.contextType)a.font="14px sans-serif",a.fillText("This game does not have its own draw function!",10,50)},drawLoadingScreen:function(a){if(this.resourceManager&&
"2d"===this.contextType)a.fillStyle=this.loadingBackground,a.fillRect(0,0,this.width,this.height),a.fillStyle=this.loadingForeground,a.strokeStyle=this.loadingForeground,a.font="bold "+Math.floor(this.height/12)+"px sans-serif",a.fillText("Loading... "+this.resourceManager.getPercentComplete()+"%",0.1*this.width,0.55*this.height),a.strokeRect(0.1*this.width,0.7*this.height,0.8*this.width,0.1*this.height),a.fillRect(0.1*this.width,0.7*this.height,0.8*this.width*this.resourceManager.getPercentComplete()/
100,0.1*this.height),a.lineWidth=4}})})},"dcl/dcl":function(){(function(a){"undefined"!=typeof define?define(["./mini"],a):"undefined"!=typeof module?module.exports=a(require("./mini")):dcl=a(dcl)})(function(a){function e(){}function g(a,f,g){var m=a||e,d=f||e,i=g||e,c=function(){var c;m.apply(this,arguments);try{c=i.apply(this,arguments)}catch(b){c=b}d.call(this,arguments,c);if(c instanceof Error)throw c;return c};c.advices={b:a,a:f,f:g};return c}function i(f){return function(g,e){var i=g._m,d;i&&
((d=+i.w[e]||0)&&d!=f&&a._e("set chaining",e,g,f,d),i.w[e]=f)}}var f=a(a.Super,{constructor:function(){this.b=this.f.before;this.a=this.f.after;this.f=this.f.around}});a.mix(a,{Advice:f,advise:function(a){return new f(a)},before:function(a){return new f({before:a})},after:function(a){return new f({after:a})},around:a.superCall,chainBefore:i(1),chainAfter:i(2),isInstanceOf:function(a,f){if(a instanceof f)return!0;var g=a.constructor._m,e;if(g)for(g=g.b,e=g.length-1;0<=e;--e)if(g[e]===f)return!0;return!1},
_sb:function(f,e,i,m){var m=m[i]=a._ec(e,i,"f"),d=a._ec(e,i,"b").reverse(),e=a._ec(e,i,"a"),m=f?a._st(m,1==f?function(d){return a._sc(d.reverse())}:a._sc,i):a._ss(m,i);return!d.length&&!e.length?m||function(){}:g(a._sc(d),a._sc(e),m)}});return a})},"dcl/mini":function(){(function(a){"undefined"!=typeof define?define([],a):"undefined"!=typeof module?module.exports=a():dcl=a()})(function(){function a(b,c){var d=[0],j,h,t,u,n,e,l,r,p=0,D;if(b)if(b instanceof Array){u={};l=b.slice(0).reverse();for(r=
l.length-1;0<=r;--r)if(h=l[r],h._u=h._u||i++,j=h._m){for(e=j.b,p=e.length-1;0<p;--p)D=e[p]._u,u[D]=(u[D]||0)+1;l[r]=e.slice(0)}else l[r]=[h];n={};a:for(;l.length;){for(r=0;r<l.length;++r)if(e=l[r],h=e[0],D=h._u,!u[D]){n[D]||(d.push(h),n[D]=1);e.shift();e.length?--u[e[0]._u]:l.splice(r,1);continue a}a._e("cycle",c,l)}b=b[0];p=d.length-((u=b._m)&&b===d[d.length-(p=u.b.length)]?p:1)-1}else b._u=b._u||i++,d=d.concat((u=b._m)?u.b:b);j=b?a.delegate(b[q]):{};for(e=b&&(u=b._m)?a.delegate(u.w):{constructor:2};0<
p;--p)if(h=d[p],u=h._m,m(j,u&&u.h||h[q]),u)for(D in l=u.w)e[D]=(+e[D]||0)|l[D];for(D in c)g(u=c[D])?e[D]=+e[D]||0:j[D]=u;n={b:d,h:c,w:e,c:{}};d[0]={_m:n,prototype:j};h=j;u=n.w;e=n.b;l=n.c;for(t in u)h[t]=a._sb(u[t],e,t,l);t=j[f];t._m=n;t[q]=j;d[0]=t;return a._p(t)}function e(b){this.f=b}function g(b){return b instanceof e}var i=0,f="constructor",q="prototype",l=function(){},p={},m,d,r,c,h;(m=function(b,c){for(var d in c)b[d]=c[d]})(a,{mix:m,delegate:function(b){l[q]=b;b=new l;l[q]=null;return b},
Super:e,superCall:function(b){return new e(b)},_p:function(b){return b},_e:function(b){throw Error("dcl: "+b);},_f:function(b,c){var d=b.f(c);d.ctr=b.ctr;return d},_ec:d=function(b,c,d){for(var j=b.length-1,h=[],a,f,e="f"==d;a=b[j];--j)if((f=a._m)?(f=f.h).hasOwnProperty(c)&&(g(f=f[c])?e?f.f:f=f[d]:e):e&&(f=a[q][c])&&f!==p[c])f.ctr=a,h.push(f);return h},_sc:c=function(b){var c=b.length,d;return!c?0:1==c?(d=b[0],function(){d.apply(this,arguments)}):function(){for(var d=0;d<c;++d)b[d].apply(this,arguments)}},
_ss:r=function(b,c){for(var d=0,j,h=p[c];j=b[d];++d)h=g(j)?b[d]=a._f(j,h,c):j;return c!=f?h:function(){h.apply(this,arguments)}},_st:h=function(b,c,d){for(var j=0,h,t,u=0;h=b[j];++j)g(h)&&(t=j-u,b[j]=a._f(h,!t?0:1==t?b[u]:c(b.slice(u,j)),d),u=j);t=j-u;return!t?0:1==t&&d!=f?b[u]:c(u?b.slice(u):b)},_sb:function(b,a,k,j){a=j[k]=d(a,k,"f");return(b?h(a,c,k):r(a,k))||function(){}}});return a})},"dcl/bases/Mixer":function(){(function(a){"undefined"!=typeof define?define(["../mini"],a):"undefined"!=typeof module?
module.exports=a(require("../mini")):dclBasesMixer=a(dcl)})(function(a){return a(null,{declaredClass:"dcl/bases/Mixer",constructor:function(e){a.mix(this,e)}})})},"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(a,e){e.add("bug-for-in-skips-shadowed",function(){for(var d in{toString:1})return 0;return 1});var g=e("bug-for-in-skips-shadowed")?"hasOwnProperty.valueOf.isPrototypeOf.propertyIsEnumerable.toLocaleString.toString.constructor".split("."):[],i=g.length,f=function(d,
f,c){var h,b=0,o=a.global;if(!c)if(d.length){h=d[b++];try{c=a.scopeMap[h]&&a.scopeMap[h][1]}catch(k){}c=c||(h in o?o[h]:f?o[h]={}:void 0)}else return o;for(;c&&(h=d[b++]);)c=h in c?c[h]:f?c[h]={}:void 0;return c},q=Object.prototype.toString,l=function(d,a,c){return(c||[]).concat(Array.prototype.slice.call(d,a||0))},p=/\{([^\}]+)\}/g,m={_extraNames:g,_mixin:function(d,a,c){var h,b,f,k={};for(h in a)if(b=a[h],!(h in d)||d[h]!==b&&(!(h in k)||k[h]!==b))d[h]=c?c(b):b;if(e("bug-for-in-skips-shadowed")&&
a)for(f=0;f<i;++f)if(h=g[f],b=a[h],!(h in d)||d[h]!==b&&(!(h in k)||k[h]!==b))d[h]=c?c(b):b;return d},mixin:function(d,a){d||(d={});for(var c=1,h=arguments.length;c<h;c++)m._mixin(d,arguments[c]);return d},setObject:function(d,a,c){var h=d.split("."),d=h.pop();return(c=f(h,!0,c))&&d?c[d]=a:void 0},getObject:function(d,a,c){return f(d.split("."),a,c)},exists:function(d,a){return void 0!==m.getObject(d,!1,a)},isString:function(d){return"string"==typeof d||d instanceof String},isArray:function(d){return d&&
(d instanceof Array||"array"==typeof d)},isFunction:function(d){return"[object Function]"===q.call(d)},isObject:function(d){return void 0!==d&&(null===d||"object"==typeof d||m.isArray(d)||m.isFunction(d))},isArrayLike:function(d){return d&&void 0!==d&&!m.isString(d)&&!m.isFunction(d)&&!(d.tagName&&"form"==d.tagName.toLowerCase())&&(m.isArray(d)||isFinite(d.length))},isAlien:function(d){return d&&!m.isFunction(d)&&/\{\s*\[native code\]\s*\}/.test(""+d)},extend:function(d,a){for(var c=1,h=arguments.length;c<
h;c++)m._mixin(d.prototype,arguments[c]);return d},_hitchArgs:function(d,f){var c=m._toArray(arguments,2),h=m.isString(f);return function(){var b=m._toArray(arguments),o=h?(d||a.global)[f]:f;return o&&o.apply(d||this,c.concat(b))}},hitch:function(d,f){if(2<arguments.length)return m._hitchArgs.apply(a,arguments);f||(f=d,d=null);if(m.isString(f)){d=d||a.global;if(!d[f])throw['lang.hitch: scope["',f,'"] is null (scope="',d,'")'].join("");return function(){return d[f].apply(d,arguments||[])}}return!d?
f:function(){return f.apply(d,arguments||[])}},delegate:function(){function d(){}return function(a,c){d.prototype=a;var h=new d;d.prototype=null;c&&m._mixin(h,c);return h}}(),_toArray:e("ie")?function(){function d(d,c,h){h=h||[];for(c=c||0;c<d.length;c++)h.push(d[c]);return h}return function(a){return(a.item?d:l).apply(this,arguments)}}():l,partial:function(d){return m.hitch.apply(a,[null].concat(m._toArray(arguments)))},clone:function(d){if(!d||"object"!=typeof d||m.isFunction(d))return d;if(d.nodeType&&
"cloneNode"in d)return d.cloneNode(!0);if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp)return RegExp(d);var a,c,h;if(m.isArray(d)){a=[];for(c=0,h=d.length;c<h;++c)c in d&&a.push(m.clone(d[c]))}else a=d.constructor?new d.constructor:{};return m._mixin(a,d,m.clone)},trim:String.prototype.trim?function(d){return d.trim()}:function(d){return d.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(d,a,c){return d.replace(c||p,m.isFunction(a)?a:function(c,b){return m.getObject(b,
!1,a)})}};m.mixin(a,m);return m})},"dojo/_base/kernel":function(){define(["../has","./config","require","module"],function(a,e,g,i){var f,a={},q={},l={config:e,global:this,dijit:a,dojox:q},a={dojo:["dojo",l],dijit:["dijit",a],dojox:["dojox",q]},i=g.map&&g.map[i.id.match(/[^\/]+/)[0]];for(f in i)a[f]?a[f][0]=i[f]:a[f]=[i[f],{}];for(f in a)i=a[f],i[1]._scopeName=i[0],e.noGlobals||(this[i[0]]=i[1]);l.scopeMap=a;l.baseUrl=l.config.baseUrl=g.baseUrl;l.isAsync=g.async;l.locale=e.locale;e="$Rev: 30226 $".match(/\d+/);
l.version={major:1,minor:8,patch:3,flag:"",revision:e?+e[0]:NaN,toString:function(){var a=l.version;return a.major+"."+a.minor+"."+a.patch+a.flag+" ("+a.revision+")"}};Function("d","d.eval = function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(l);l.exit=function(){};l.deprecated=l.experimental=function(){};l._hasResource={};return l})},"dojo/has":function(){define("dojo/has",["require","module"],function(a){var e=a.has||function(){};e.add("touch","ontouchstart"in
document);e.add("device-width",screen.availWidth||innerWidth);a=document.createElement("form");e.add("dom-attributes-explicit",0==a.attributes.length);e.add("dom-attributes-specified-flag",0<a.attributes.length&&40>a.attributes.length);e.clearElement=function(a){a.innerHTML="";return a};e.normalize=function(a,i){var f=a.match(/[\?:]|[^:\?]*/g),q=0,l=function(a){var g=f[q++];if(":"==g)return 0;if("?"==f[q++]){if(!a&&e(g))return l();l(!0);return l(a)}return g||0};return(a=l())&&i(a)};e.load=function(a,
e,f){a?e([a],f):f()};return e})},"dojo/_base/config":function(){define(["../has","require"],function(a,e){var g={},i=e.rawConfig,f;for(f in i)g[f]=i[f];return g})},"dojo/sniff":function(){define("dojo/sniff",["./has"],function(a){var e=navigator,g=e.userAgent,e=e.appVersion,i=parseFloat(e);a.add("air",0<=g.indexOf("AdobeAIR"));a.add("khtml",0<=e.indexOf("Konqueror")?i:void 0);a.add("webkit",parseFloat(g.split("WebKit/")[1])||void 0);a.add("chrome",parseFloat(g.split("Chrome/")[1])||void 0);a.add("safari",
0<=e.indexOf("Safari")&&!a("chrome")?parseFloat(e.split("Version/")[1]):void 0);a.add("mac",0<=e.indexOf("Macintosh"));a.add("quirks","BackCompat"==document.compatMode);a.add("ios",/iPhone|iPod|iPad/.test(g));a.add("android",parseFloat(g.split("Android ")[1])||void 0);if(!a("webkit")){0<=g.indexOf("Opera")&&a.add("opera",9.8<=i?parseFloat(g.split("Version/")[1])||i:i);0<=g.indexOf("Gecko")&&!a("khtml")&&!a("webkit")&&a.add("mozilla",i);a("mozilla")&&a.add("ff",parseFloat(g.split("Firefox/")[1]||g.split("Minefield/")[1])||
void 0);if(document.all&&!a("opera"))g=parseFloat(e.split("MSIE ")[1])||void 0,(e=document.documentMode)&&5!=e&&Math.floor(g)!=e&&(g=e),a.add("ie",g);a.add("wii","undefined"!=typeof opera&&opera.wiiremote)}return a})},"dojo/dom":function(){define(["./sniff","./_base/window"],function(a,e){if(7>=a("ie"))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(g){}var i={};i.byId=a("ie")?function(a,f){if("string"!=typeof a)return a;var g=f||e.doc,i=a&&g.getElementById(a);if(i&&(i.attributes.id.value==
a||i.id==a))return i;g=g.all[a];if(!g||g.nodeName)g=[g];for(var d=0;i=g[d++];)if(i.attributes&&i.attributes.id&&i.attributes.id.value==a||i.id==a)return i}:function(a,f){return("string"==typeof a?(f||e.doc).getElementById(a):a)||null};i.isDescendant=function(a,f){try{a=i.byId(a);for(f=i.byId(f);a;){if(a==f)return!0;a=a.parentNode}}catch(g){}return!1};a.add("css-user-select",function(a,f,g){if(!g)return!1;var a=g.style,f=["Khtml","O","ms","Moz","Webkit"],g=f.length,e="userSelect";do if("undefined"!==
typeof a[e])return e;while(g--&&(e=f[g]+"UserSelect"));return!1});var f=a("css-user-select");i.setSelectable=f?function(a,g){i.byId(a).style[f]=g?"":"none"}:function(a,f){var a=i.byId(a),g=a.getElementsByTagName("*"),e=g.length;if(f)for(a.removeAttribute("unselectable");e--;)g[e].removeAttribute("unselectable");else for(a.setAttribute("unselectable","on");e--;)g[e].setAttribute("unselectable","on")};return i})},"dojo/_base/window":function(){define(["./kernel","./lang","../sniff"],function(a,e,g){var i=
{global:a.global,doc:this.document||null,body:function(f){f=f||a.doc;return f.body||f.getElementsByTagName("body")[0]},setContext:function(f,g){a.global=i.global=f;a.doc=i.doc=g},withGlobal:function(f,g,e,p){var m=a.global;try{return a.global=i.global=f,i.withDoc.call(null,f.document,g,e,p)}finally{a.global=i.global=m}},withDoc:function(f,e,l,p){var m=i.doc,d=g("quirks"),r=g("ie"),c,h,b;try{a.doc=i.doc=f;a.isQuirks=g.add("quirks","BackCompat"==a.doc.compatMode,!0,!0);if(g("ie")&&(b=f.parentWindow)&&
b.navigator)c=parseFloat(b.navigator.appVersion.split("MSIE ")[1])||void 0,(h=f.documentMode)&&5!=h&&Math.floor(c)!=h&&(c=h),a.isIE=g.add("ie",c,!0,!0);l&&"string"==typeof e&&(e=l[e]);return e.apply(l,p||[])}finally{a.doc=i.doc=m,a.isQuirks=g.add("quirks",d,!0,!0),a.isIE=g.add("ie",r,!0,!0)}}};e.mixin(a,i);return i})},"frozen/InputManager":function(){define("./GameAction,./MouseAction,dcl,dcl/bases/Mixer,dojo/on,dojo/dom-style,dojo/dom-geometry,dojo/_base/lang,dojo/domReady!".split(","),function(a,
e,g,i,f,q,l,p){return g(i,{keyActions:[],mouseAction:null,touchAction:null,canvas:null,handleMouse:!0,handleTouch:!0,handleKeys:!0,gameArea:null,canvasPercentage:null,constructor:function(){this.handleKeys&&(f(document,"keydown",p.hitch(this,"keyDown")),f(document,"keyup",p.hitch(this,"keyReleased")));this.handleMouse&&(f(this.canvas,"mousedown",p.hitch(this,"mouseDown")),f(document,"mousemove",p.hitch(this,"mouseMove")),f(document,"mouseup",p.hitch(this,"mouseUp")));this.handleTouch&&(f(this.canvas,
"touchstart",p.hitch(this,"touchStart")),f(document,"touchmove",p.hitch(this,"touchMove")),f(document,"touchend",p.hitch(this,"touchEnd")));if(!this.mouseAction)this.mouseAction=new e;if(!this.touchAction)this.touchAction=new e;this.gameArea&&this.canvasPercentage&&(f(window,"resize",p.hitch(this,"resize")),f(window,"orientationchange",p.hitch(this,"resize")))},mapToKey:function(a,d){if(!this.keyActions)this.keyActions=[];this.keyActions[d]=a},addKeyAction:function(f,d){var g=new a;if(d)g.behavior=
g.statics.DETECT_INITAL_PRESS_ONLY;this.mapToKey(g,f);return g},setMouseAction:function(a){this.mouseAction=a},setTouchAction:function(a){this.touchAction=a},mouseUp:function(a){this.mouseAction.release();this.mouseAction.endPosition=this.getMouseLoc(a)},mouseDown:function(a){this.mouseAction.press();this.mouseAction.startPosition=this.getMouseLoc(a);this.mouseAction.position=this.mouseAction.startPosition},mouseMove:function(a){this.mouseAction.position=this.getMouseLoc(a)},touchStart:function(a){this.touchAction.press();
this.touchAction.startPosition=this.getMouseLoc(a.changedTouches[0]);this.touchAction.position=this.touchAction.startPosition},touchEnd:function(a){this.touchAction.release();this.mouseAction.endPosition=this.getMouseLoc(a)},touchMove:function(a){this.touchAction.position=this.getMouseLoc(a.changedTouches[0]);a.preventDefault()},getKeyAction:function(a){return this.keyActions.length?this.keyActions[a.keyCode]||this.keyActions[String.fromCharCode(a.keyCode)]:null},keyPressed:function(a){(a=this.getKeyAction(a))&&
!a.isPressed()&&a.press()},keyDown:function(a){(a=this.getKeyAction(a))&&!a.isPressed()&&a.press()},keyReleased:function(a){(a=this.getKeyAction(a))&&a.release()},getMouseLoc:function(a){var d=l.position(this.canvas);return this.zoomRatio?{x:Math.round((a.clientX-d.x)/this.zoomRatio),y:Math.round((a.clientY-d.y)/this.zoomRatio)}:{x:Math.round(a.clientX-d.x),y:Math.round(a.clientY-d.y)}},resize:function(){if(this.gameArea&&this.canvasPercentage&&this.canvas){var a=this.canvas.width,d=this.canvas.height,
f=l.getMarginExtents(document.body),c=window.innerWidth-f.w,f=window.innerHeight-f.h,d=a/d,h="",b="";c/f>d?(c=f*d,h=c+"px"):b=Math.round(c/d)+"px";this.zoomRatio=c/a*this.canvasPercentage;q.set(this.gameArea,{width:h,height:b});a=Math.floor(100*this.canvasPercentage)+"%";q.set(this.canvas,{width:a,height:a,display:"block",marginLeft:"auto",marginRight:"auto"})}}})})},"frozen/GameAction":function(){define(["dcl","dcl/bases/Mixer"],function(a,e){return a(e,{name:null,behavior:0,amount:0,state:0,statics:{NORMAL:0,
DETECT_INITAL_PRESS_ONLY:1,STATE_RELEASED:0,STATE_PRESSED:1,STATE_WAITING_FOR_RELEASE:2,STATE_MOVED:3},constructor:function(){this.reset()},getName:function(){return this.name},reset:function(){this.state=this.statics.STATE_RELEASED;this.amount=0},tap:function(){this.press();this.release()},press:function(){this.state=this.statics.STATE_PRESSED;this.behavior===this.statics.DETECT_INITAL_PRESS_ONLY&&this.pressAmt(1)},pressAmt:function(a){if(this.state!==this.statics.STATE_WAITING_FOR_RELEASE)this.amount+=
a,this.state=this.statics.STATE_WAITING_FOR_RELEASE},release:function(){this.state=this.statics.STATE_RELEASED},isPressed:function(){return this.state===this.statics.STATE_PRESSED?!0:!1},getAmount:function(){var a=this.amount;if(0!==a)if(this.state===this.statics.STATE_RELEASED)this.amount=0;else if(this.behavior===this.statics.DETECT_INITAL_PRESS_ONLY)this.state=this.statics.STATE_WAITING_FOR_RELEASE,this.amount=0;return a}})})},"frozen/MouseAction":function(){define(["dcl","dcl/bases/Mixer","./GameAction"],
function(a,e,g){return a([e,g],{startPosition:null,endPosition:null,position:null})})},"dojo/on":function(){define("dojo/on",["require","./_base/kernel","./has"],function(a,e,g){function i(b,c,d,a,f){if(a=c.match(/(.*):(.*)/))return c=a[2],a=a[1],l.selector(a,c).call(f,b,d);g("touch")&&(p.test(c)&&(d=k(d)),!g("event-orientationchange")&&"orientationchange"==c&&(c="resize",b=window,d=k(d)));h&&(d=h(d));if(b.addEventListener){var o=c in r,e=o?r[c]:c;b.addEventListener(e,d,o);return{remove:function(){b.removeEventListener(e,
d,o)}}}c="on"+c;throw Error("Target must be an event emitter");}function f(){this.cancelable=!1}function q(){this.bubbles=!1}a=window.ScriptEngineMajorVersion;g.add("jscript",a&&a()+ScriptEngineMinorVersion()/10);g.add("event-orientationchange",g("touch")&&!g("android"));g.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation);var l=function(b,c,d,a){return"function"==typeof b.on&&"function"!=typeof c?b.on(c,d):l.parse(b,c,d,
i,a,this)};l.pausable=function(b,c,d,a){var h,b=l(b,c,function(){if(!h)return d.apply(this,arguments)},a);b.pause=function(){h=!0};b.resume=function(){h=!1};return b};l.once=function(b,c,d){var a=l(b,c,function(){a.remove();return d.apply(this,arguments)});return a};l.parse=function(b,c,d,a,h,f){if(c.call)return c.call(f,b,d);if(-1<c.indexOf(",")){for(var c=c.split(/\s*,\s*/),k=[],o=0,g;g=c[o++];)k.push(a(b,g,d,h,f));k.remove=function(){for(var b=0;b<k.length;b++)k[b].remove()};return k}return a(b,
c,d,h,f)};var p=/^touch/;l.selector=function(b,c,d){return function(a,h){function f(c){for(k=k&&k.matches?k:e.query;!k.matches(c,b,a);)if(c==a||!1===d||!(c=c.parentNode)||1!=c.nodeType)return;return c}var k="function"==typeof b?{matches:b}:this,o=c.bubble;return o?l(a,o(f),h):l(a,c,function(b){var c=f(b.target);return c&&h.call(c,b)})}};var m=[].slice,d=l.emit=function(b,c,d){var a=m.call(arguments,2),h="on"+c;if("parentNode"in b){var k=a[0]={},o;for(o in d)k[o]=d[o];k.preventDefault=f;k.stopPropagation=
q;k.target=b;k.type=c;d=k}do b[h]&&b[h].apply(b,a);while(d&&d.bubbles&&(b=b.parentNode));return d&&d.cancelable&&d},r={};if(!g("event-stopimmediatepropagation"))var c=function(){this.modified=this.immediatelyStopped=!0},h=function(b){return function(d){if(!d.immediatelyStopped)return d.stopImmediatePropagation=c,b.apply(this,arguments)}};r={focusin:"focus",focusout:"blur"};l.emit=function(b,c,a){if(b.dispatchEvent&&document.createEvent){var h=b.ownerDocument.createEvent("HTMLEvents");h.initEvent(c,
!!a.bubbles,!!a.cancelable);for(var f in a)f in h||(h[f]=a[f]);return b.dispatchEvent(h)&&h}return d.apply(l,arguments)};if(g("touch"))var b=function(){},o=window.orientation,k=function(c){return function(d){var a=d.corrected;if(!a){var h=d.type;try{delete d.type}catch(f){}d.type?(b.prototype=d,a=new b,a.preventDefault=function(){d.preventDefault()},a.stopPropagation=function(){d.stopPropagation()}):(a=d,a.type=h);d.corrected=a;if("resize"==h){if(o==window.orientation)return null;o=window.orientation;
a.type="orientationchange";return c.call(this,a)}if(!("rotation"in a))a.rotation=0,a.scale=1;var h=a.changedTouches[0],k;for(k in h)delete a[k],a[k]=h[k]}return c.call(this,a)}};return l})},"dojo/dom-style":function(){define(["./sniff","./dom"],function(a,e){function g(b,c,h){c=c.toLowerCase();if(a("ie")){if("auto"==h){if("height"==c)return b.offsetHeight;if("width"==c)return b.offsetWidth}if("fontweight"==c)switch(h){case 700:return"bold";default:return"normal"}}c in d||(d[c]=r.test(c));return d[c]?
q(b,h):h}var i,f={};i=a("webkit")?function(b){var c;if(1==b.nodeType){var d=b.ownerDocument.defaultView;c=d.getComputedStyle(b,null);if(!c&&b.style)b.style.display="",c=d.getComputedStyle(b,null)}return c||{}}:a("ie")&&(9>a("ie")||a("quirks"))?function(b){return 1==b.nodeType&&b.currentStyle?b.currentStyle:{}}:function(b){return 1==b.nodeType?b.ownerDocument.defaultView.getComputedStyle(b,null):{}};f.getComputedStyle=i;var q;q=a("ie")?function(b,c){if(!c)return 0;if("medium"==c)return 4;if(c.slice&&
"px"==c.slice(-2))return parseFloat(c);var d=b.style,a=b.runtimeStyle,h=d.left,f=a.left;a.left=b.currentStyle.left;try{d.left=c,c=d.pixelLeft}catch(g){c=0}d.left=h;a.left=f;return c}:function(b,c){return parseFloat(c)||0};f.toPixelValue=q;var l=function(b,c){try{return b.filters.item("DXImageTransform.Microsoft.Alpha")}catch(d){return c?{}:null}},p=9>a("ie")||10>a("ie")&&a("quirks")?function(b){try{return l(b).Opacity/100}catch(c){return 1}}:function(b){return i(b).opacity},m=9>a("ie")||10>a("ie")&&
a("quirks")?function(b,c){var d=100*c,a=1==c;b.style.zoom=a?"":1;if(l(b))l(b,1).Opacity=d;else{if(a)return c;b.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity="+d+")"}l(b,1).Enabled=!a;if("tr"==b.tagName.toLowerCase())for(d=b.firstChild;d;d=d.nextSibling)"td"==d.tagName.toLowerCase()&&m(d,c);return c}:function(b,c){return b.style.opacity=c},d={left:!0,top:!0},r=/margin|padding|width|height|max|min|offset/,c=a("ie")?"styleFloat":"cssFloat",h={cssFloat:c,styleFloat:c,"float":c};f.get=
function(b,c){var d=e.byId(b),a=arguments.length;if(2==a&&"opacity"==c)return p(d);var c=h[c]||c,i=f.getComputedStyle(d);return 1==a?i:g(d,c,i[c]||d.style[c])};f.set=function(b,c,d){var a=e.byId(b),g=arguments.length,i="opacity"==c,c=h[c]||c;if(3==g)return i?m(a,d):a.style[c]=d;for(var u in c)f.set(b,u,c[u]);return f.getComputedStyle(a)};return f})},"dojo/dom-geometry":function(){define(["./sniff","./_base/window","./dom","./dom-style"],function(a,e,g,i){function f(d,a,c,h,b,f){f=f||"px";d=d.style;
if(!isNaN(a))d.left=a+f;if(!isNaN(c))d.top=c+f;if(0<=h)d.width=h+f;if(0<=b)d.height=b+f}function q(d){return"button"==d.tagName.toLowerCase()||"input"==d.tagName.toLowerCase()&&"button"==(d.getAttribute("type")||"").toLowerCase()}function l(d){return"border-box"==p.boxModel||"table"==d.tagName.toLowerCase()||q(d)}var p={boxModel:"content-box"};if(a("ie"))p.boxModel="BackCompat"==document.compatMode?"border-box":"content-box";p.getPadExtents=function(d,a){var d=g.byId(d),c=a||i.getComputedStyle(d),
h=i.toPixelValue,b=h(d,c.paddingLeft),f=h(d,c.paddingTop),k=h(d,c.paddingRight),c=h(d,c.paddingBottom);return{l:b,t:f,r:k,b:c,w:b+k,h:f+c}};p.getBorderExtents=function(d,a){var d=g.byId(d),c=i.toPixelValue,h=a||i.getComputedStyle(d),b="none"!=h.borderLeftStyle?c(d,h.borderLeftWidth):0,f="none"!=h.borderTopStyle?c(d,h.borderTopWidth):0,k="none"!=h.borderRightStyle?c(d,h.borderRightWidth):0,c="none"!=h.borderBottomStyle?c(d,h.borderBottomWidth):0;return{l:b,t:f,r:k,b:c,w:b+k,h:f+c}};p.getPadBorderExtents=
function(d,a){var d=g.byId(d),c=a||i.getComputedStyle(d),h=p.getPadExtents(d,c),c=p.getBorderExtents(d,c);return{l:h.l+c.l,t:h.t+c.t,r:h.r+c.r,b:h.b+c.b,w:h.w+c.w,h:h.h+c.h}};p.getMarginExtents=function(d,a){var d=g.byId(d),c=a||i.getComputedStyle(d),h=i.toPixelValue,b=h(d,c.marginLeft),f=h(d,c.marginTop),k=h(d,c.marginRight),c=h(d,c.marginBottom);return{l:b,t:f,r:k,b:c,w:b+k,h:f+c}};p.getMarginBox=function(d,f){var d=g.byId(d),c=f||i.getComputedStyle(d),h=p.getMarginExtents(d,c),b=d.offsetLeft-h.l,
e=d.offsetTop-h.t,k=d.parentNode,j=i.toPixelValue;if(a("mozilla")){var v=parseFloat(c.left),c=parseFloat(c.top);!isNaN(v)&&!isNaN(c)?(b=v,e=c):k&&k.style&&(k=i.getComputedStyle(k),"visible"!=k.overflow&&(b+="none"!=k.borderLeftStyle?j(d,k.borderLeftWidth):0,e+="none"!=k.borderTopStyle?j(d,k.borderTopWidth):0))}else if((a("opera")||8==a("ie")&&!a("quirks"))&&k)k=i.getComputedStyle(k),b-="none"!=k.borderLeftStyle?j(d,k.borderLeftWidth):0,e-="none"!=k.borderTopStyle?j(d,k.borderTopWidth):0;return{l:b,
t:e,w:d.offsetWidth+h.w,h:d.offsetHeight+h.h}};p.getContentBox=function(d,f){var d=g.byId(d),c=f||i.getComputedStyle(d),h=d.clientWidth,b=p.getPadExtents(d,c),e=p.getBorderExtents(d,c);h?(c=d.clientHeight,e.w=e.h=0):(h=d.offsetWidth,c=d.offsetHeight);a("opera")&&(b.l+=e.l,b.t+=e.t);return{l:b.l,t:b.t,w:h-b.w-e.w,h:c-b.h-e.h}};p.setContentSize=function(d,a,c){var d=g.byId(d),h=a.w,a=a.h;l(d)&&(c=p.getPadBorderExtents(d,c),0<=h&&(h+=c.w),0<=a&&(a+=c.h));f(d,NaN,NaN,h,a)};var m={l:0,t:0,w:0,h:0};p.setMarginBox=
function(d,e,c){var d=g.byId(d),h=c||i.getComputedStyle(d),c=e.w,b=e.h,o=l(d)?m:p.getPadBorderExtents(d,h),h=p.getMarginExtents(d,h);if(a("webkit")&&q(d)){var k=d.style;if(0<=c&&!k.width)k.width="4px";if(0<=b&&!k.height)k.height="4px"}0<=c&&(c=Math.max(c-o.w-h.w,0));0<=b&&(b=Math.max(b-o.h-h.h,0));f(d,e.l,e.t,c,b)};p.isBodyLtr=function(d){d=d||e.doc;return"ltr"==(e.body(d).dir||d.documentElement.dir||"ltr").toLowerCase()};p.docScroll=function(d){var d=d||e.doc,f=e.doc.parentWindow||e.doc.defaultView;
return"pageXOffset"in f?{x:f.pageXOffset,y:f.pageYOffset}:(f=a("quirks")?e.body(d):d.documentElement)&&{x:p.fixIeBiDiScrollLeft(f.scrollLeft||0,d),y:f.scrollTop||0}};if(a("ie"))p.getIeDocumentElementOffset=function(d){d=d||e.doc;d=d.documentElement;if(8>a("ie")){var f=d.getBoundingClientRect(),c=f.left,f=f.top;7>a("ie")&&(c+=d.clientLeft,f+=d.clientTop);return{x:0>c?0:c,y:0>f?0:f}}return{x:0,y:0}};p.fixIeBiDiScrollLeft=function(d,f){var f=f||e.doc,c=a("ie");if(c&&!p.isBodyLtr(f)){var h=a("quirks"),
b=h?e.body(f):f.documentElement,g=e.global;6==c&&!h&&g.frameElement&&b.scrollHeight>b.clientHeight&&(d+=b.clientLeft);return 8>c||h?d+b.clientWidth-b.scrollWidth:-d}return d};p.position=function(d,f){var d=g.byId(d),c=e.body(d.ownerDocument),h=d.getBoundingClientRect(),h={x:h.left,y:h.top,w:h.right-h.left,h:h.bottom-h.top};if(9>a("ie")){var b=p.getIeDocumentElementOffset(d.ownerDocument);h.x-=b.x+(a("quirks")?c.clientLeft+c.offsetLeft:0);h.y-=b.y+(a("quirks")?c.clientTop+c.offsetTop:0)}f&&(c=p.docScroll(d.ownerDocument),
h.x+=c.x,h.y+=c.y);return h};p.getMarginSize=function(d,a){var d=g.byId(d),c=p.getMarginExtents(d,a||i.getComputedStyle(d)),h=d.getBoundingClientRect();return{w:h.right-h.left+c.w,h:h.bottom-h.top+c.h}};p.normalizeEvent=function(d){if(!("layerX"in d))d.layerX=d.offsetX,d.layerY=d.offsetY};return p})},"dojo/domReady":function(){define(["./has"],function(){function a(c){q?c(g):l.push(c)}var e=this,g=document,i={loaded:1,complete:1},f="string"!=typeof g.readyState,q=!!i[g.readyState];if(f)g.readyState=
"loading";if(!q){var l=[],p=[],m=function(c){c=c||e.event;if(!(q||"readystatechange"==c.type&&!i[g.readyState])){q=1;if(f)g.readyState="complete";for(;l.length;)l.shift()(g)}},d=function(c,d){c.addEventListener(d,m,!1);l.push(function(){c.removeEventListener(d,m,!1)})};d(g,"DOMContentLoaded");d(e,"load");"onreadystatechange"in g?d(g,"readystatechange"):f||p.push(function(){return i[g.readyState]});if(p.length){var r=function(){if(!q){for(var c=p.length;c--;)if(p[c]()){m("poller");return}setTimeout(r,
30)}};r()}}a.load=function(c,d,b){a(b)};return a})},"frozen/ResourceManager":function(){define(["dcl","dcl/bases/Mixer","./shims/AudioContext"],function(a,e){function g(a,e){var g=e;a&&(g=[a,e].join("/"));return g.replace(/\/{2,}/g,"/")}var i=null;window.AudioContext&&(i=new window.AudioContext);return a(e,{imageCount:0,loadedImages:0,allLoaded:!1,imageDir:null,soundDir:null,audioContext:i,resourceList:{},loadImage:function(a){a=g(this.imageDir,a);if(this.resourceList[a])return this.resourceList[a].img;
this.allLoaded=!1;var e=new Image,i={name:a,img:e,complete:!1};e.onload=function(){i.complete=!0};e.src=a;this.resourceList[a]=i;return e},loadSound:function(a){var a=g(this.soundDir,a),e={name:a,buffer:null,complete:!1};if(this.audioContext){if(this.resourceList[a])return this.resourceList[a];this.resourceList[a]=e;var i=new XMLHttpRequest;i.open("GET",a,!0);i.responseType="arraybuffer";var p=this.audioContext;i.onload=function(){p.decodeAudioData(i.response,function(a){e.buffer=a;e.complete=!0},
function(){})};i.send()}return e},playSound:function(a,e,g,i){g=g||0;if(this.audioContext&&a&&(a=a.buffer||a))try{var m=this.audioContext.createBufferSource();m.buffer=a;if(e)m.loop=!0;if(i){var d=this.audioContext.createGainNode();d.gain.value=i;m.connect(d);d.connect(this.audioContext.destination)}else m.connect(this.audioContext.destination);m.noteOn(g);return m}catch(r){}},resourcesReady:function(){if(!this.allLoaded){for(var a in this.resourceList)if(!this.resourceList[a].complete)return!1;this.allLoaded=
!0}return!0},getPercentComplete:function(){var a=0,e=0,g;for(g in this.resourceList){var i=this.resourceList[g];e++;i.complete&&(a+=1)}return 0===e?0:Math.round(100*(a/e))}})})},"frozen/shims/AudioContext":function(){define(function(){for(var a=["ms","moz","webkit","o"],e=0;e<a.length&&!window.AudioContext;++e)window.AudioContext=window[a[e]+"AudioContext"]})},"frozen/shims/RAF":function(){define(function(){for(var a=0,e=["ms","moz","webkit","o"],g=0;g<e.length&&!window.requestAnimationFrame;++g)window.requestAnimationFrame=
window[e[g]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[g]+"CancelAnimationFrame"]||window[e[g]+"CancelRequestAnimationFrame"];if(!window.requestAnimationFrame)window.requestAnimationFrame=function(e){var f=(new Date).getTime(),g=Math.max(0,16-(f-a)),l=window.setTimeout(function(){e(f+g)},g);a=f+g;return l};if(!window.cancelAnimationFrame)window.cancelAnimationFrame=function(a){clearTimeout(a)}})},"dojo/keys":function(){define(["./_base/kernel","./sniff"],function(a,e){return a.keys=
{BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:e("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,
NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:e("mac")&&!e("air")?e("safari")?91:224:17}})},"dojo/_base/declare":function(){define(["./kernel","../has","./lang"],function(a,e,g){function i(b,c){throw Error("declare"+(c?" "+c:"")+": "+b);}function f(b,c,d){var a,h,j,f,e,k,g,v=this._inherited=this._inherited||{};"string"==typeof b&&
(a=b,b=c,c=d);d=0;f=b.callee;(a=a||f.nom)||i("can't deduce a name to call inherited()",this.declaredClass);e=this.constructor._meta;j=e.bases;g=v.p;if(a!=F){if(v.c!==f&&(g=0,k=j[0],e=k._meta,e.hidden[a]!==f)){(h=e.chains)&&"string"==typeof h[a]&&i("calling chained method with inherited: "+a,this.declaredClass);do if(e=k._meta,h=k.prototype,e&&(h[a]===f&&h.hasOwnProperty(a)||e.hidden[a]===f))break;while(k=j[++g]);g=k?g:-1}if(k=j[++g])if(h=k.prototype,k._meta&&h.hasOwnProperty(a))d=h[a];else{f=u[a];
do if(h=k.prototype,(d=h[a])&&(k._meta?h.hasOwnProperty(a):d!==f))break;while(k=j[++g])}d=k&&d||u[a]}else{if(v.c!==f&&(g=0,(e=j[0]._meta)&&e.ctor!==f)){h=e.chains;for((!h||"manual"!==h.constructor)&&i("calling chained constructor with inherited",this.declaredClass);(k=j[++g])&&!((e=k._meta)&&e.ctor===f););g=k?g:-1}for(;(k=j[++g])&&!(d=(e=k._meta)?e.ctor:k););d=k&&d}v.c=d;v.p=g;if(d)return!0===c?d:d.apply(this,c||b)}function q(b,c){return"string"==typeof b?this.__inherited(b,c,!0):this.__inherited(b,
!0)}function l(b,c,d){var a=this.getInherited(b,c);if(a)return a.apply(this,d||c||b)}function p(b){for(var c=this.constructor._meta.bases,d=0,a=c.length;d<a;++d)if(c[d]===b)return!0;return this instanceof b}function m(b,c){for(var d in c)d!=F&&c.hasOwnProperty(d)&&(b[d]=c[d]);if(e("bug-for-in-skips-shadowed"))for(var a=g._extraNames,h=a.length;h;)d=a[--h],d!=F&&c.hasOwnProperty(d)&&(b[d]=c[d])}function d(b){v.safeMixin(this.prototype,b);return this}function r(b){return v([this].concat(b))}function c(b,
c){return function(){var s;var d=arguments,a=d,h=d[0],f,e;e=b.length;var k;if(!(this instanceof d.callee))return j(d);if(c&&(h&&h.preamble||this.preamble)){k=Array(b.length);k[0]=d;for(f=0;;){if(h=d[0])(h=h.preamble)&&(d=h.apply(this,d)||d);h=b[f].prototype;(h=h.hasOwnProperty("preamble")&&h.preamble)&&(d=h.apply(this,d)||d);if(++f==e)break;k[f]=d}}for(f=e-1;0<=f;--f)h=b[f],(s=(e=h._meta)?e.ctor:h,h=s)&&h.apply(this,k?k[f]:d);(h=this.postscript)&&h.apply(this,a)}}function h(b,c){return function(){var d=
arguments,a=d,h=d[0];if(!(this instanceof d.callee))return j(d);if(c){if(h)(h=h.preamble)&&(a=h.apply(this,a)||a);(h=this.preamble)&&h.apply(this,a)}b&&b.apply(this,d);(h=this.postscript)&&h.apply(this,d)}}function b(b){return function(){var s;var c=arguments,d=0,a,h;if(!(this instanceof c.callee))return j(c);for(;a=b[d];++d)if(s=(h=a._meta)?h.ctor:a,a=s){a.apply(this,c);break}(a=this.postscript)&&a.apply(this,c)}}function o(b,c,d){return function(){var a,h,f=0,j=1;d&&(f=c.length-1,j=-1);for(;a=c[f];f+=
j)h=a._meta,(a=(h?h.hidden:a.prototype)[b])&&a.apply(this,arguments)}}function k(b){x.prototype=b.prototype;b=new x;x.prototype=null;return b}function j(b){var c=b.callee,d=k(c);c.apply(d,b);return d}function v(a,j,e){"string"!=typeof a&&(e=j,j=a,a="");var e=e||{},l,x,A,s,I,y,z,w=1,B=j;if("[object Array]"==n.call(j)){w=a;A=[];s=[{cls:0,refs:[]}];y={};for(var J=1,L=j.length,G=0,H,P,E,K;G<L;++G){(H=j[G])?"[object Function]"!=n.call(H)&&i("mixin #"+G+" is not a callable constructor.",w):i("mixin #"+
G+" is unknown. Did you use dojo.require to pull it in?",w);P=H._meta?H._meta.bases:[H];E=0;for(H=P.length-1;0<=H;--H){K=P[H].prototype;if(!K.hasOwnProperty("declaredClass"))K.declaredClass="uniqName_"+C++;K=K.declaredClass;y.hasOwnProperty(K)||(y[K]={count:0,refs:[],cls:P[H]},++J);K=y[K];E&&E!==K&&(K.refs.push(E),++E.count);E=K}++E.count;s[0].refs.push(E)}for(;s.length;){E=s.pop();A.push(E.cls);for(--J;x=E.refs,1==x.length;){E=x[0];if(!E||--E.count){E=0;break}A.push(E.cls);--J}if(E)for(G=0,L=x.length;G<
L;++G)E=x[G],--E.count||s.push(E)}J&&i("can't build consistent linearization",w);H=j[0];A[0]=H?H._meta&&H===A[A.length-H._meta.bases.length]?H._meta.bases.length:1:0;y=A;A=y[0];w=y.length-A;j=y[w]}else y=[0],j?"[object Function]"==n.call(j)?(A=j._meta,y=y.concat(A?A.bases:j)):i("base class is not a callable constructor.",a):null!==j&&i("unknown base class. Did you use dojo.require to pull it in?",a);if(j)for(x=w-1;;--x){l=k(j);if(!x)break;A=y[x];(A._meta?m:t)(l,A.prototype);s=new Function;s.superclass=
j;s.prototype=l;j=l.constructor=s}else l={};v.safeMixin(l,e);A=e.constructor;if(A!==u.constructor)A.nom=F,l.constructor=A;for(x=w-1;x;--x)(A=y[x]._meta)&&A.chains&&(z=t(z||{},A.chains));l["-chains-"]&&(z=t(z||{},l["-chains-"]));A=!z||!z.hasOwnProperty(F);y[0]=s=z&&"manual"===z.constructor?b(y):1==y.length?h(e.constructor,A):c(y,A);s._meta={bases:y,hidden:e,chains:z,parents:B,ctor:e.constructor};s.superclass=j&&j.prototype;s.extend=d;s.createSubclass=r;s.prototype=l;l.constructor=s;l.getInherited=
q;l.isInstanceOf=p;l.inherited=O;l.__inherited=f;if(a)l.declaredClass=a,g.setObject(a,s);if(z)for(I in z)if(l[I]&&"string"==typeof z[I]&&I!=F)A=l[I]=o(I,y,"after"===z[I]),A.nom=I;return s}var t=g.mixin,u=Object.prototype,n=u.toString,x=new Function,C=0,F="constructor",O=a.config.isDebug?l:f;a.safeMixin=v.safeMixin=function(b,c){var d,a;for(d in c)if(a=c[d],(a!==u[d]||!(d in u))&&d!=F){if("[object Function]"==n.call(a))a.nom=d;b[d]=a}if(e("bug-for-in-skips-shadowed"))for(var h=g._extraNames,j=h.length;j;)if(d=
h[--j],a=c[d],(a!==u[d]||!(d in u))&&d!=F){if("[object Function]"==n.call(a))a.nom=d;b[d]=a}return b};return a.declare=v})},"frozen/Animation":function(){define(["./AnimFrame","dcl","dcl/bases/Mixer","dojo/_base/lang"],function(a,e,g,i){var f=e(g,{currFrameIndex:0,animTime:0,totalDuration:0,height:64,width:64,image:null,constructor:function(){this.start()},createFromTile:function(a,f,e,g,d,i){return this.createFromSheet(a,f,e,d,g,i)},createFromSheet:function(a,e,g,m,d,r){g=new f({image:g,height:d,
width:m});m=i.isArray(e);d=1;r||(r=0);for(var c=0;c<a;c++)d=m?e[c]:e,g.addFrame(d,c,r);return g},clone:function(){return new f({image:this.image,frames:this.frames,totalDuration:this.totalDuration})},addFrame:function(f,e,g){if(!this.frames)this.frames=[];this.totalDuration+=f;this.frames.push(new a({endTime:this.totalDuration,image:this.image,imgSlotX:e,imgSlotY:g}))},start:function(){this.currFrameIndex=this.animTime=0},update:function(a){if(1<this.frames.length){this.animTime+=a;if(this.animTime>=
this.totalDuration)this.animTime%=this.totalDuration,this.currFrameIndex=0;for(;this.animTime>this.getFrame(this.currFrameIndex).endTime;)this.currFrameIndex++}},getImage:function(){return this.image},getFrame:function(a){return this.frames[a]},getCurrentFrame:function(){return 0===this.frames.length?null:this.getFrame(this.currFrameIndex)},draw:function(a,f,e){var g=this.getCurrentFrame();a.drawImage(this.image,g.imgSlotX*this.width,g.imgSlotY*this.height,this.width,this.height,f,e,this.width,this.height)}});
return f})},"frozen/AnimFrame":function(){define(["dcl","dcl/bases/Mixer"],function(a,e){return a(e,{endTime:0,imgSlotX:0,imgSlotY:0,image:null})})},"frozen/box2d/Box":function(){define(["dcl","dcl/bases/Mixer","dojo/_base/lang"],function(a,e,g){var i=Box2D.Common.Math.b2Vec2,f=Box2D.Dynamics.b2BodyDef,q=Box2D.Dynamics.b2Body,l=Box2D.Dynamics.b2FixtureDef,p=Box2D.Dynamics.b2World,m=Box2D.Collision.Shapes.b2PolygonShape,d=Box2D.Collision.Shapes.b2CircleShape,r=Box2D.Dynamics.Joints.b2RevoluteJointDef;
return a(e,{intervalRate:60,adaptive:!1,bodiesMap:[],fixturesMap:[],world:null,gravityX:0,gravityY:10,allowSleep:!0,resolveCollisions:!1,contactListener:null,collisions:null,constructor:function(c){if(c&&c.intervalRate)this.intervalRate=parseInt(c.intervalRate,10);this.world=new p(new i(this.gravityX,this.gravityY),this.allowSleep);this.resolveCollisions&&this.addContactListener(this.contactListener||this)},update:function(c){if(this.resolveCollisions)this.collisions={};var d=Date.now();c?this.world.Step(c/
1E3,10,10):this.world.Step(this.adaptive?(d-this.lastTimestamp)/1E3:1/this.intervalRate,10,10);this.world.ClearForces();return Date.now()-d},getState:function(){for(var c={},d=this.world.GetBodyList();d;d=d.m_next)if(d.IsActive()&&"undefined"!==typeof d.GetUserData()&&null!==d.GetUserData()&&(c[d.GetUserData()]={x:d.GetPosition().x,y:d.GetPosition().y,angle:d.GetAngle(),center:{x:d.GetWorldCenter().x,y:d.GetWorldCenter().y},linearVelocity:d.m_linearVelocity,angularVelocity:d.m_angularVelocity},this.resolveCollisions))c[d.GetUserData()].collisions=
this.collisions[d.GetUserData()]||null;return c},updateExternalState:function(c){var d=this.getState(),b;for(b in d){var a=c[b];a&&!a.staticBody&&a.update(d[b])}},setBodies:function(c){for(var d in c)this.addBody(c[d]);this.ready=!0},addBody:function(c){var a=new f,b=new l,e,k,j,g;b.restitution=c.restitution;b.density=c.density;b.friction=c.friction;a.type=c.staticBody?q.b2_staticBody:q.b2_dynamicBody;a.position.x=c.x;a.position.y=c.y;a.userData=c.id;a.angle=c.angle;a.linearDamping=c.linearDamping;
a.angularDamping=c.angularDamping;var t=this.world.CreateBody(a);if(c.radius)b.shape=new d(c.radius),t.CreateFixture(b);else if(c.points){k=[];for(a=0;a<c.points.length;a++)j=new i,j.Set(c.points[a].x,c.points[a].y),k[a]=j;b.shape=new m;b.shape.SetAsArray(k,k.length);t.CreateFixture(b)}else if(c.polys)for(e=0;e<c.polys.length;e++){k=c.polys[e];g=[];for(a=0;a<k.length;a++)j=new i,j.Set(k[a].x,k[a].y),g[a]=j;b.shape=new m;b.shape.SetAsArray(g,g.length);t.CreateFixture(b)}else b.shape=new m,b.shape.SetAsBox(c.halfWidth,
c.halfHeight),t.CreateFixture(b);this.bodiesMap[c.id]=t},setPosition:function(c,d,b){this.bodiesMap[c].SetPosition(new i(d,b))},setAngle:function(c,d){this.bodiesMap[c].SetAngle(d)},setLinearVelocity:function(c,d,b){this.bodiesMap[c].SetLinearVelocity(new i(d,b))},applyImpulseDegrees:function(c,d,b){c=this.bodiesMap[c];c.ApplyImpulse(new i(Math.sin(d*(Math.PI/180))*b,-1*Math.cos(d*(Math.PI/180))*b),c.GetWorldCenter())},applyForceDegrees:function(c,d,b){c=this.bodiesMap[c];c.ApplyForce(new i(Math.sin(d*
(Math.PI/180))*b,-1*Math.cos(d*(Math.PI/180))*b),c.GetWorldCenter())},applyImpulse:function(c,d,b){c=this.bodiesMap[c];c.ApplyImpulse(new i(Math.sin(d)*b,-1*Math.cos(d)*b),c.GetWorldCenter())},applyForce:function(c,d,b){c=this.bodiesMap[c];c.ApplyForce(new i(Math.sin(d)*b,-1*Math.cos(d)*b),c.GetWorldCenter())},applyTorque:function(c,d){this.bodiesMap[c].ApplyTorque(d)},setGravity:function(c){this.world.SetGravity(new i(c.x,c.y))},removeBody:function(c){this.bodiesMap[c]&&(this.fixturesMap[c]&&this.bodiesMap[c].DestroyFixture(this.fixturesMap[c]),
this.world.DestroyBody(this.bodiesMap[c]),delete this.bodiesMap[c])},wakeUpBody:function(c){this.bodiesMap[c]&&this.bodiesMap[c].SetAwake(!0)},addContactListener:function(c){var d=new Box2D.Dynamics.b2ContactListener;if(c.beginContact)d.BeginContact=function(b){c.beginContact(b.GetFixtureA().GetBody().GetUserData(),b.GetFixtureB().GetBody().GetUserData())};if(c.EndContact)d.endContact=function(b){c.endContact(b.GetFixtureA().GetBody().GetUserData(),b.GetFixtureB().GetBody().GetUserData())};if(c.postSolve)d.PostSolve=
function(b,d){c.postSolve(b.GetFixtureA().GetBody().GetUserData(),b.GetFixtureB().GetBody().GetUserData(),d.normalImpulses[0])};this.world.SetContactListener(d)},addRevoluteJoint:function(c,d,b){var c=this.bodiesMap[c],d=this.bodiesMap[d],a=new r;a.Initialize(c,d,c.GetWorldCenter());b&&g.mixin(a,b);this.world.CreateJoint(a)},beginContact:function(){},endContact:function(){},postSolve:function(c,d,b){this.collisions[c]=this.collisions[c]||[];this.collisions[c].push({id:d,impulse:b});this.collisions[d]=
this.collisions[d]||[];this.collisions[d].push({id:c,impulse:b})}})})},"frozen/box2d/RectangleEntity":function(){define(["dcl","dcl/bases/Mixer","./Entity"],function(a,e,g){return a([e,g],{halfWidth:1,halfHeight:1,draw:a.superCall(function(a){return function(f,e){f.save();f.translate(this.x*e,this.y*e);f.rotate(this.angle);f.translate(-this.x*e,-this.y*e);f.fillStyle=this.color;f.strokeStyle=this.strokeColor;f.fillRect((this.x-this.halfWidth)*e,(this.y-this.halfHeight)*e,2*this.halfWidth*e,2*this.halfHeight*
e);f.strokeRect((this.x-this.halfWidth)*e,(this.y-this.halfHeight)*e,2*this.halfWidth*e,2*this.halfHeight*e);f.restore();a.apply(this,[f,e])}}),scaleShape:a.superCall(function(a){return function(f){this.halfHeight*=f;this.halfWidth*=f;a.apply(this,[f])}})})})},"frozen/box2d/Entity":function(){define(["dcl","dcl/bases/Mixer","dojo/_base/lang"],function(a,e,g){return a(e,{id:0,x:0,y:0,angle:0,center:null,restitution:0.3,density:1,friction:0.9,linearDamping:0,linearVelocity:null,angularVelocity:0,angularDamping:0,
staticBody:!1,color:"rgba(128,128,128,0.5)",strokeColor:"#000",hidden:!1,update:function(a){g.mixin(this,a)},draw:function(a,f){a.fillStyle="black";a.beginPath();a.arc(this.x*f,this.y*f,4,0,2*Math.PI,!0);a.closePath();a.fill();if(this.center)a.fillStyle="yellow",a.beginPath(),a.arc(this.center.x*f,this.center.y*f,2,0,2*Math.PI,!0),a.closePath(),a.fill()},scaleShape:function(a){this.x*=a;this.y*=a}})})},"frozen/box2d/PolygonEntity":function(){define(["dcl","dcl/bases/Mixer","./Entity","../utils"],
function(a,e,g,i){return a([e,g],{points:[],draw:a.superCall(function(a){return function(e,g){e.save();e.translate(this.x*g,this.y*g);e.rotate(this.angle);e.translate(-this.x*g,-this.y*g);e.fillStyle=this.color;e.beginPath();e.moveTo((this.x+this.points[0].x)*g,(this.y+this.points[0].y)*g);for(var i=1;i<this.points.length;i++)e.lineTo((this.points[i].x+this.x)*g,(this.points[i].y+this.y)*g);e.lineTo((this.x+this.points[0].x)*g,(this.y+this.points[0].y)*g);e.closePath();e.fill();e.stroke();e.restore();
a.apply(this,[e,g])}}),scaleShape:a.superCall(function(a){return function(e){this.points=i.scalePoints(this.points,e);a.apply(this,[e])}})})})},"frozen/utils":function(){define("./utils/averagePoints,./utils/degreesToRadians,./utils/radiansToDegrees,./utils/pointInPolygon,./utils/distance,./utils/degreesFromCenter,./utils/radiansFromCenter,./utils/scalePoints,./utils/translatePoints".split(","),function(a,e,g,i,f,q,l,p,m){return{averagePoints:a,degreesToRadians:e,radiansToDegrees:g,pointInPolygon:i,
distance:f,degreesFromCenter:q,radiansFromCenter:l,scalePoints:p,translatePoints:m}})},"frozen/utils/averagePoints":function(){define([],function(){return function(a){var e={x:0,y:0};a.forEach(function(a){e.x+=a.x;e.y+=a.y});e.x/=a.length;e.y/=a.length;return e}})},"frozen/utils/degreesToRadians":function(){define(function(){var a=Math.PI/180;return function(e){return e*a}})},"frozen/utils/radiansToDegrees":function(){define(function(){var a=180/Math.PI;return function(e){return e*a}})},"frozen/utils/pointInPolygon":function(){define(function(){return function(a,
e){for(var g=e.points||e,i=!1,f=-1,q=g.length,l=q-1;++f<q;l=f)(g[f].y<=a.y&&a.y<g[l].y||g[l].y<=a.y&&a.y<g[f].y)&&a.x<(g[l].x-g[f].x)*(a.y-g[f].y)/(g[l].y-g[f].y)+g[f].x&&(i=!i);return i}})},"frozen/utils/distance":function(){define(function(){return function(a,e){return Math.sqrt((e.x-a.x)*(e.x-a.x)+(e.y-a.y)*(e.y-a.y))}})},"frozen/utils/degreesFromCenter":function(){define(["./radiansToDegrees","./radiansFromCenter"],function(a,e){return function(g,i){return a(e(g,i))}})},"frozen/utils/radiansFromCenter":function(){define(function(){var a=
{x:0,y:0};return function(e,g){e=e||a;return e.x===g.x&&e.y===g.y?0:e.x===g.x?e.y>g.y?0:Math.PI:e.y===g.y?e.x>g.x?1.5*Math.PI:Math.PI/2:e.x<g.x&&e.y>g.y?Math.atan((g.x-e.x)/(e.y-g.y)):e.x<g.x&&e.y<g.y?Math.PI/2+Math.atan((g.y-e.y)/(g.x-e.x)):e.x>g.x&&e.y<g.y?Math.PI+Math.atan((e.x-g.x)/(g.y-e.y)):1.5*Math.PI+Math.atan((e.y-g.y)/(e.x-g.x))}})},"frozen/utils/scalePoints":function(){define(["dojo/_base/lang"],function(a){var e=function(g,i){if(a.isArray(g)){var f=[];g.forEach(function(a){f.push(e(a,
i))});g=f}else g="object"===typeof i?{x:g.x*i.x,y:g.y*i.y}:{x:g.x*i,y:g.y*i};return g};return e})},"frozen/utils/translatePoints":function(){define(["dojo/_base/lang"],function(a){var e=function(g,i){if(a.isArray(g)){var f=[];g.forEach(function(a){f.push(e(a,i))});g=f}else g={x:g.x,y:g.y},i.hasOwnProperty("x")&&(g.x+=i.x),i.hasOwnProperty("y")&&(g.y+=i.y);return g};return e})},"frozen/box2d/CircleEntity":function(){define(["dcl","dcl/bases/Mixer","./Entity"],function(a,e,g){return a([e,g],{radius:1,
draw:a.superCall(function(a){return function(e,g){e.fillStyle=this.color;e.strokeStyle=this.strokeColor;e.beginPath();e.arc(this.x*g,this.y*g,this.radius*g,0,2*Math.PI,!0);e.closePath();e.fill();e.stroke();this.staticBody||(e.save(),e.translate(this.x*g,this.y*g),e.rotate(this.angle),e.translate(-this.x*g,-this.y*g),e.beginPath(),e.moveTo(this.x*g,this.y*g),e.lineTo(this.x*g,this.y*g-this.radius*g),e.closePath(),e.stroke(),e.restore());a.apply(this,[e,g])}}),scaleShape:a.superCall(function(a){return function(e){this.radius*=
e;a.apply(this,[e])}})})})},"frozen/box2d/MultiPolygonEntity":function(){define(["dcl","dcl/bases/Mixer","./Entity","../utils"],function(a,e,g,i){return a([e,g],{polys:[],draw:a.superCall(function(a){return function(e,g){e.save();e.translate(this.x*g,this.y*g);e.rotate(this.angle);e.translate(-this.x*g,-this.y*g);e.fillStyle=this.color;for(var i=0;i<this.polys.length;i++){e.beginPath();e.moveTo((this.x+this.polys[i][0].x)*g,(this.y+this.polys[i][0].y)*g);for(var m=1;m<this.polys[i].length;m++)e.lineTo((this.polys[i][m].x+
this.x)*g,(this.polys[i][m].y+this.y)*g);e.lineTo((this.x+this.polys[i][0].x)*g,(this.y+this.polys[i][0].y)*g);e.closePath();e.fill();e.stroke()}e.restore();a.apply(this,[e,g])}}),scaleShape:a.superCall(function(a){return function(e){this.polys=i.scalePoints(this.polys,e);a.apply(this,[e])}})})})},"game/WsRpc":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/Deferred"],function(a,e,g,i){return a(null,{_callNum:0,_deferreds:{},_ready:null,socket:null,constructor:function(e){a.safeMixin(this,
e);this._create()},_create:function(){if(!this.socket||!this.socket.on||!this.socket.send||!this.socket.emit)return console.warn("Must pass in an object with a socket property to this cosntructor. ex: {socket : mySocket}");this._ready=new i;this.socket.emit=this.socket.emit||this.socket.send;var a=e.hitch(this,function(a){var e;if(a&&a.services)for(e in a.services)this[e]=function(a){return function(){var d=[],e,c;this._callNum++;g.forEach(arguments,function(c){d.push(c)});e={method:a,params:d,id:this._callNum};
c=new i;c.callNum=this._callNum;this._deferreds[this._callNum]=c;this.socket.emit("rpc",e);return c}}.call(this,e);this._ready.callback()}),q=e.hitch(this,function(a){try{var e=a.id;this._deferreds[e]&&(a.error?this._deferreds[e].errback(a.error):this._deferreds[e].callback(a.result),delete this._deferreds[e])}catch(g){}});this.socket.on("smd",a).emit("smd",{});this.socket.on("rpc",q)}})})},"dojo/_base/array":function(){define(["./kernel","../has","./lang"],function(a,e,g){function i(a){return l[a]=
new Function("item","index","array",a)}function f(a){var e=!a;return function(c,h,b){var g=0,f=c&&c.length||0,j;f&&"string"==typeof c&&(c=c.split(""));"string"==typeof h&&(h=l[h]||i(h));if(b)for(;g<f;++g){if(j=!h.call(b,c[g],g,c),a^j)return!j}else for(;g<f;++g)if(j=!h(c[g],g,c),a^j)return!j;return e}}function q(a){var e=1,c=0,h=0;a||(e=c=h=-1);return function(b,g,f,j){if(j&&0<e)return m.lastIndexOf(b,g,f);var j=b&&b.length||0,i=a?j+h:c;f===p?f=a?c:j+h:0>f?(f=j+f,0>f&&(f=c)):f=f>=j?j+h:f;for(j&&"string"==
typeof b&&(b=b.split(""));f!=i;f+=e)if(b[f]==g)return f;return-1}}var l={},p,m={every:f(!1),some:f(!0),indexOf:q(!0),lastIndexOf:q(!1),forEach:function(a,e,c){var h=0,b=a&&a.length||0;b&&"string"==typeof a&&(a=a.split(""));"string"==typeof e&&(e=l[e]||i(e));if(c)for(;h<b;++h)e.call(c,a[h],h,a);else for(;h<b;++h)e(a[h],h,a)},map:function(a,e,c,h){var b=0,g=a&&a.length||0,h=new (h||Array)(g);g&&"string"==typeof a&&(a=a.split(""));"string"==typeof e&&(e=l[e]||i(e));if(c)for(;b<g;++b)h[b]=e.call(c,a[b],
b,a);else for(;b<g;++b)h[b]=e(a[b],b,a);return h},filter:function(a,e,c){var g=0,b=a&&a.length||0,f=[],k;b&&"string"==typeof a&&(a=a.split(""));"string"==typeof e&&(e=l[e]||i(e));if(c)for(;g<b;++g)k=a[g],e.call(c,k,g,a)&&f.push(k);else for(;g<b;++g)k=a[g],e(k,g,a)&&f.push(k);return f},clearCache:function(){l={}}};g.mixin(a,m);return m})},"dojo/_base/Deferred":function(){define("./kernel,../Deferred,../promise/Promise,../errors/CancelError,../has,./lang,../when".split(","),function(a,e,g,i,f,q,l){var p=
function(){},m=Object.freeze||function(){},d=a.Deferred=function(a){function c(a){if(o)throw Error("This deferred has already been resolved");b=a;o=!0;h()}function h(){for(var a;!a&&v;){var c=v;v=v.next;if(a=c.progress==p)o=!1;var d=k?c.error:c.resolved;f("config-useDeferredInstrumentation")&&k&&e.instrumentRejected&&e.instrumentRejected(b,!!d);if(d)try{var j=d(b);j&&"function"===typeof j.then?j.then(q.hitch(c.deferred,"resolve"),q.hitch(c.deferred,"reject"),q.hitch(c.deferred,"progress")):(d=a&&
void 0===j,a&&!d&&(k=j instanceof Error),c.deferred[d&&k?"reject":"resolve"](d?b:j))}catch(g){c.deferred.reject(g)}else k?c.deferred.reject(b):c.deferred.resolve(b)}}var b,o,k,j,v,t=this.promise=new g;this.resolve=this.callback=function(b){this.fired=0;this.results=[b,null];c(b)};this.reject=this.errback=function(b){k=!0;this.fired=1;f("config-useDeferredInstrumentation")&&e.instrumentRejected&&e.instrumentRejected(b,!!v);c(b);this.results=[null,b]};this.progress=function(b){for(var a=v;a;){var c=
a.progress;c&&c(b);a=a.next}};this.addCallbacks=function(b,a){this.then(b,a,p);return this};t.then=this.then=function(b,a,c){var e=c==p?this:new d(t.cancel),b={resolved:b,error:a,progress:c,deferred:e};v?j=j.next=b:v=j=b;o&&h();return e.promise};var u=this;t.cancel=this.cancel=function(){if(!o){var b=a&&a(u);if(!o)b instanceof Error||(b=new i(b)),b.log=!1,u.reject(b)}};m(t)};q.extend(d,{addCallback:function(d){return this.addCallbacks(q.hitch.apply(a,arguments))},addErrback:function(d){return this.addCallbacks(null,
q.hitch.apply(a,arguments))},addBoth:function(d){var c=q.hitch.apply(a,arguments);return this.addCallbacks(c,c)},fired:-1});d.when=a.when=l;return d})},"dojo/Deferred":function(){define("dojo/Deferred",["./has","./_base/lang","./errors/CancelError","./promise/Promise","require"],function(a,e,g,i,f){var q=Object.freeze||function(){},l=function(a,d,b,e){for(var g=0;g<a.length;g++)p(a[g],d,b,e)},p=function(a,e,b){var g=a[e],f=a.deferred;if(g)try{var j=g(b);0===e?"undefined"!==typeof j&&d(f,e,j):j&&"function"===
typeof j.then?(a.cancel=j.cancel,j.then(m(f,1),m(f,2),m(f,0))):d(f,1,j)}catch(i){d(f,2,i)}else d(f,e,b)},m=function(a,e){return function(b){d(a,e,b)}},d=function(a,d,b){if(!a.isCanceled())switch(d){case 0:a.progress(b);break;case 1:a.resolve(b);break;case 2:a.reject(b)}},r=function(a){var d=this.promise=new i,b=this,e,f,j=!1,v=[];this.isResolved=d.isResolved=function(){return 1===e};this.isRejected=d.isRejected=function(){return 2===e};this.isFulfilled=d.isFulfilled=function(){return!!e};this.isCanceled=
d.isCanceled=function(){return j};this.progress=function(a,c){if(e){if(!0===c)throw Error("This deferred has already been fulfilled.");return d}l(v,0,a,null,b);return d};this.resolve=function(a,c){if(e){if(!0===c)throw Error("This deferred has already been fulfilled.");return d}l(v,e=1,f=a,null,b);v=null;return d};var t=this.reject=function(a,c){if(e){if(!0===c)throw Error("This deferred has already been fulfilled.");return d}l(v,e=2,f=a,void 0,b);v=null;return d};this.then=d.then=function(b,a,c){var j=
[c,b,a];j.cancel=d.cancel;j.deferred=new r(function(b){return j.cancel&&j.cancel(b)});e&&!v?p(j,e,f,void 0):v.push(j);return j.deferred.promise};this.cancel=d.cancel=function(b,d){if(e){if(!0===d)throw Error("This deferred has already been fulfilled.");}else{if(a)var h=a(b),b="undefined"===typeof h?b:h;j=!0;if(e){if(2===e&&f===b)return b}else return"undefined"===typeof b&&(b=new g),t(b),b}};q(d)};r.prototype.toString=function(){return"[object Deferred]"};f&&f(r);return r})},"dojo/errors/CancelError":function(){define(["./create"],
function(a){return a("CancelError",null,null,{dojoType:"cancel"})})},"dojo/errors/create":function(){define(["../_base/lang"],function(a){return function(e,g,i,f){var i=i||Error,q=function(a){if(i===Error){Error.captureStackTrace&&Error.captureStackTrace(this,q);var e=Error.call(this,a),f;for(f in e)e.hasOwnProperty(f)&&(this[f]=e[f]);this.message=a;this.stack=e.stack}else i.apply(this,arguments);g&&g.apply(this,arguments)};q.prototype=a.delegate(i.prototype,f);q.prototype.name=e;return q.prototype.constructor=
q}})},"dojo/promise/Promise":function(){define(["../_base/lang"],function(a){function e(){throw new TypeError("abstract");}return a.extend(function(){},{then:function(){e()},cancel:function(){e()},isResolved:function(){e()},isRejected:function(){e()},isFulfilled:function(){e()},isCanceled:function(){e()},always:function(a){return this.then(a,a)},otherwise:function(a){return this.then(null,a)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})})},
"dojo/when":function(){define("dojo/when",["./Deferred","./promise/Promise"],function(a,e){return function(g,i,f,q){var l=g&&"function"===typeof g.then,p=l&&g instanceof e;if(l){if(!p)l=new a(g.cancel),g.then(l.resolve,l.reject,l.progress),g=l.promise}else return i?i(g):(new a).resolve(g);return i||f||q?g.then(i,f,q):g}})},"qrcode/qrcode":function(){define([],function(){return function(){function a(b,c){if("undefined"==typeof b.length)throw Error(b.length+"/"+c);var d=function(){for(var a=0;a<b.length&&
0==b[a];)a+=1;for(var d=Array(b.length-a+c),e=0;e<b.length-a;e+=1)d[e]=b[e+a];return d}(),e={getAt:function(b){return d[b]},getLength:function(){return d.length}};e.multiply=function(b){for(var c=Array(e.getLength()+b.getLength()-1),d=0;d<e.getLength();d+=1)for(var g=0;g<b.getLength();g+=1)c[d+g]^=f.gexp(f.glog(e.getAt(d))+f.glog(b.getAt(g)));return a(c,0)};e.mod=function(b){if(0>e.getLength()-b.getLength())return e;for(var c=f.glog(e.getAt(0))-f.glog(b.getAt(0)),d=Array(e.getLength()),g=0;g<e.getLength();g+=
1)d[g]=e.getAt(g);for(g=0;g<b.getLength();g+=1)d[g]^=f.gexp(f.glog(b.getAt(g))+c);return a(d,0).mod(b)};return e}var e=function(b,c){var d=g[c],e=null,f=0,t=null,u=[],n={},m=function(c,g){for(var h=f=4*b+17,n=Array(h),o=0;o<h;o+=1){n[o]=Array(h);for(var m=0;m<h;m+=1)n[o][m]=null}e=n;C(0,0);C(f-7,0);C(0,f-7);h=i.getPatternPosition(b);for(n=0;n<h.length;n+=1)for(o=0;o<h.length;o+=1){var m=h[n],p=h[o];if(null==e[m][p])for(var x=-2;2>=x;x+=1)for(var s=-2;2>=s;s+=1)e[m+x][p+s]=-2==x||2==x||-2==s||2==s||
0==x&&0==s?!0:!1}for(h=8;h<f-8;h+=1)null==e[h][6]&&(e[h][6]=0==h%2);for(h=8;h<f-8;h+=1)null==e[6][h]&&(e[6][h]=0==h%2);h=i.getBCHTypeInfo(d<<3|g);for(n=0;15>n;n+=1)o=!c&&1==(h>>n&1),6>n?e[n][8]=o:8>n?e[n+1][8]=o:e[f-15+n][8]=o;for(n=0;15>n;n+=1)o=!c&&1==(h>>n&1),8>n?e[8][f-n-1]=o:9>n?e[8][15-n-1+1]=o:e[8][15-n-1]=o;e[f-8][8]=!c;if(7<=b){h=i.getBCHTypeNumber(b);for(n=0;18>n;n+=1)o=!c&&1==(h>>n&1),e[Math.floor(n/3)][n%3+f-8-3]=o;for(n=0;18>n;n+=1)o=!c&&1==(h>>n&1),e[n%3+f-8-3][Math.floor(n/3)]=o}if(null==
t){h=q.getRSBlocks(b,d);n=l();for(o=0;o<u.length;o+=1)m=u[o],n.put(m.getMode(),4),n.put(m.getLength(),i.getLengthInBits(m.getMode(),b)),m.write(n);for(o=m=0;o<h.length;o+=1)m+=h[o].dataCount;if(n.getLengthInBits()>8*m)throw Error("code length overflow. ("+n.getLengthInBits()+">"+8*m+")");for(n.getLengthInBits()+4<=8*m&&n.put(0,4);0!=n.getLengthInBits()%8;)n.putBit(!1);for(;!(n.getLengthInBits()>=8*m);){n.put(236,8);if(n.getLengthInBits()>=8*m)break;n.put(17,8)}for(var r=0,m=o=0,p=Array(h.length),
x=Array(h.length),s=0;s<h.length;s+=1){var y=h[s].dataCount,z=h[s].totalCount-y,o=Math.max(o,y),m=Math.max(m,z);p[s]=Array(y);for(var w=0;w<p[s].length;w+=1)p[s][w]=255&n.getBuffer()[w+r];r+=y;w=i.getErrorCorrectPolynomial(z);y=a(p[s],w.getLength()-1).mod(w);x[s]=Array(w.getLength()-1);for(w=0;w<x[s].length;w+=1)z=w+y.getLength()-x[s].length,x[s][w]=0<=z?y.getAt(z):0}for(w=n=0;w<h.length;w+=1)n+=h[w].totalCount;n=Array(n);for(w=r=0;w<o;w+=1)for(s=0;s<h.length;s+=1)w<p[s].length&&(n[r]=p[s][w],r+=
1);for(w=0;w<m;w+=1)for(s=0;s<h.length;s+=1)w<x[s].length&&(n[r]=x[s][w],r+=1);t=n}h=t;n=-1;o=f-1;m=7;p=0;x=i.getMaskFunction(g);for(s=f-1;0<s;s-=2)for(6==s&&(s-=1);;){for(w=0;2>w;w+=1)null==e[o][s-w]&&(r=!1,p<h.length&&(r=1==(h[p]>>>m&1)),x(o,s-w)&&(r=!r),e[o][s-w]=r,m-=1,-1==m&&(p+=1,m=7));o+=n;if(0>o||f<=o){o-=n;n=-n;break}}},C=function(b,a){for(var c=-1;7>=c;c+=1)if(!(-1>=b+c||f<=b+c))for(var d=-1;7>=d;d+=1)-1>=a+d||f<=a+d||(e[b+c][a+d]=0<=c&&6>=c&&(0==d||6==d)||0<=d&&6>=d&&(0==c||6==c)||2<=c&&
4>=c&&2<=d&&4>=d?!0:!1)};n.addData=function(b){b=p(b);u.push(b);t=null};n.isDark=function(b,a){if(0>b||f<=b||0>a||f<=a)throw Error(b+","+a);return e[b][a]};n.getModuleCount=function(){return f};n.make=function(){for(var b=0,a=0,c=0;8>c;c+=1){m(!0,c);var d=i.getLostPoint(n);if(0==c||b>d)b=d,a=c}m(!1,a)};n.createBitArray=function(){for(var b=[],a=0;a<n.getModuleCount();a+=1){for(var c=[],d=0;d<n.getModuleCount();d+=1)c.push(n.isDark(a,d)?0:1);b.push(c)}return b};n.renderToContext=function(b,a,c,d){for(var a=
a||3,c=c||0,d=d||0,e=this.createBitArray(),g=0;g<e.length;g++)for(var f=e[g],h=0;h<f.length;h++)b.fillStyle=f[h]?"#FFF":"#000",b.fillRect(h*a+c,g*a+d,a,a)};n.createTableTag=function(b,a){var b=b||2,c;c='<table style=" border-width: 0px; border-style: none; border-collapse: collapse;'+(" padding: 0px; margin: "+("undefined"==typeof a?4*b:a)+"px;")+'"><tbody>';for(var d=0;d<n.getModuleCount();d+=1){c+="<tr>";for(var e=0;e<n.getModuleCount();e+=1)c+='<td style="',c+=" border-width: 0px; border-style: none;",
c+=" border-collapse: collapse;",c+=" padding: 0px; margin: 0px;",c+=" width: "+b+"px;",c+=" height: "+b+"px;",c+=" background-color: ",c+=n.isDark(d,e)?"#000000":"#ffffff",c+=";",c+='"/>';c+="</tr>"}return c+"</tbody></table>"};n.createImgTag=function(b,a){var b=b||2,a="undefined"==typeof a?4*b:a,c=n.getModuleCount()*b+2*a,d=a,e=c-a;return h(c,c,function(a,c){return d<=a&&a<e&&d<=c&&c<e?n.isDark(Math.floor((c-d)/b),Math.floor((a-d)/b))?0:1:1})};return n};e.stringToBytes=function(b){for(var a=[],
c=0;c<b.length;c+=1){var d=b.charCodeAt(c);a.push(d&255)}return a};e.createStringToBytes=function(b,a){var c=function(){for(var c=r(b),d=function(){var b=c.read();if(-1==b)throw Error();return b},e=0,g={};;){var f=c.read();if(-1==f)break;var h=d(),k=d(),i=d(),f=String.fromCharCode(f<<8|h);g[f]=k<<8|i;e+=1}if(e!=a)throw Error(e+" != "+a);return g}();return function(b){for(var a=[],d=0;d<b.length;d+=1){var e=b.charCodeAt(d);128>e?a.push(e):(e=c[b.charAt(d)],"number"==typeof e?(e&255)==e?a.push(e):(a.push(e>>>
8),a.push(e&255)):a.push(63))}return a}};var g={L:1,M:0,Q:3,H:2},i=function(){var b=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],
[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],c={},d=function(b){for(var a=0;0!=b;)a+=1,b>>>=1;return a};c.getBCHTypeInfo=function(b){for(var a=b<<10;0<=d(a)-d(1335);)a^=1335<<d(a)-d(1335);return(b<<10|a)^21522};c.getBCHTypeNumber=function(b){for(var a=b<<12;0<=d(a)-d(7973);)a^=7973<<d(a)-d(7973);return b<<12|a};c.getPatternPosition=function(a){return b[a-
1]};c.getMaskFunction=function(b){switch(b){case 0:return function(b,a){return 0==(b+a)%2};case 1:return function(b){return 0==b%2};case 2:return function(b,a){return 0==a%3};case 3:return function(b,a){return 0==(b+a)%3};case 4:return function(b,a){return 0==(Math.floor(b/2)+Math.floor(a/3))%2};case 5:return function(b,a){return 0==b*a%2+b*a%3};case 6:return function(b,a){return 0==(b*a%2+b*a%3)%2};case 7:return function(b,a){return 0==(b*a%3+(b+a)%2)%2};default:throw Error("bad maskPattern:"+b);
}};c.getErrorCorrectPolynomial=function(b){for(var c=a([1],0),d=0;d<b;d+=1)c=c.multiply(a([1,f.gexp(d)],0));return c};c.getLengthInBits=function(b,a){if(1<=a&&10>a)switch(b){case 1:return 10;case 2:return 9;case 4:return 8;case 8:return 8;default:throw Error("mode:"+b);}else if(27>a)switch(b){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw Error("mode:"+b);}else if(41>a)switch(b){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw Error("mode:"+
b);}else throw Error("type:"+a);};c.getLostPoint=function(b){for(var a=b.getModuleCount(),c=0,d=0;d<a;d+=1)for(var e=0;e<a;e+=1){for(var g=0,f=b.isDark(d,e),h=-1;1>=h;h+=1)if(!(0>d+h||a<=d+h))for(var k=-1;1>=k;k+=1)0>e+k||a<=e+k||0==h&&0==k||f==b.isDark(d+h,e+k)&&(g+=1);5<g&&(c+=3+g-5)}for(d=0;d<a-1;d+=1)for(e=0;e<a-1;e+=1)if(g=0,b.isDark(d,e)&&(g+=1),b.isDark(d+1,e)&&(g+=1),b.isDark(d,e+1)&&(g+=1),b.isDark(d+1,e+1)&&(g+=1),0==g||4==g)c+=3;for(d=0;d<a;d+=1)for(e=0;e<a-6;e+=1)b.isDark(d,e)&&!b.isDark(d,
e+1)&&b.isDark(d,e+2)&&b.isDark(d,e+3)&&b.isDark(d,e+4)&&!b.isDark(d,e+5)&&b.isDark(d,e+6)&&(c+=40);for(e=0;e<a;e+=1)for(d=0;d<a-6;d+=1)b.isDark(d,e)&&!b.isDark(d+1,e)&&b.isDark(d+2,e)&&b.isDark(d+3,e)&&b.isDark(d+4,e)&&!b.isDark(d+5,e)&&b.isDark(d+6,e)&&(c+=40);for(e=g=0;e<a;e+=1)for(d=0;d<a;d+=1)b.isDark(d,e)&&(g+=1);b=Math.abs(100*g/a/a-50)/5;return c+10*b};return c}(),f=function(){for(var b=Array(256),a=Array(256),c=0;8>c;c+=1)b[c]=1<<c;for(c=8;256>c;c+=1)b[c]=b[c-4]^b[c-5]^b[c-6]^b[c-8];for(c=
0;255>c;c+=1)a[b[c]]=c;return{glog:function(b){if(1>b)throw Error("glog("+b+")");return a[b]},gexp:function(a){for(;0>a;)a+=255;for(;256<=a;)a-=255;return b[a]}}}(),q=function(){var b=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,
121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16]],a=function(b,a){var c={};c.totalCount=b;c.dataCount=a;return c},c={},d=function(a,c){switch(c){case g.L:return b[4*(a-1)+0];case g.M:return b[4*(a-1)+1];case g.Q:return b[4*(a-1)+2];case g.H:return b[4*(a-1)+3]}};c.getRSBlocks=function(b,c){var e=d(b,c);if("undefined"==typeof e)throw Error("bad rs block @ typeNumber:"+
b+"/errorCorrectLevel:"+c);for(var g=e.length/3,f=[],h=0;h<g;h+=1)for(var k=e[3*h+0],i=e[3*h+1],l=e[3*h+2],m=0;m<k;m+=1)f.push(a(i,l));return f};return c}(),l=function(){var b=[],a=0,c={getBuffer:function(){return b},getAt:function(a){return 1==(b[Math.floor(a/8)]>>>7-a%8&1)}};c.put=function(b,a){for(var d=0;d<a;d+=1)c.putBit(1==(b>>>a-d-1&1))};c.getLengthInBits=function(){return a};c.putBit=function(c){var d=Math.floor(a/8);b.length<=d&&b.push(0);c&&(b[d]|=128>>>a%8);a+=1};return c},p=function(b){var a=
e.stringToBytes(b);return{getMode:function(){return 4},getLength:function(){return a.length},write:function(b){for(var c=0;c<a.length;c+=1)b.put(a[c],8)}}},m=function(){var b=[],a={writeByte:function(a){b.push(a&255)}};a.writeShort=function(b){a.writeByte(b);a.writeByte(b>>>8)};a.writeBytes=function(b,c,d){for(var c=c||0,d=d||b.length,e=0;e<d;e+=1)a.writeByte(b[e+c])};a.writeString=function(b){for(var c=0;c<b.length;c+=1)a.writeByte(b.charCodeAt(c))};a.toByteArray=function(){return b};a.toString=
function(){var a;a="[";for(var c=0;c<b.length;c+=1)0<c&&(a+=","),a+=b[c];return a+"]"};return a},d=function(){var b=0,a=0,c=0,d="",e={},g=function(a){if(!(0>a)){if(26>a)return 65+a;if(52>a)return 97+(a-26);if(62>a)return 48+(a-52);if(62==a)return 43;if(63==a)return 47}throw Error("n:"+a);};e.writeByte=function(e){b=b<<8|e&255;a+=8;for(c+=1;6<=a;)d+=String.fromCharCode(g(b>>>a-6&63)),a-=6};e.flush=function(){0<a&&(d+=String.fromCharCode(g(b<<6-a&63)),a=b=0);if(0!=c%3)for(var e=3-c%3,f=0;f<e;f+=1)d+=
"="};e.toString=function(){return d};return e},r=function(a){var c=0,d=0,e=0,g=function(a){if(65<=a&&90>=a)return a-65;if(97<=a&&122>=a)return a-97+26;if(48<=a&&57>=a)return a-48+52;if(43==a)return 62;if(47==a)return 63;throw Error("c:"+a);};return{read:function(){for(;8>e;){if(c>=a.length){if(0==e)return-1;throw Error("unexpected end of file./"+e);}var f=a.charAt(c);c+=1;if("="==f)return e=0,-1;f.match(/^\s$/)||(d=d<<6|g(f.charCodeAt(0)),e+=6)}f=d>>>e-8&255;e-=8;return f}}},c=function(a,c){var d=
Array(a*c),e=function(a){var b=0,c=0;return{write:function(d,e){if(0!=d>>>e)throw Error("length over");for(;8<=b+e;)a.writeByte(255&(d<<b|c)),e-=8-b,d>>>=8-b,b=c=0;c|=d<<b;b+=e},flush:function(){0<b&&a.writeByte(c)}}},g=function(){var a={},b=0,c={};c.add=function(d){if(c.contains(d))throw Error("dup key:"+d);a[d]=b;b+=1};c.size=function(){return b};c.indexOf=function(b){return a[b]};c.contains=function(b){return"undefined"!=typeof a[b]};return c};return{setPixel:function(c,e,g){d[e*a+c]=g},write:function(f){f.writeString("GIF87a");
f.writeShort(a);f.writeShort(c);f.writeByte(128);f.writeByte(0);f.writeByte(0);f.writeByte(0);f.writeByte(0);f.writeByte(0);f.writeByte(255);f.writeByte(255);f.writeByte(255);f.writeString(",");f.writeShort(0);f.writeShort(0);f.writeShort(a);f.writeShort(c);f.writeByte(0);var h;h=3;for(var i=g(),l=0;4>l;l+=1)i.add(String.fromCharCode(l));i.add(String.fromCharCode(4));i.add(String.fromCharCode(5));var l=m(),p=e(l);p.write(4,h);for(var q=0,r=String.fromCharCode(d[q]),q=q+1;q<d.length;){var D=String.fromCharCode(d[q]),
q=q+1;i.contains(r+D)?r+=D:(p.write(i.indexOf(r),h),4095>i.size()&&(i.size()==1<<h&&(h+=1),i.add(r+D)),r=D)}p.write(i.indexOf(r),h);p.write(5,h);p.flush();h=l.toByteArray();f.writeByte(2);for(i=0;255<h.length-i;)f.writeByte(255),f.writeBytes(h,i,255),i+=255;f.writeByte(h.length-i);f.writeBytes(h,i,h.length-i);f.writeByte(0);f.writeString(";")}}},h=function(a,e,f,g){for(var h=c(a,e),i=0;i<e;i+=1)for(var l=0;l<a;l+=1)h.setPixel(l,i,f(l,i));f=m();h.write(f);h=d();f=f.toByteArray();for(i=0;i<f.length;i+=
1)h.writeByte(f[i]);h.flush();a='<img src="data:image/gif;base64,'+h+'" width="'+a+'" height="'+e+'"';g&&(a=a+' alt="'+g+'"');return a+"/>"};return e}()})}}});(function(){require({cache:{}});require.boot&&require.apply(null,require.boot)})();
//>>built
(function(a,e){var h,i,f,q=function(){},l=function(c){for(var b in c)return 0;return 1},p={}.toString,m=function(c){return"[object Function]"==p.call(c)},b=function(c){return"[object String]"==p.call(c)},v=function(c){return"[object Array]"==p.call(c)},d=function(c,b){if(c)for(var d=0;d<c.length;)b(c[d++])},g=function(c,b){for(var d in b)c[d]=b[d];return c},c=function(c,b){return g(Error(c),{src:"dojoLoader",info:b})},o=1,k=function(){return"_"+o++},j=function(c,b,d){return pa(c,b,d,0,j)},r=this,
u=r.document,w=u&&u.createElement("DiV"),n=j.has=function(c){return m(x[c])?x[c]=x[c](r,u,w):x[c]},x=n.cache=e.hasCache;n.add=function(c,b,d,j){(void 0===x[c]||j)&&(x[c]=b);return d&&n(c)};for(var H in a.has)n.add(H,a.has[H],0,1);j.async=1;var F=new Function("return eval(arguments[0]);");j.eval=function(c,b){return F(c+"\r\n////@ sourceURL="+b)};var L={},D=j.signal=function(c,b){var j=L[c];d(j&&j.slice(0),function(c){c.apply(null,v(b)?b:[b])})},P=j.on=function(c,b){var d=L[c]||(L[c]=[]);d.push(b);
return{remove:function(){for(var c=0;c<d.length;c++)if(d[c]===b){d.splice(c,1);break}}}},U=[],ca={},V=[],B={},t=j.map={},A=[],y={},C="",s={},M={};H={};var z=function(c){var b,d,j,g;for(b in M)d=M[b],(j=b.match(/^url\:(.+)/))?s["url:"+qa(j[1],c)]=d:"*now"==b?g=d:"*noref"!=b&&(j=W(b,c),s[j.mid]=s["url:"+j.url]=d);g&&g(da(c));M={}},K=function(c){return c.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(c){return"\\"+c})},I=function(c,b){b.splice(0,b.length);for(var d in c)b.push([d,c[d],RegExp("^"+K(d)+
"(/|$)"),d.length]);b.sort(function(c,b){return b[3]-c[3]});return b},G=function(c){var b=c.name;b||(b=c,c={name:b});c=g({main:"main"},c);c.location=c.location?c.location:b;if(c.packageMap)t[b]=c.packageMap;if(!c.main.indexOf("./"))c.main=c.main.substring(2);B[b]=c},Q=[],E=function(c,o,r){for(var k in c){if("waitSeconds"==k)j.waitms=1E3*(c[k]||0);"cacheBust"==k&&(C=c[k]?b(c[k])?c[k]:(new Date).getTime()+"":"");if("baseUrl"==k||"combo"==k)j[k]=c[k];c[k]!==x&&(j.rawConfig[k]=c[k],"has"!=k&&n.add("config-"+
k,c[k],0,o))}if(!j.baseUrl)j.baseUrl="./";/\/$/.test(j.baseUrl)||(j.baseUrl+="/");for(k in c.has)n.add(k,c.has[k],0,o);d(c.packages,G);for(f in c.packagePaths)d(c.packagePaths[f],function(c){var d=f+"/"+c;b(c)&&(c={name:c});c.location=d;G(c)});I(g(t,c.map),A);d(A,function(c){c[1]=I(c[1],[]);if("*"==c[0])A.star=c});I(g(ca,c.paths),V);d(c.aliases,function(c){b(c[0])&&(c[0]=RegExp("^"+K(c[0])+"$"));U.push(c)});if(o)Q.push({config:c.config});else for(k in c.config)o=R(k,r),o.config=g(o.config||{},c.config[k]);
if(c.cache)z(),M=c.cache,c.cache["*noref"]&&z();D("config",[c,j.rawConfig])};j.rawConfig={};E(e,1);E(a,1);E(H,1);var J=function(c){ea(function(){d(c.deps,ra)})},pa=function(d,o,r,a,w){var u;if(b(d)){if((u=R(d,a,!0))&&u.executed)return u.result;throw c("undefinedModule",d);}v(d)||(E(d,0,a),d=o,o=r);if(v(d))if(d.length){for(var r="require*"+k(),f,h=[],n=0;n<d.length;)f=d[n++],h.push(R(f,a));u=g(X("",r,0,""),{injected:2,deps:h,def:o||q,require:a?a.require:j,gc:1});y[u.mid]=u;J(u);var l=T&&0!="sync";
ea(function(){fa(u,l)});u.executed||O.push(u);Y()}else o&&o();return w},da=function(c){if(!c)return j;var b=c.require;if(!b)b=function(d,j,g){return pa(d,j,g,c,b)},c.require=g(b,j),b.module=c,b.toUrl=function(b){return qa(b,c)},b.toAbsMid=function(b){return ga(b,c)};return b},O=[],Z=[],N={},Ba=function(c){c.injected=1;N[c.mid]=1;c.url&&(N[c.url]=c.pack||1);Aa()},$=function(c){c.injected=2;delete N[c.mid];c.url&&delete N[c.url];l(N)&&Ca()},Da=j.idle=function(){return!Z.length&&l(N)&&!O.length&&!T},
ha=function(c,b){if(b)for(var d=0;d<b.length;d++)if(b[d][2].test(c))return b[d];return 0},sa=function(c){for(var b=[],d,j,c=c.replace(/\\/g,"/").split("/");c.length;)d=c.shift(),".."==d&&b.length&&".."!=j?(b.pop(),j=b[b.length-1]):"."!=d&&b.push(j=d);return b.join("/")},X=function(c,b,d,j){return{pid:c,mid:b,pack:d,url:j,executed:0,def:0}},ta=function(b,j,g,k,o,r,a,w){var u,q,f,n;n=/^\./.test(b);if(/(^\/)|(\:)|(\.js$)/.test(b)||n&&!j)return X(0,b,0,b);b=sa(n?j.mid+"/../"+b:b);if(/^\./.test(b))throw c("irrationalPath",
b);j&&(f=ha(j.mid,r));(f=(f=f||r.star)&&ha(b,f[1]))&&(b=f[1]+b.substring(f[3]));j=(h=b.match(/^([^\/]+)(\/(.+))?$/))?h[1]:"";(u=g[j])?b=j+"/"+(q=h[3]||u.main):j="";var l=0;d(U,function(c){var d=b.match(c[0]);d&&0<d.length&&(l=m(c[1])?b.replace(c[0],c[1]):c[1])});if(l)return ta(l,0,g,k,o,r,a,w);if(g=k[b])return w?X(g.pid,g.mid,g.pack,g.url):k[b];k=(f=ha(b,a))?f[1]+b.substring(f[3]):j?u.location+"/"+q:b;/(^\/)|(\:)/.test(k)||(k=o+k);return X(j,b,u,sa(k+".js"))},W=function(c,b){return ta(c,b,B,y,j.baseUrl,
A,V)},ua=function(c,b,d){return c.normalize?c.normalize(b,function(c){return ga(c,d)}):ga(b,d)},va=0,R=function(c,b,d){var j,g;(j=c.match(/^(.+?)\!(.*)$/))?(g=R(j[1],b,d),5===g.executed&&!g.load&&ia(g),g.load?(j=ua(g,j[2],b),c=g.mid+"!"+(g.dynamic?++va+"!":"")+j):(j=j[2],c=g.mid+"!"+ ++va+"!waitingForPlugin"),c={plugin:g,mid:c,req:da(b),prid:j}):c=W(c,b);return y[c.mid]||!d&&(y[c.mid]=c)},ga=j.toAbsMid=function(c,b){return W(c,b).mid},qa=j.toUrl=function(c,b){var d=W(c+"/x",b),j=d.url;return wa(0===
d.pid?c:j.substring(0,j.length-5))},xa={injected:2,executed:5,def:3,result:3},S=function(c){return y[c]=g({mid:c},xa)},Ea=S("require"),Fa=S("exports"),Ga=S("module"),aa={},ja=0,ia=function(c){var b=c.result;c.dynamic=b.dynamic;c.normalize=b.normalize;c.load=b.load;return c},Ha=function(c){var b={};d(c.loadQ,function(d){var j=ua(c,d.prid,d.req.module),k=c.dynamic?d.mid.replace(/waitingForPlugin$/,j):c.mid+"!"+j,j=g(g({},d),{mid:k,prid:j,injected:0});y[k]||ya(y[k]=j);b[d.mid]=y[k];$(d);delete y[d.mid]});
c.loadQ=0;var j=function(c){for(var d=c.deps||[],j=0;j<d.length;j++)(c=b[d[j].mid])&&(d[j]=c)},k;for(k in y)j(y[k]);d(O,j)},ka=function(c){j.trace("loader-finish-exec",[c.mid]);c.executed=5;c.defOrder=ja++;c.loadQ&&(ia(c),Ha(c));for(i=0;i<O.length;)O[i]===c?O.splice(i,1):i++;/^require\*/.test(c.mid)&&delete y[c.mid]},Ia=[],fa=function(c,b){if(4===c.executed)return j.trace("loader-circular-dependency",[Ia.concat(c.mid).join("->")]),!c.def||b?aa:c.cjs&&c.cjs.exports;if(!c.executed){if(!c.def)return aa;
var d=c.mid,g=c.deps||[],k,o=[],r=0;for(c.executed=4;r<g.length;){k=g[r++];k=k===Ea?da(c):k===Fa?c.cjs.exports:k===Ga?c.cjs:fa(k,b);if(k===aa)return c.executed=0,j.trace("loader-exec-module",["abort",d]),aa;o.push(k)}j.trace("loader-run-factory",[c.mid]);d=c.def;o=m(d)?d.apply(null,o):d;c.result=void 0===o&&c.cjs?c.cjs.exports:o;ka(c)}return c.result},T=0,ea=function(c){try{T++,c()}finally{T--}Da()&&D("idle",[])},Y=function(){T||ea(function(){for(var c,b,d=0;d<O.length;)c=ja,b=O[d],fa(b),c!=ja?d=
0:d++})};void 0===n("dojo-loader-eval-hint-url")&&n.add("dojo-loader-eval-hint-url",1);var wa=function(c){c+="";return c+(C?(/\?/.test(c)?"&":"?")+C:"")},ya=function(c){var b=c.plugin;5===b.executed&&!b.load&&ia(b);var d=function(b){c.result=b;$(c);ka(c);Y()};b.load?b.load(c.prid,c.req,d):b.loadQ?b.loadQ.push(c):(b.loadQ=[c],O.unshift(b),ra(b))},ba=0,la=0,ma=0,Ja=function(c,b){n("config-stripStrict")&&(c=c.replace(/"use strict"/g,""));ma=1;c===ba?ba.call(null):j.eval(c,n("dojo-loader-eval-hint-url")?
b.url:b.mid);ma=0},ra=function(c){var b=c.mid,d=c.url;if(!c.executed&&!c.injected&&!(N[b]||c.url&&(c.pack&&N[c.url]===c.pack||1==N[c.url])))if(Ba(c),c.plugin)ya(c);else{var k=function(){Ka(c);2!==c.injected&&($(c),g(c,xa),j.trace("loader-define-nonmodule",[c.url]));Y()};(ba=s[b]||s["url:"+c.url])?(j.trace("loader-inject",["cache",c.mid,d]),Ja(ba,c),k()):(j.trace("loader-inject",["script",c.mid,d]),la=c,j.injectUrl(wa(d),k,c),la=0)}},na=function(b,d,k){j.trace("loader-define-module",[b.mid,d]);if(2===
b.injected)return D("error",c("multipleDefine",b)),b;g(b,{deps:d,def:k,cjs:{id:b.mid,uri:b.url,exports:b.result={},setExports:function(c){b.cjs.exports=c},config:function(){return b.config}}});for(var o=0;o<d.length;o++)d[o]=R(d[o],b);$(b);if(!m(k)&&!d.length)b.result=k,ka(b);return b},Ka=function(c,b){for(var j=[],g,k;Z.length;)k=Z.shift(),b&&(k[0]=b.shift()),g=k[0]&&R(k[0])||c,j.push([g,k[1],k[2]]);z(c);d(j,function(c){J(na.apply(null,c))})},Ca=q,Aa=q;n.add("ie-event-behavior",!!u.attachEvent&&
("undefined"===typeof opera||"[object Opera]"!=opera.toString()));var oa=function(c,b,d,j){if(n("ie-event-behavior"))return c.attachEvent(d,j),function(){c.detachEvent(d,j)};c.addEventListener(b,j,!1);return function(){c.removeEventListener(b,j,!1)}},La=oa(window,"load","onload",function(){j.pageLoaded=1;"complete"!=u.readyState&&(u.readyState="complete");La()}),za=u.getElementsByTagName("script")[0],Ma=za.parentNode;j.injectUrl=function(b,d,j){var j=j.node=u.createElement("script"),g=oa(j,"load",
"onreadystatechange",function(c){var c=c||window.event,b=c.target||c.srcElement;if("load"===c.type||/complete|loaded/.test(b.readyState))g(),k(),d&&d()}),k=oa(j,"error","onerror",function(d){g();k();D("error",c("scriptError",[b,d]))});j.type="text/javascript";j.charset="utf-8";j.src=b;Ma.insertBefore(j,za);return j};j.log=q;j.trace=q;S=function(d,g,k){var o=arguments.length,r=["require","exports","module"],a=[0,d,g];1==o?a=[0,m(d)?r:[],d]:2==o&&b(d)?a=[d,m(g)?r:[],g]:3==o&&(a=[d,g,k]);j.trace("loader-define",
a.slice(0,2));if((o=a[0]&&R(a[0]))&&!N[o.mid])J(na(o,a[1],a[2]));else if(!n("ie-event-behavior")||ma)Z.push(a);else{o=o||la;if(!o)for(d in N)if((r=y[d])&&r.node&&"interactive"===r.node.readyState){o=r;break}o?(z(o),J(na(o,a[1],a[2]))):D("error",c("ieDefineFailed",a[0]));Y()}};S.amd={vendor:"dojotoolkit.org"};g(g(j,e.loaderPatch),a.loaderPatch);P("error",function(c){try{if(console.error(c),c instanceof Error)for(var b in c);}catch(d){}});g(j,{uid:k,cache:s,packs:B});if(!r.define)r.define=S,r.require=
j,d(Q,function(c){E(c)}),P=H.deps||a.deps||e.deps,H=H.callback||a.callback||e.callback,j.boot=P||H?[P||[],H]:0})(this.dojoConfig||this.djConfig||this.require||{},{async:1,hasCache:{"config-selectorEngine":"acme","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-loader":1,dom:1,"host-browser":1},packages:[{location:".",name:"dojo"},{location:"../dcl",main:"dcl",name:"dcl"},{location:"../frozen",main:"GameCore",name:"frozen"},{location:"../qrcode",name:"qrcode"},{location:"../game",main:"game",name:"game"},
{location:"../frozen-dev-boilerplate",name:"frozen-dev-boilerplate"}]});
require({cache:{"dist/game":function(){define([],1)},"game/game":function(){define("frozen/GameCore,frozen/ResourceManager,dojo/keys,dojo/_base/declare,frozen/Animation,frozen/box2d/Box,frozen/box2d/RectangleEntity,frozen/box2d/PolygonEntity,frozen/box2d/CircleEntity,frozen/box2d/MultiPolygonEntity,frozen/utils,dojo/dom,dojo/on,game/WsRpc,qrcode/qrcode,dojo/domReady!".split(","),function(a,e,h,i,f,q,l,p,m,b,v,d,g,c,o){var k="s"+Math.floor(1E7*Math.random()),j=new c({socket:io.connect("http://rebroadcast.nodester.com:80")});
window.wsrpc=j;var r=0,u=!1,w="http://rebroadcast.nodester.com/control?id="+k,n=!0,x=o(4,"M");x.addData(w);x.make();d.byId("logo").style.display="none";j.socket.on("broadcast",function(c){if(c.hasOwnProperty("beta"))r=c.beta;c.btnA&&(u=!0);c.btnB&&F.playSound(B);n=!1});j._ready.then(function(){j.joinChannel(k).then(function(){});j.shorten(w).then(function(c){d.byId("controlLink").innerHTML='<a href="'+c+'" target="_blank">'+c+"</a>"},function(){d.byId("controlLink").innerHTML='<a href="'+w+'" target="_blank">'+
w+"</a>"})});var H,F=new e,L=F.loadImage("images/longBackground.png"),D=F.loadImage("images/vanagon.png"),P=F.loadImage("images/tire.png"),U=F.loadSound("sounds/hit.wav"),ca=F.loadSound("sounds/whoosh.wav"),V=F.loadSound("sounds/backWhoosh.wav"),B=F.loadSound("sounds/horn.wav"),e=[{x:1155,y:460,halfWidth:1500,halfHeight:20,staticBody:!0,type:"Rectangle"},{x:1155,y:-500,halfWidth:1500,halfHeight:20,staticBody:!0,type:"Rectangle"},{points:[{x:2.3333333333333712,y:-60},{x:123.33333333333337,y:51.666666666666686},
{x:-126.66666666666663,y:50.666666666666686}],x:807.6666666666666,y:391.3333333333333,staticBody:!0,type:"Polygon"},{x:-40,y:10,halfWidth:30,halfHeight:1200,staticBody:!0,type:"Rectangle"},{x:2340,y:10,halfWidth:30,halfHeight:1200,staticBody:!0,type:"Rectangle"},{points:[{x:3.3333333333332575,y:-100.33333333333331},{x:120.33333333333326,y:48.666666666666686},{x:-123.66666666666674,y:51.666666666666686}],x:2029.6666666666667,y:393.3333333333333,staticBody:!0,type:"Polygon"}],f=new f,i=F.loadImage("images/portal_orange_sheet_small.png"),
t=f.createFromTile(12,100,i,120,80,0),A={x:600,y:100,collided:!0},i=F.loadImage("images/portal_blue_sheet_small.png"),y=f.createFromTile(12,100,i,120,80,0),C={x:2E3,y:100,collided:!0},s,M={},f=1,z,K,I;s=new q({intervalRate:60,adaptive:!1,width:770,height:480,scale:30,gravityY:9.8,resolveCollisions:!0});for(q=0;q<e.length;q++){f++;var i=e[q],G;"Rectangle"===i.type?G=new l({id:f,x:i.x/30,y:i.y/30,halfWidth:i.halfWidth/30,halfHeight:i.halfHeight/30,staticBody:!0}):"Polygon"===i.type&&(G=new p({id:f,
x:i.x/30,y:i.y/30,points:v.scalePoints(i.points,1/30),staticBody:!0}));G&&(s.addBody(G),M[f]=G)}f++;z=new l({id:f,x:116/30,y:10.2,halfWidth:65/30,halfHeight:1,staticBody:!1,draw:function(c,b){c.save();c.translate(this.x*b,this.y*b);c.rotate(this.angle);c.translate(-this.x*b,-this.y*b);c.fillStyle=this.color;c.drawImage(D,(this.x-this.halfWidth)*b-11,(this.y-this.halfHeight)*b-4);c.restore()}});s.addBody(z);M[f]=z;f++;K=new m({id:f,x:74/30,y:337/30,staticBody:!1,radius:20/30,friction:20,density:1,
draw:function(c,b){c.save();c.translate(this.x*b,this.y*b);c.rotate(this.angle);c.translate(-this.x*b,-this.y*b);c.drawImage(P,(this.x-this.radius)*b,(this.y-this.radius)*b);c.restore()}});s.addBody(K);M[f]=K;s.addRevoluteJoint(K.id,z.id);f++;I=new m({id:f,x:161/30,y:337/30,staticBody:!1,radius:20/30,friction:20,density:1,draw:function(c,b){c.save();c.translate(this.x*b,this.y*b);c.rotate(this.angle);c.translate(-this.x*b,-this.y*b);c.drawImage(P,(this.x-this.radius)*b,(this.y-this.radius)*b);c.restore()}});
s.addBody(I);M[f]=I;s.addRevoluteJoint(I.id,z.id);(new a({canvasId:"canvas",gameAreaId:"gameArea",canvasPercentage:0.9,resourceManager:F,initInput:function(c){c.addKeyAction(h.LEFT_ARROW);c.addKeyAction(h.RIGHT_ARROW);c.addKeyAction(h.UP_ARROW);c.addKeyAction(h.DOWN_ARROW);c.addKeyAction(h.ENTER);c.addKeyAction("A");c.addKeyAction("D")},handleInput:function(c){c.keyActions[h.LEFT_ARROW].isPressed()&&s.applyImpulseDegrees(z.id,270,6);c.keyActions[h.ENTER].isPressed()&&(n=!1);c.keyActions[h.RIGHT_ARROW].isPressed()&&
s.applyImpulseDegrees(z.id,90,6);c.keyActions[h.UP_ARROW].isPressed()&&s.applyImpulseDegrees(z.id,0,6);c.keyActions.A.isPressed()&&(s.applyTorque(I.id,-30),s.applyTorque(K.id,-30));c.keyActions.D.isPressed()&&(s.applyTorque(I.id,30),s.applyTorque(K.id,30));c.touchAction.isPressed()?s.applyImpulse(z.id,v.radiansFromCenter({x:30*z.x,y:30*z.y},c.touchAction.position),6):c.mouseAction.isPressed()&&s.applyImpulse(z.id,v.radiansFromCenter({x:30*z.x,y:30*z.y},c.mouseAction.position),6)},update:function(c){s.update();
s.updateExternalState(M);t.update(c);y.update(c);s.applyTorque(I.id,2*r);s.applyTorque(K.id,2*r);u&&(u=!1,c=v.radiansToDegrees(z.angle),c%=360,0>c&&(c+=360),60<c&&300>c&&(s.setPosition(z.id,z.x,z.y-2),s.setAngle(z.id,0)));var c=v.distance({x:30*z.x,y:30*z.y},C),b=v.distance({x:30*z.x,y:30*z.y},A);if(50<c)C.collided=!1;if(50<b)A.collided=!1;if(50>b&&!A.collided)C.collided=!0,s.setPosition(z.id,(C.x+350)/30,C.y/30),F.playSound(ca);else if(50>c&&!C.collided)A.collided=!0,s.setPosition(z.id,(A.x-350)/
30,A.y/30),F.playSound(V);z.collisions&&z.collisions.forEach(function(c){10<c.impulse&&F.playSound(U)})},draw:function(c){if(n)c.fillStyle="#FFF",c.fillRect(0,0,this.canvas.width,this.canvas.height),x.renderToContext(c,14,150,5);else{if(!H){var b=document.createElement("canvas");b.width=L.width;b.height=L.height;H=b.getContext("2d")}H.drawImage(L,0,0,L.width,L.height);t.draw(H,A.x-t.width/2,A.y-t.height/2);y.draw(H,C.x-y.width/2,C.y-y.height/2);z.draw(H,30);K.draw(H,30);I.draw(H,30);var b=30*z.x,
d=0;b>=this.canvas.width/2&&b<=L.width-this.canvas.width/2?(d=-b+this.canvas.width/2,c.drawImage(H.canvas,d,0)):b>L.width-this.canvas.width/2?c.drawImage(H.canvas,this.canvas.width-L.width,0):c.drawImage(H.canvas,0,0)}}})).run()})},"frozen/GameCore":function(){define("dcl,dcl/bases/Mixer,dojo/_base/lang,dojo/dom,./InputManager,./ResourceManager,./shims/RAF".split(","),function(a,e,h,i,f,q){return a(e,{statics:{FONT_SIZE:24},isRunning:!1,canvasId:null,maxStep:40,contextType:"2d",height:0,width:0,resourceManager:null,
inputManager:null,loadingForeground:"#00F",loadingBackground:"#FFF",gameAreaId:null,canvasPercentage:0,stop:function(){this.isRunning=!1},run:function(){this.isRunning||(this.init(),this.loadResources(this.resourceManager),this.initInput(this.inputManager),this.launchLoop())},loadResources:function(){},init:function(){if(!this.canvas)this.canvas=i.byId(this.canvasId);if(this.canvas){if(!this.context)this.context=this.canvas.getContext(this.contextType);if(this.context){this.height?this.canvas.height=
this.height:this.height=this.canvas.height;this.width?this.canvas.width=this.width:this.width=this.canvas.width;if(!this.inputManager)this.inputManager=this.gameAreaId&&this.canvasPercentage?new f({canvas:this.canvas,gameArea:i.byId(this.gameAreaId),canvasPercentage:this.canvasPercentage}):new f({canvas:this.canvas});this.inputManager.resize();if(!this.resourceManager)this.resourceManager=new q;this.loadResources(this.resourceManager);this.isRunning=!0}else alert("Sorry, your browser does not support a "+
this.contextType+" drawing surface on canvas.  I recommend any browser but Internet Explorer")}else alert("Sorry, your browser does not support canvas.  I recommend any browser but Internet Explorer")},initInput:function(){},handleInput:function(){},gameLoop:function(){this.currTime=(new Date).getTime();this.elapsedTime=Math.min(this.currTime-this.prevTime,this.maxStep);this.prevTime=this.currTime;this.resourceManager&&!this.resourceManager.resourcesReady()?(this.updateLoadingScreen(this.elapsedTime),
this.drawLoadingScreen(this.context)):(this.handleInput(this.inputManager,this.elapsedTime),this.paused||this.update(this.elapsedTime),this.context.save(),this.draw(this.context),this.context.restore())},launchLoop:function(){this.elapsedTime=0;var a=Date.now();this.prevTime=this.currTime=a;this.loopRunner=h.hitch(this,this.loopRunner);window.requestAnimationFrame(this.loopRunner)},loopRunner:function(){this.gameLoop();window.requestAnimationFrame(this.loopRunner)},update:function(){},updateLoadingScreen:function(){},
draw:function(a){if("2d"===this.contextType)a.font="14px sans-serif",a.fillText("This game does not have its own draw function!",10,50)},drawLoadingScreen:function(a){if(this.resourceManager&&"2d"===this.contextType)a.fillStyle=this.loadingBackground,a.fillRect(0,0,this.width,this.height),a.fillStyle=this.loadingForeground,a.strokeStyle=this.loadingForeground,a.font="bold "+Math.floor(this.height/12)+"px sans-serif",a.fillText("Loading... "+this.resourceManager.getPercentComplete()+"%",0.1*this.width,
0.55*this.height),a.strokeRect(0.1*this.width,0.7*this.height,0.8*this.width,0.1*this.height),a.fillRect(0.1*this.width,0.7*this.height,0.8*this.width*this.resourceManager.getPercentComplete()/100,0.1*this.height),a.lineWidth=4}})})},"dcl/dcl":function(){(function(a){"undefined"!=typeof define?define(["./mini"],a):"undefined"!=typeof module?module.exports=a(require("./mini")):dcl=a(dcl)})(function(a){function e(){}function h(a,f,h){var i=a||e,b=f||e,v=h||e,d=function(){var d;i.apply(this,arguments);
try{d=v.apply(this,arguments)}catch(c){d=c}b.call(this,arguments,d);if(d instanceof Error)throw d;return d};d.advices={b:a,a:f,f:h};return d}function i(f){return function(h,i){var e=h._m,b;e&&((b=+e.w[i]||0)&&b!=f&&a._e("set chaining",i,h,f,b),e.w[i]=f)}}var f=a(a.Super,{constructor:function(){this.b=this.f.before;this.a=this.f.after;this.f=this.f.around}});a.mix(a,{Advice:f,advise:function(a){return new f(a)},before:function(a){return new f({before:a})},after:function(a){return new f({after:a})},
around:a.superCall,chainBefore:i(1),chainAfter:i(2),isInstanceOf:function(a,f){if(a instanceof f)return!0;var h=a.constructor._m,i;if(h)for(h=h.b,i=h.length-1;0<=i;--i)if(h[i]===f)return!0;return!1},_sb:function(f,i,e,m){var m=m[e]=a._ec(i,e,"f"),b=a._ec(i,e,"b").reverse(),i=a._ec(i,e,"a"),m=f?a._st(m,1==f?function(b){return a._sc(b.reverse())}:a._sc,e):a._ss(m,e);return!b.length&&!i.length?m||function(){}:h(a._sc(b),a._sc(i),m)}});return a})},"dcl/mini":function(){(function(a){"undefined"!=typeof define?
define([],a):"undefined"!=typeof module?module.exports=a():dcl=a()})(function(){function a(c,b){var d=[0],j,g,u,w,n,e,l,v,p=0,D;if(c)if(c instanceof Array){w={};l=c.slice(0).reverse();for(v=l.length-1;0<=v;--v)if(g=l[v],g._u=g._u||i++,j=g._m){for(e=j.b,p=e.length-1;0<p;--p)D=e[p]._u,w[D]=(w[D]||0)+1;l[v]=e.slice(0)}else l[v]=[g];n={};a:for(;l.length;){for(v=0;v<l.length;++v)if(e=l[v],g=e[0],D=g._u,!w[D]){n[D]||(d.push(g),n[D]=1);e.shift();e.length?--w[e[0]._u]:l.splice(v,1);continue a}a._e("cycle",
b,l)}c=c[0];p=d.length-((w=c._m)&&c===d[d.length-(p=w.b.length)]?p:1)-1}else c._u=c._u||i++,d=d.concat((w=c._m)?w.b:c);j=c?a.delegate(c[q]):{};for(e=c&&(w=c._m)?a.delegate(w.w):{constructor:2};0<p;--p)if(g=d[p],w=g._m,m(j,w&&w.h||g[q]),w)for(D in l=w.w)e[D]=(+e[D]||0)|l[D];for(D in b)h(w=b[D])?e[D]=+e[D]||0:j[D]=w;n={b:d,h:b,w:e,c:{}};d[0]={_m:n,prototype:j};g=j;w=n.w;e=n.b;l=n.c;for(u in w)g[u]=a._sb(w[u],e,u,l);u=j[f];u._m=n;u[q]=j;d[0]=u;return a._p(u)}function e(c){this.f=c}function h(c){return c instanceof
e}var i=0,f="constructor",q="prototype",l=function(){},p={},m,b,v,d,g;(m=function(c,b){for(var d in b)c[d]=b[d]})(a,{mix:m,delegate:function(c){l[q]=c;c=new l;l[q]=null;return c},Super:e,superCall:function(c){return new e(c)},_p:function(c){return c},_e:function(c){throw Error("dcl: "+c);},_f:function(c,b){var d=c.f(b);d.ctr=c.ctr;return d},_ec:b=function(c,b,d){for(var j=c.length-1,g=[],a,f,e="f"==d;a=c[j];--j)if((f=a._m)?(f=f.h).hasOwnProperty(b)&&(h(f=f[b])?e?f.f:f=f[d]:e):e&&(f=a[q][b])&&f!==
p[b])f.ctr=a,g.push(f);return g},_sc:d=function(c){var b=c.length,d;return!b?0:1==b?(d=c[0],function(){d.apply(this,arguments)}):function(){for(var d=0;d<b;++d)c[d].apply(this,arguments)}},_ss:v=function(c,b){for(var d=0,j,g=p[b];j=c[d];++d)g=h(j)?c[d]=a._f(j,g,b):j;return b!=f?g:function(){g.apply(this,arguments)}},_st:g=function(c,b,d){for(var j=0,g,u,w=0;g=c[j];++j)h(g)&&(u=j-w,c[j]=a._f(g,!u?0:1==u?c[w]:b(c.slice(w,j)),d),w=j);u=j-w;return!u?0:1==u&&d!=f?c[w]:b(w?c.slice(w):c)},_sb:function(c,
a,k,j){a=j[k]=b(a,k,"f");return(c?g(a,d,k):v(a,k))||function(){}}});return a})},"dcl/bases/Mixer":function(){(function(a){"undefined"!=typeof define?define(["../mini"],a):"undefined"!=typeof module?module.exports=a(require("../mini")):dclBasesMixer=a(dcl)})(function(a){return a(null,{declaredClass:"dcl/bases/Mixer",constructor:function(e){a.mix(this,e)}})})},"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(a,e){e.add("bug-for-in-skips-shadowed",function(){for(var b in{toString:1})return 0;
return 1});var h=e("bug-for-in-skips-shadowed")?"hasOwnProperty.valueOf.isPrototypeOf.propertyIsEnumerable.toLocaleString.toString.constructor".split("."):[],i=h.length,f=function(b,f,d){var g,c=0,o=a.global;if(!d)if(b.length){g=b[c++];try{d=a.scopeMap[g]&&a.scopeMap[g][1]}catch(k){}d=d||(g in o?o[g]:f?o[g]={}:void 0)}else return o;for(;d&&(g=b[c++]);)d=g in d?d[g]:f?d[g]={}:void 0;return d},q=Object.prototype.toString,l=function(b,a,d){return(d||[]).concat(Array.prototype.slice.call(b,a||0))},p=
/\{([^\}]+)\}/g,m={_extraNames:h,_mixin:function(b,a,d){var g,c,f,k={};for(g in a)if(c=a[g],!(g in b)||b[g]!==c&&(!(g in k)||k[g]!==c))b[g]=d?d(c):c;if(e("bug-for-in-skips-shadowed")&&a)for(f=0;f<i;++f)if(g=h[f],c=a[g],!(g in b)||b[g]!==c&&(!(g in k)||k[g]!==c))b[g]=d?d(c):c;return b},mixin:function(b,a){b||(b={});for(var d=1,g=arguments.length;d<g;d++)m._mixin(b,arguments[d]);return b},setObject:function(b,a,d){var g=b.split("."),b=g.pop();return(d=f(g,!0,d))&&b?d[b]=a:void 0},getObject:function(b,
a,d){return f(b.split("."),a,d)},exists:function(b,a){return void 0!==m.getObject(b,!1,a)},isString:function(b){return"string"==typeof b||b instanceof String},isArray:function(b){return b&&(b instanceof Array||"array"==typeof b)},isFunction:function(b){return"[object Function]"===q.call(b)},isObject:function(b){return void 0!==b&&(null===b||"object"==typeof b||m.isArray(b)||m.isFunction(b))},isArrayLike:function(b){return b&&void 0!==b&&!m.isString(b)&&!m.isFunction(b)&&!(b.tagName&&"form"==b.tagName.toLowerCase())&&
(m.isArray(b)||isFinite(b.length))},isAlien:function(b){return b&&!m.isFunction(b)&&/\{\s*\[native code\]\s*\}/.test(""+b)},extend:function(b,a){for(var d=1,g=arguments.length;d<g;d++)m._mixin(b.prototype,arguments[d]);return b},_hitchArgs:function(b,f){var d=m._toArray(arguments,2),g=m.isString(f);return function(){var c=m._toArray(arguments),o=g?(b||a.global)[f]:f;return o&&o.apply(b||this,d.concat(c))}},hitch:function(b,f){if(2<arguments.length)return m._hitchArgs.apply(a,arguments);f||(f=b,b=
null);if(m.isString(f)){b=b||a.global;if(!b[f])throw['lang.hitch: scope["',f,'"] is null (scope="',b,'")'].join("");return function(){return b[f].apply(b,arguments||[])}}return!b?f:function(){return f.apply(b,arguments||[])}},delegate:function(){function b(){}return function(a,d){b.prototype=a;var g=new b;b.prototype=null;d&&m._mixin(g,d);return g}}(),_toArray:e("ie")?function(){function b(b,d,g){g=g||[];for(d=d||0;d<b.length;d++)g.push(b[d]);return g}return function(a){return(a.item?b:l).apply(this,
arguments)}}():l,partial:function(b){return m.hitch.apply(a,[null].concat(m._toArray(arguments)))},clone:function(b){if(!b||"object"!=typeof b||m.isFunction(b))return b;if(b.nodeType&&"cloneNode"in b)return b.cloneNode(!0);if(b instanceof Date)return new Date(b.getTime());if(b instanceof RegExp)return RegExp(b);var a,d,g;if(m.isArray(b)){a=[];for(d=0,g=b.length;d<g;++d)d in b&&a.push(m.clone(b[d]))}else a=b.constructor?new b.constructor:{};return m._mixin(a,b,m.clone)},trim:String.prototype.trim?
function(b){return b.trim()}:function(b){return b.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(b,a,d){return b.replace(d||p,m.isFunction(a)?a:function(b,c){return m.getObject(c,!1,a)})}};m.mixin(a,m);return m})},"dojo/_base/kernel":function(){define(["../has","./config","require","module"],function(a,e,h,i){var f,a={},q={},l={config:e,global:this,dijit:a,dojox:q},a={dojo:["dojo",l],dijit:["dijit",a],dojox:["dojox",q]},i=h.map&&h.map[i.id.match(/[^\/]+/)[0]];for(f in i)a[f]?a[f][0]=
i[f]:a[f]=[i[f],{}];for(f in a)i=a[f],i[1]._scopeName=i[0],e.noGlobals||(this[i[0]]=i[1]);l.scopeMap=a;l.baseUrl=l.config.baseUrl=h.baseUrl;l.isAsync=h.async;l.locale=e.locale;e="$Rev: 30226 $".match(/\d+/);l.version={major:1,minor:8,patch:3,flag:"",revision:e?+e[0]:NaN,toString:function(){var a=l.version;return a.major+"."+a.minor+"."+a.patch+a.flag+" ("+a.revision+")"}};Function("d","d.eval = function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(l);l.exit=function(){};
l.deprecated=l.experimental=function(){};l._hasResource={};return l})},"dojo/has":function(){define("dojo/has",["require","module"],function(a){var e=a.has||function(){};e.add("touch","ontouchstart"in document);e.add("device-width",screen.availWidth||innerWidth);a=document.createElement("form");e.add("dom-attributes-explicit",0==a.attributes.length);e.add("dom-attributes-specified-flag",0<a.attributes.length&&40>a.attributes.length);e.clearElement=function(a){a.innerHTML="";return a};e.normalize=
function(a,i){var f=a.match(/[\?:]|[^:\?]*/g),q=0,l=function(a){var h=f[q++];if(":"==h)return 0;if("?"==f[q++]){if(!a&&e(h))return l();l(!0);return l(a)}return h||0};return(a=l())&&i(a)};e.load=function(a,e,f){a?e([a],f):f()};return e})},"dojo/_base/config":function(){define(["../has","require"],function(a,e){var h={},i=e.rawConfig,f;for(f in i)h[f]=i[f];return h})},"dojo/sniff":function(){define("dojo/sniff",["./has"],function(a){var e=navigator,h=e.userAgent,e=e.appVersion,i=parseFloat(e);a.add("air",
0<=h.indexOf("AdobeAIR"));a.add("khtml",0<=e.indexOf("Konqueror")?i:void 0);a.add("webkit",parseFloat(h.split("WebKit/")[1])||void 0);a.add("chrome",parseFloat(h.split("Chrome/")[1])||void 0);a.add("safari",0<=e.indexOf("Safari")&&!a("chrome")?parseFloat(e.split("Version/")[1]):void 0);a.add("mac",0<=e.indexOf("Macintosh"));a.add("quirks","BackCompat"==document.compatMode);a.add("ios",/iPhone|iPod|iPad/.test(h));a.add("android",parseFloat(h.split("Android ")[1])||void 0);if(!a("webkit")){0<=h.indexOf("Opera")&&
a.add("opera",9.8<=i?parseFloat(h.split("Version/")[1])||i:i);0<=h.indexOf("Gecko")&&!a("khtml")&&!a("webkit")&&a.add("mozilla",i);a("mozilla")&&a.add("ff",parseFloat(h.split("Firefox/")[1]||h.split("Minefield/")[1])||void 0);if(document.all&&!a("opera"))h=parseFloat(e.split("MSIE ")[1])||void 0,(e=document.documentMode)&&5!=e&&Math.floor(h)!=e&&(h=e),a.add("ie",h);a.add("wii","undefined"!=typeof opera&&opera.wiiremote)}return a})},"dojo/dom":function(){define(["./sniff","./_base/window"],function(a,
e){if(7>=a("ie"))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(h){}var i={};i.byId=a("ie")?function(a,f){if("string"!=typeof a)return a;var h=f||e.doc,i=a&&h.getElementById(a);if(i&&(i.attributes.id.value==a||i.id==a))return i;h=h.all[a];if(!h||h.nodeName)h=[h];for(var b=0;i=h[b++];)if(i.attributes&&i.attributes.id&&i.attributes.id.value==a||i.id==a)return i}:function(a,f){return("string"==typeof a?(f||e.doc).getElementById(a):a)||null};i.isDescendant=function(a,f){try{a=i.byId(a);
for(f=i.byId(f);a;){if(a==f)return!0;a=a.parentNode}}catch(h){}return!1};a.add("css-user-select",function(a,f,h){if(!h)return!1;var a=h.style,f=["Khtml","O","ms","Moz","Webkit"],h=f.length,e="userSelect";do if("undefined"!==typeof a[e])return e;while(h--&&(e=f[h]+"UserSelect"));return!1});var f=a("css-user-select");i.setSelectable=f?function(a,h){i.byId(a).style[f]=h?"":"none"}:function(a,f){var a=i.byId(a),h=a.getElementsByTagName("*"),e=h.length;if(f)for(a.removeAttribute("unselectable");e--;)h[e].removeAttribute("unselectable");
else for(a.setAttribute("unselectable","on");e--;)h[e].setAttribute("unselectable","on")};return i})},"dojo/_base/window":function(){define(["./kernel","./lang","../sniff"],function(a,e,h){var i={global:a.global,doc:this.document||null,body:function(f){f=f||a.doc;return f.body||f.getElementsByTagName("body")[0]},setContext:function(f,h){a.global=i.global=f;a.doc=i.doc=h},withGlobal:function(f,h,e,p){var m=a.global;try{return a.global=i.global=f,i.withDoc.call(null,f.document,h,e,p)}finally{a.global=
i.global=m}},withDoc:function(f,e,l,p){var m=i.doc,b=h("quirks"),v=h("ie"),d,g,c;try{a.doc=i.doc=f;a.isQuirks=h.add("quirks","BackCompat"==a.doc.compatMode,!0,!0);if(h("ie")&&(c=f.parentWindow)&&c.navigator)d=parseFloat(c.navigator.appVersion.split("MSIE ")[1])||void 0,(g=f.documentMode)&&5!=g&&Math.floor(d)!=g&&(d=g),a.isIE=h.add("ie",d,!0,!0);l&&"string"==typeof e&&(e=l[e]);return e.apply(l,p||[])}finally{a.doc=i.doc=m,a.isQuirks=h.add("quirks",b,!0,!0),a.isIE=h.add("ie",v,!0,!0)}}};e.mixin(a,i);
return i})},"frozen/InputManager":function(){define("./GameAction,./MouseAction,dcl,dcl/bases/Mixer,dojo/on,dojo/dom-style,dojo/dom-geometry,dojo/_base/lang,dojo/domReady!".split(","),function(a,e,h,i,f,q,l,p){return h(i,{keyActions:[],mouseAction:null,touchAction:null,canvas:null,handleMouse:!0,handleTouch:!0,handleKeys:!0,gameArea:null,canvasPercentage:null,constructor:function(){this.handleKeys&&(f(document,"keydown",p.hitch(this,"keyDown")),f(document,"keyup",p.hitch(this,"keyReleased")));this.handleMouse&&
(f(this.canvas,"mousedown",p.hitch(this,"mouseDown")),f(document,"mousemove",p.hitch(this,"mouseMove")),f(document,"mouseup",p.hitch(this,"mouseUp")));this.handleTouch&&(f(this.canvas,"touchstart",p.hitch(this,"touchStart")),f(document,"touchmove",p.hitch(this,"touchMove")),f(document,"touchend",p.hitch(this,"touchEnd")));if(!this.mouseAction)this.mouseAction=new e;if(!this.touchAction)this.touchAction=new e;this.gameArea&&this.canvasPercentage&&(f(window,"resize",p.hitch(this,"resize")),f(window,
"orientationchange",p.hitch(this,"resize")))},mapToKey:function(a,b){if(!this.keyActions)this.keyActions=[];this.keyActions[b]=a},addKeyAction:function(f,b){var h=new a;if(b)h.behavior=h.statics.DETECT_INITAL_PRESS_ONLY;this.mapToKey(h,f);return h},setMouseAction:function(a){this.mouseAction=a},setTouchAction:function(a){this.touchAction=a},mouseUp:function(a){this.mouseAction.release();this.mouseAction.endPosition=this.getMouseLoc(a)},mouseDown:function(a){this.mouseAction.press();this.mouseAction.startPosition=
this.getMouseLoc(a);this.mouseAction.position=this.mouseAction.startPosition},mouseMove:function(a){this.mouseAction.position=this.getMouseLoc(a)},touchStart:function(a){this.touchAction.press();this.touchAction.startPosition=this.getMouseLoc(a.changedTouches[0]);this.touchAction.position=this.touchAction.startPosition},touchEnd:function(a){this.touchAction.release();this.mouseAction.endPosition=this.getMouseLoc(a)},touchMove:function(a){this.touchAction.position=this.getMouseLoc(a.changedTouches[0]);
a.preventDefault()},getKeyAction:function(a){return this.keyActions.length?this.keyActions[a.keyCode]||this.keyActions[String.fromCharCode(a.keyCode)]:null},keyPressed:function(a){(a=this.getKeyAction(a))&&!a.isPressed()&&a.press()},keyDown:function(a){(a=this.getKeyAction(a))&&!a.isPressed()&&a.press()},keyReleased:function(a){(a=this.getKeyAction(a))&&a.release()},getMouseLoc:function(a){var b=l.position(this.canvas);return this.zoomRatio?{x:Math.round((a.clientX-b.x)/this.zoomRatio),y:Math.round((a.clientY-
b.y)/this.zoomRatio)}:{x:Math.round(a.clientX-b.x),y:Math.round(a.clientY-b.y)}},resize:function(){if(this.gameArea&&this.canvasPercentage&&this.canvas){var a=this.canvas.width,b=this.canvas.height,f=l.getMarginExtents(document.body),d=window.innerWidth-f.w,f=window.innerHeight-f.h,b=a/b,g="",c="";d/f>b?(d=f*b,g=d+"px"):c=Math.round(d/b)+"px";this.zoomRatio=d/a*this.canvasPercentage;q.set(this.gameArea,{width:g,height:c});a=Math.floor(100*this.canvasPercentage)+"%";q.set(this.canvas,{width:a,height:a,
display:"block",marginLeft:"auto",marginRight:"auto"})}}})})},"frozen/GameAction":function(){define(["dcl","dcl/bases/Mixer"],function(a,e){return a(e,{name:null,behavior:0,amount:0,state:0,statics:{NORMAL:0,DETECT_INITAL_PRESS_ONLY:1,STATE_RELEASED:0,STATE_PRESSED:1,STATE_WAITING_FOR_RELEASE:2,STATE_MOVED:3},constructor:function(){this.reset()},getName:function(){return this.name},reset:function(){this.state=this.statics.STATE_RELEASED;this.amount=0},tap:function(){this.press();this.release()},press:function(){this.state=
this.statics.STATE_PRESSED;this.behavior===this.statics.DETECT_INITAL_PRESS_ONLY&&this.pressAmt(1)},pressAmt:function(a){if(this.state!==this.statics.STATE_WAITING_FOR_RELEASE)this.amount+=a,this.state=this.statics.STATE_WAITING_FOR_RELEASE},release:function(){this.state=this.statics.STATE_RELEASED},isPressed:function(){return this.state===this.statics.STATE_PRESSED?!0:!1},getAmount:function(){var a=this.amount;if(0!==a)if(this.state===this.statics.STATE_RELEASED)this.amount=0;else if(this.behavior===
this.statics.DETECT_INITAL_PRESS_ONLY)this.state=this.statics.STATE_WAITING_FOR_RELEASE,this.amount=0;return a}})})},"frozen/MouseAction":function(){define(["dcl","dcl/bases/Mixer","./GameAction"],function(a,e,h){return a([e,h],{startPosition:null,endPosition:null,position:null})})},"dojo/on":function(){define("dojo/on",["require","./_base/kernel","./has"],function(a,e,h){function i(c,b,d,a,f){if(a=b.match(/(.*):(.*)/))return b=a[2],a=a[1],l.selector(a,b).call(f,c,d);h("touch")&&(p.test(b)&&(d=k(d)),
!h("event-orientationchange")&&"orientationchange"==b&&(b="resize",c=window,d=k(d)));g&&(d=g(d));if(c.addEventListener){var o=b in v,e=o?v[b]:b;c.addEventListener(e,d,o);return{remove:function(){c.removeEventListener(e,d,o)}}}b="on"+b;throw Error("Target must be an event emitter");}function f(){this.cancelable=!1}function q(){this.bubbles=!1}a=window.ScriptEngineMajorVersion;h.add("jscript",a&&a()+ScriptEngineMinorVersion()/10);h.add("event-orientationchange",h("touch")&&!h("android"));h.add("event-stopimmediatepropagation",
window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation);var l=function(c,b,d,a){return"function"==typeof c.on&&"function"!=typeof b?c.on(b,d):l.parse(c,b,d,i,a,this)};l.pausable=function(c,b,d,a){var g,c=l(c,b,function(){if(!g)return d.apply(this,arguments)},a);c.pause=function(){g=!0};c.resume=function(){g=!1};return c};l.once=function(c,b,d){var a=l(c,b,function(){a.remove();return d.apply(this,arguments)});return a};l.parse=function(c,b,d,a,g,f){if(b.call)return b.call(f,
c,d);if(-1<b.indexOf(",")){for(var b=b.split(/\s*,\s*/),k=[],o=0,h;h=b[o++];)k.push(a(c,h,d,g,f));k.remove=function(){for(var c=0;c<k.length;c++)k[c].remove()};return k}return a(c,b,d,g,f)};var p=/^touch/;l.selector=function(c,b,d){return function(a,g){function f(b){for(k=k&&k.matches?k:e.query;!k.matches(b,c,a);)if(b==a||!1===d||!(b=b.parentNode)||1!=b.nodeType)return;return b}var k="function"==typeof c?{matches:c}:this,o=b.bubble;return o?l(a,o(f),g):l(a,b,function(c){var b=f(c.target);return b&&
g.call(b,c)})}};var m=[].slice,b=l.emit=function(c,b,d){var a=m.call(arguments,2),g="on"+b;if("parentNode"in c){var k=a[0]={},o;for(o in d)k[o]=d[o];k.preventDefault=f;k.stopPropagation=q;k.target=c;k.type=b;d=k}do c[g]&&c[g].apply(c,a);while(d&&d.bubbles&&(c=c.parentNode));return d&&d.cancelable&&d},v={};if(!h("event-stopimmediatepropagation"))var d=function(){this.modified=this.immediatelyStopped=!0},g=function(c){return function(b){if(!b.immediatelyStopped)return b.stopImmediatePropagation=d,c.apply(this,
arguments)}};v={focusin:"focus",focusout:"blur"};l.emit=function(c,d,a){if(c.dispatchEvent&&document.createEvent){var g=c.ownerDocument.createEvent("HTMLEvents");g.initEvent(d,!!a.bubbles,!!a.cancelable);for(var f in a)f in g||(g[f]=a[f]);return c.dispatchEvent(g)&&g}return b.apply(l,arguments)};if(h("touch"))var c=function(){},o=window.orientation,k=function(b){return function(d){var a=d.corrected;if(!a){var g=d.type;try{delete d.type}catch(f){}d.type?(c.prototype=d,a=new c,a.preventDefault=function(){d.preventDefault()},
a.stopPropagation=function(){d.stopPropagation()}):(a=d,a.type=g);d.corrected=a;if("resize"==g){if(o==window.orientation)return null;o=window.orientation;a.type="orientationchange";return b.call(this,a)}if(!("rotation"in a))a.rotation=0,a.scale=1;var g=a.changedTouches[0],k;for(k in g)delete a[k],a[k]=g[k]}return b.call(this,a)}};return l})},"dojo/dom-style":function(){define(["./sniff","./dom"],function(a,e){function h(c,d,g){d=d.toLowerCase();if(a("ie")){if("auto"==g){if("height"==d)return c.offsetHeight;
if("width"==d)return c.offsetWidth}if("fontweight"==d)switch(g){case 700:return"bold";default:return"normal"}}d in b||(b[d]=v.test(d));return b[d]?q(c,g):g}var i,f={};i=a("webkit")?function(c){var b;if(1==c.nodeType){var d=c.ownerDocument.defaultView;b=d.getComputedStyle(c,null);if(!b&&c.style)c.style.display="",b=d.getComputedStyle(c,null)}return b||{}}:a("ie")&&(9>a("ie")||a("quirks"))?function(c){return 1==c.nodeType&&c.currentStyle?c.currentStyle:{}}:function(c){return 1==c.nodeType?c.ownerDocument.defaultView.getComputedStyle(c,
null):{}};f.getComputedStyle=i;var q;q=a("ie")?function(c,b){if(!b)return 0;if("medium"==b)return 4;if(b.slice&&"px"==b.slice(-2))return parseFloat(b);var d=c.style,a=c.runtimeStyle,g=d.left,f=a.left;a.left=c.currentStyle.left;try{d.left=b,b=d.pixelLeft}catch(h){b=0}d.left=g;a.left=f;return b}:function(c,b){return parseFloat(b)||0};f.toPixelValue=q;var l=function(c,b){try{return c.filters.item("DXImageTransform.Microsoft.Alpha")}catch(d){return b?{}:null}},p=9>a("ie")||10>a("ie")&&a("quirks")?function(c){try{return l(c).Opacity/
100}catch(b){return 1}}:function(c){return i(c).opacity},m=9>a("ie")||10>a("ie")&&a("quirks")?function(c,b){var d=100*b,a=1==b;c.style.zoom=a?"":1;if(l(c))l(c,1).Opacity=d;else{if(a)return b;c.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity="+d+")"}l(c,1).Enabled=!a;if("tr"==c.tagName.toLowerCase())for(d=c.firstChild;d;d=d.nextSibling)"td"==d.tagName.toLowerCase()&&m(d,b);return b}:function(c,b){return c.style.opacity=b},b={left:!0,top:!0},v=/margin|padding|width|height|max|min|offset/,
d=a("ie")?"styleFloat":"cssFloat",g={cssFloat:d,styleFloat:d,"float":d};f.get=function(c,b){var d=e.byId(c),a=arguments.length;if(2==a&&"opacity"==b)return p(d);var b=g[b]||b,i=f.getComputedStyle(d);return 1==a?i:h(d,b,i[b]||d.style[b])};f.set=function(c,b,d){var a=e.byId(c),h=arguments.length,i="opacity"==b,b=g[b]||b;if(3==h)return i?m(a,d):a.style[b]=d;for(var w in b)f.set(c,w,b[w]);return f.getComputedStyle(a)};return f})},"dojo/dom-geometry":function(){define(["./sniff","./_base/window","./dom",
"./dom-style"],function(a,e,h,i){function f(b,a,d,g,c,f){f=f||"px";b=b.style;if(!isNaN(a))b.left=a+f;if(!isNaN(d))b.top=d+f;if(0<=g)b.width=g+f;if(0<=c)b.height=c+f}function q(b){return"button"==b.tagName.toLowerCase()||"input"==b.tagName.toLowerCase()&&"button"==(b.getAttribute("type")||"").toLowerCase()}function l(b){return"border-box"==p.boxModel||"table"==b.tagName.toLowerCase()||q(b)}var p={boxModel:"content-box"};if(a("ie"))p.boxModel="BackCompat"==document.compatMode?"border-box":"content-box";
p.getPadExtents=function(b,a){var b=h.byId(b),d=a||i.getComputedStyle(b),g=i.toPixelValue,c=g(b,d.paddingLeft),f=g(b,d.paddingTop),k=g(b,d.paddingRight),d=g(b,d.paddingBottom);return{l:c,t:f,r:k,b:d,w:c+k,h:f+d}};p.getBorderExtents=function(b,a){var b=h.byId(b),d=i.toPixelValue,g=a||i.getComputedStyle(b),c="none"!=g.borderLeftStyle?d(b,g.borderLeftWidth):0,f="none"!=g.borderTopStyle?d(b,g.borderTopWidth):0,k="none"!=g.borderRightStyle?d(b,g.borderRightWidth):0,d="none"!=g.borderBottomStyle?d(b,g.borderBottomWidth):
0;return{l:c,t:f,r:k,b:d,w:c+k,h:f+d}};p.getPadBorderExtents=function(b,a){var b=h.byId(b),d=a||i.getComputedStyle(b),g=p.getPadExtents(b,d),d=p.getBorderExtents(b,d);return{l:g.l+d.l,t:g.t+d.t,r:g.r+d.r,b:g.b+d.b,w:g.w+d.w,h:g.h+d.h}};p.getMarginExtents=function(b,a){var b=h.byId(b),d=a||i.getComputedStyle(b),g=i.toPixelValue,c=g(b,d.marginLeft),f=g(b,d.marginTop),k=g(b,d.marginRight),d=g(b,d.marginBottom);return{l:c,t:f,r:k,b:d,w:c+k,h:f+d}};p.getMarginBox=function(b,f){var b=h.byId(b),d=f||i.getComputedStyle(b),
g=p.getMarginExtents(b,d),c=b.offsetLeft-g.l,e=b.offsetTop-g.t,k=b.parentNode,j=i.toPixelValue;if(a("mozilla")){var r=parseFloat(d.left),d=parseFloat(d.top);!isNaN(r)&&!isNaN(d)?(c=r,e=d):k&&k.style&&(k=i.getComputedStyle(k),"visible"!=k.overflow&&(c+="none"!=k.borderLeftStyle?j(b,k.borderLeftWidth):0,e+="none"!=k.borderTopStyle?j(b,k.borderTopWidth):0))}else if((a("opera")||8==a("ie")&&!a("quirks"))&&k)k=i.getComputedStyle(k),c-="none"!=k.borderLeftStyle?j(b,k.borderLeftWidth):0,e-="none"!=k.borderTopStyle?
j(b,k.borderTopWidth):0;return{l:c,t:e,w:b.offsetWidth+g.w,h:b.offsetHeight+g.h}};p.getContentBox=function(b,f){var b=h.byId(b),d=f||i.getComputedStyle(b),g=b.clientWidth,c=p.getPadExtents(b,d),e=p.getBorderExtents(b,d);g?(d=b.clientHeight,e.w=e.h=0):(g=b.offsetWidth,d=b.offsetHeight);a("opera")&&(c.l+=e.l,c.t+=e.t);return{l:c.l,t:c.t,w:g-c.w-e.w,h:d-c.h-e.h}};p.setContentSize=function(b,a,d){var b=h.byId(b),g=a.w,a=a.h;l(b)&&(d=p.getPadBorderExtents(b,d),0<=g&&(g+=d.w),0<=a&&(a+=d.h));f(b,NaN,NaN,
g,a)};var m={l:0,t:0,w:0,h:0};p.setMarginBox=function(b,e,d){var b=h.byId(b),g=d||i.getComputedStyle(b),d=e.w,c=e.h,o=l(b)?m:p.getPadBorderExtents(b,g),g=p.getMarginExtents(b,g);if(a("webkit")&&q(b)){var k=b.style;if(0<=d&&!k.width)k.width="4px";if(0<=c&&!k.height)k.height="4px"}0<=d&&(d=Math.max(d-o.w-g.w,0));0<=c&&(c=Math.max(c-o.h-g.h,0));f(b,e.l,e.t,d,c)};p.isBodyLtr=function(b){b=b||e.doc;return"ltr"==(e.body(b).dir||b.documentElement.dir||"ltr").toLowerCase()};p.docScroll=function(b){var b=
b||e.doc,f=e.doc.parentWindow||e.doc.defaultView;return"pageXOffset"in f?{x:f.pageXOffset,y:f.pageYOffset}:(f=a("quirks")?e.body(b):b.documentElement)&&{x:p.fixIeBiDiScrollLeft(f.scrollLeft||0,b),y:f.scrollTop||0}};if(a("ie"))p.getIeDocumentElementOffset=function(b){b=b||e.doc;b=b.documentElement;if(8>a("ie")){var f=b.getBoundingClientRect(),d=f.left,f=f.top;7>a("ie")&&(d+=b.clientLeft,f+=b.clientTop);return{x:0>d?0:d,y:0>f?0:f}}return{x:0,y:0}};p.fixIeBiDiScrollLeft=function(b,f){var f=f||e.doc,
d=a("ie");if(d&&!p.isBodyLtr(f)){var g=a("quirks"),c=g?e.body(f):f.documentElement,h=e.global;6==d&&!g&&h.frameElement&&c.scrollHeight>c.clientHeight&&(b+=c.clientLeft);return 8>d||g?b+c.clientWidth-c.scrollWidth:-b}return b};p.position=function(b,f){var b=h.byId(b),d=e.body(b.ownerDocument),g=b.getBoundingClientRect(),g={x:g.left,y:g.top,w:g.right-g.left,h:g.bottom-g.top};if(9>a("ie")){var c=p.getIeDocumentElementOffset(b.ownerDocument);g.x-=c.x+(a("quirks")?d.clientLeft+d.offsetLeft:0);g.y-=c.y+
(a("quirks")?d.clientTop+d.offsetTop:0)}f&&(d=p.docScroll(b.ownerDocument),g.x+=d.x,g.y+=d.y);return g};p.getMarginSize=function(b,a){var b=h.byId(b),d=p.getMarginExtents(b,a||i.getComputedStyle(b)),g=b.getBoundingClientRect();return{w:g.right-g.left+d.w,h:g.bottom-g.top+d.h}};p.normalizeEvent=function(b){if(!("layerX"in b))b.layerX=b.offsetX,b.layerY=b.offsetY};return p})},"dojo/domReady":function(){define(["./has"],function(){function a(b){q?b(h):l.push(b)}var e=this,h=document,i={loaded:1,complete:1},
f="string"!=typeof h.readyState,q=!!i[h.readyState];if(f)h.readyState="loading";if(!q){var l=[],p=[],m=function(b){b=b||e.event;if(!(q||"readystatechange"==b.type&&!i[h.readyState])){q=1;if(f)h.readyState="complete";for(;l.length;)l.shift()(h)}},b=function(b,a){b.addEventListener(a,m,!1);l.push(function(){b.removeEventListener(a,m,!1)})};b(h,"DOMContentLoaded");b(e,"load");"onreadystatechange"in h?b(h,"readystatechange"):f||p.push(function(){return i[h.readyState]});if(p.length){var v=function(){if(!q){for(var b=
p.length;b--;)if(p[b]()){m("poller");return}setTimeout(v,30)}};v()}}a.load=function(b,g,c){a(c)};return a})},"frozen/ResourceManager":function(){define(["dcl","dcl/bases/Mixer","./shims/AudioContext"],function(a,e){function h(a,e){var h=e;a&&(h=[a,e].join("/"));return h.replace(/\/{2,}/g,"/")}var i=null;window.AudioContext&&(i=new window.AudioContext);return a(e,{imageCount:0,loadedImages:0,allLoaded:!1,imageDir:null,soundDir:null,audioContext:i,resourceList:{},loadImage:function(a){a=h(this.imageDir,
a);if(this.resourceList[a])return this.resourceList[a].img;this.allLoaded=!1;var e=new Image,i={name:a,img:e,complete:!1};e.onload=function(){i.complete=!0};e.src=a;this.resourceList[a]=i;return e},loadSound:function(a){var a=h(this.soundDir,a),e={name:a,buffer:null,complete:!1};if(this.audioContext){if(this.resourceList[a])return this.resourceList[a];this.resourceList[a]=e;var i=new XMLHttpRequest;i.open("GET",a,!0);i.responseType="arraybuffer";var p=this.audioContext;i.onload=function(){p.decodeAudioData(i.response,
function(a){e.buffer=a;e.complete=!0},function(){})};i.send()}return e},playSound:function(a,e,h,i){h=h||0;if(this.audioContext&&a&&(a=a.buffer||a))try{var m=this.audioContext.createBufferSource();m.buffer=a;if(e)m.loop=!0;if(i){var b=this.audioContext.createGainNode();b.gain.value=i;m.connect(b);b.connect(this.audioContext.destination)}else m.connect(this.audioContext.destination);m.noteOn(h);return m}catch(v){}},resourcesReady:function(){if(!this.allLoaded){for(var a in this.resourceList)if(!this.resourceList[a].complete)return!1;
this.allLoaded=!0}return!0},getPercentComplete:function(){var a=0,e=0,h;for(h in this.resourceList){var i=this.resourceList[h];e++;i.complete&&(a+=1)}return 0===e?0:Math.round(100*(a/e))}})})},"frozen/shims/AudioContext":function(){define(function(){for(var a=["ms","moz","webkit","o"],e=0;e<a.length&&!window.AudioContext;++e)window.AudioContext=window[a[e]+"AudioContext"]})},"frozen/shims/RAF":function(){define(function(){for(var a=0,e=["ms","moz","webkit","o"],h=0;h<e.length&&!window.requestAnimationFrame;++h)window.requestAnimationFrame=
window[e[h]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[h]+"CancelAnimationFrame"]||window[e[h]+"CancelRequestAnimationFrame"];if(!window.requestAnimationFrame)window.requestAnimationFrame=function(e){var f=(new Date).getTime(),h=Math.max(0,16-(f-a)),l=window.setTimeout(function(){e(f+h)},h);a=f+h;return l};if(!window.cancelAnimationFrame)window.cancelAnimationFrame=function(a){clearTimeout(a)}})},"dojo/keys":function(){define(["./_base/kernel","./sniff"],function(a,e){return a.keys=
{BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:e("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,
NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:e("mac")&&!e("air")?e("safari")?91:224:17}})},"dojo/_base/declare":function(){define(["./kernel","../has","./lang"],function(a,e,h){function i(c,b){throw Error("declare"+(b?" "+b:"")+": "+c);}function f(c,b,a){var d,g,j,f,e,k,h,r=this._inherited=this._inherited||{};"string"==typeof c&&
(d=c,c=b,b=a);a=0;f=c.callee;(d=d||f.nom)||i("can't deduce a name to call inherited()",this.declaredClass);e=this.constructor._meta;j=e.bases;h=r.p;if(d!=F){if(r.c!==f&&(h=0,k=j[0],e=k._meta,e.hidden[d]!==f)){(g=e.chains)&&"string"==typeof g[d]&&i("calling chained method with inherited: "+d,this.declaredClass);do if(e=k._meta,g=k.prototype,e&&(g[d]===f&&g.hasOwnProperty(d)||e.hidden[d]===f))break;while(k=j[++h]);h=k?h:-1}if(k=j[++h])if(g=k.prototype,k._meta&&g.hasOwnProperty(d))a=g[d];else{f=w[d];
do if(g=k.prototype,(a=g[d])&&(k._meta?g.hasOwnProperty(d):a!==f))break;while(k=j[++h])}a=k&&a||w[d]}else{if(r.c!==f&&(h=0,(e=j[0]._meta)&&e.ctor!==f)){g=e.chains;for((!g||"manual"!==g.constructor)&&i("calling chained constructor with inherited",this.declaredClass);(k=j[++h])&&!((e=k._meta)&&e.ctor===f););h=k?h:-1}for(;(k=j[++h])&&!(a=(e=k._meta)?e.ctor:k););a=k&&a}r.c=a;r.p=h;if(a)return!0===b?a:a.apply(this,b||c)}function q(c,b){return"string"==typeof c?this.__inherited(c,b,!0):this.__inherited(c,
!0)}function l(c,b,d){var a=this.getInherited(c,b);if(a)return a.apply(this,d||b||c)}function p(c){for(var b=this.constructor._meta.bases,d=0,a=b.length;d<a;++d)if(b[d]===c)return!0;return this instanceof c}function m(c,b){for(var d in b)d!=F&&b.hasOwnProperty(d)&&(c[d]=b[d]);if(e("bug-for-in-skips-shadowed"))for(var a=h._extraNames,g=a.length;g;)d=a[--g],d!=F&&b.hasOwnProperty(d)&&(c[d]=b[d])}function b(c){r.safeMixin(this.prototype,c);return this}function v(c){return r([this].concat(c))}function d(c,
b){return function(){var s;var d=arguments,a=d,g=d[0],f,k;k=c.length;var e;if(!(this instanceof d.callee))return j(d);if(b&&(g&&g.preamble||this.preamble)){e=Array(c.length);e[0]=d;for(f=0;;){if(g=d[0])(g=g.preamble)&&(d=g.apply(this,d)||d);g=c[f].prototype;(g=g.hasOwnProperty("preamble")&&g.preamble)&&(d=g.apply(this,d)||d);if(++f==k)break;e[f]=d}}for(f=k-1;0<=f;--f)g=c[f],(s=(k=g._meta)?k.ctor:g,g=s)&&g.apply(this,e?e[f]:d);(g=this.postscript)&&g.apply(this,a)}}function g(c,b){return function(){var d=
arguments,a=d,g=d[0];if(!(this instanceof d.callee))return j(d);if(b){if(g)(g=g.preamble)&&(a=g.apply(this,a)||a);(g=this.preamble)&&g.apply(this,a)}c&&c.apply(this,d);(g=this.postscript)&&g.apply(this,d)}}function c(c){return function(){var s;var b=arguments,d=0,a,g;if(!(this instanceof b.callee))return j(b);for(;a=c[d];++d)if(s=(g=a._meta)?g.ctor:a,a=s){a.apply(this,b);break}(a=this.postscript)&&a.apply(this,b)}}function o(c,b,d){return function(){var a,g,f=0,j=1;d&&(f=b.length-1,j=-1);for(;a=b[f];f+=
j)g=a._meta,(a=(g?g.hidden:a.prototype)[c])&&a.apply(this,arguments)}}function k(c){x.prototype=c.prototype;c=new x;x.prototype=null;return c}function j(c){var b=c.callee,d=k(b);b.apply(d,c);return d}function r(a,j,e){"string"!=typeof a&&(e=j,j=a,a="");var e=e||{},l,x,B,t,A,y,C,s=1,M=j;if("[object Array]"==n.call(j)){s=a;B=[];t=[{cls:0,refs:[]}];y={};for(var z=1,K=j.length,I=0,G,Q,E,J;I<K;++I){(G=j[I])?"[object Function]"!=n.call(G)&&i("mixin #"+I+" is not a callable constructor.",s):i("mixin #"+
I+" is unknown. Did you use dojo.require to pull it in?",s);Q=G._meta?G._meta.bases:[G];E=0;for(G=Q.length-1;0<=G;--G){J=Q[G].prototype;if(!J.hasOwnProperty("declaredClass"))J.declaredClass="uniqName_"+H++;J=J.declaredClass;y.hasOwnProperty(J)||(y[J]={count:0,refs:[],cls:Q[G]},++z);J=y[J];E&&E!==J&&(J.refs.push(E),++E.count);E=J}++E.count;t[0].refs.push(E)}for(;t.length;){E=t.pop();B.push(E.cls);for(--z;x=E.refs,1==x.length;){E=x[0];if(!E||--E.count){E=0;break}B.push(E.cls);--z}if(E)for(I=0,K=x.length;I<
K;++I)E=x[I],--E.count||t.push(E)}z&&i("can't build consistent linearization",s);G=j[0];B[0]=G?G._meta&&G===B[B.length-G._meta.bases.length]?G._meta.bases.length:1:0;y=B;B=y[0];s=y.length-B;j=y[s]}else y=[0],j?"[object Function]"==n.call(j)?(B=j._meta,y=y.concat(B?B.bases:j)):i("base class is not a callable constructor.",a):null!==j&&i("unknown base class. Did you use dojo.require to pull it in?",a);if(j)for(x=s-1;;--x){l=k(j);if(!x)break;B=y[x];(B._meta?m:u)(l,B.prototype);t=new Function;t.superclass=
j;t.prototype=l;j=l.constructor=t}else l={};r.safeMixin(l,e);B=e.constructor;if(B!==w.constructor)B.nom=F,l.constructor=B;for(x=s-1;x;--x)(B=y[x]._meta)&&B.chains&&(C=u(C||{},B.chains));l["-chains-"]&&(C=u(C||{},l["-chains-"]));B=!C||!C.hasOwnProperty(F);y[0]=t=C&&"manual"===C.constructor?c(y):1==y.length?g(e.constructor,B):d(y,B);t._meta={bases:y,hidden:e,chains:C,parents:M,ctor:e.constructor};t.superclass=j&&j.prototype;t.extend=b;t.createSubclass=v;t.prototype=l;l.constructor=t;l.getInherited=
q;l.isInstanceOf=p;l.inherited=L;l.__inherited=f;if(a)l.declaredClass=a,h.setObject(a,t);if(C)for(A in C)if(l[A]&&"string"==typeof C[A]&&A!=F)B=l[A]=o(A,y,"after"===C[A]),B.nom=A;return t}var u=h.mixin,w=Object.prototype,n=w.toString,x=new Function,H=0,F="constructor",L=a.config.isDebug?l:f;a.safeMixin=r.safeMixin=function(c,b){var d,a;for(d in b)if(a=b[d],(a!==w[d]||!(d in w))&&d!=F){if("[object Function]"==n.call(a))a.nom=d;c[d]=a}if(e("bug-for-in-skips-shadowed"))for(var g=h._extraNames,j=g.length;j;)if(d=
g[--j],a=b[d],(a!==w[d]||!(d in w))&&d!=F){if("[object Function]"==n.call(a))a.nom=d;c[d]=a}return c};return a.declare=r})},"frozen/Animation":function(){define(["./AnimFrame","dcl","dcl/bases/Mixer","dojo/_base/lang"],function(a,e,h,i){var f=e(h,{currFrameIndex:0,animTime:0,totalDuration:0,height:64,width:64,image:null,constructor:function(){this.start()},createFromTile:function(a,f,e,h,b,i){return this.createFromSheet(a,f,e,b,h,i)},createFromSheet:function(a,e,h,m,b,v){h=new f({image:h,height:b,
width:m});m=i.isArray(e);b=1;v||(v=0);for(var d=0;d<a;d++)b=m?e[d]:e,h.addFrame(b,d,v);return h},clone:function(){return new f({image:this.image,frames:this.frames,totalDuration:this.totalDuration})},addFrame:function(f,e,h){if(!this.frames)this.frames=[];this.totalDuration+=f;this.frames.push(new a({endTime:this.totalDuration,image:this.image,imgSlotX:e,imgSlotY:h}))},start:function(){this.currFrameIndex=this.animTime=0},update:function(a){if(1<this.frames.length){this.animTime+=a;if(this.animTime>=
this.totalDuration)this.animTime%=this.totalDuration,this.currFrameIndex=0;for(;this.animTime>this.getFrame(this.currFrameIndex).endTime;)this.currFrameIndex++}},getImage:function(){return this.image},getFrame:function(a){return this.frames[a]},getCurrentFrame:function(){return 0===this.frames.length?null:this.getFrame(this.currFrameIndex)},draw:function(a,f,e){var h=this.getCurrentFrame();a.drawImage(this.image,h.imgSlotX*this.width,h.imgSlotY*this.height,this.width,this.height,f,e,this.width,this.height)}});
return f})},"frozen/AnimFrame":function(){define(["dcl","dcl/bases/Mixer"],function(a,e){return a(e,{endTime:0,imgSlotX:0,imgSlotY:0,image:null})})},"frozen/box2d/Box":function(){define(["dcl","dcl/bases/Mixer","dojo/_base/lang"],function(a,e,h){var i=Box2D.Common.Math.b2Vec2,f=Box2D.Dynamics.b2BodyDef,q=Box2D.Dynamics.b2Body,l=Box2D.Dynamics.b2FixtureDef,p=Box2D.Dynamics.b2World,m=Box2D.Collision.Shapes.b2PolygonShape,b=Box2D.Collision.Shapes.b2CircleShape,v=Box2D.Dynamics.Joints.b2RevoluteJointDef;
return a(e,{intervalRate:60,adaptive:!1,bodiesMap:[],fixturesMap:[],world:null,gravityX:0,gravityY:10,allowSleep:!0,resolveCollisions:!1,contactListener:null,collisions:null,constructor:function(b){if(b&&b.intervalRate)this.intervalRate=parseInt(b.intervalRate,10);this.world=new p(new i(this.gravityX,this.gravityY),this.allowSleep);this.resolveCollisions&&this.addContactListener(this.contactListener||this)},update:function(b){if(this.resolveCollisions)this.collisions={};var a=Date.now();b?this.world.Step(b/
1E3,10,10):this.world.Step(this.adaptive?(a-this.lastTimestamp)/1E3:1/this.intervalRate,10,10);this.world.ClearForces();return Date.now()-a},getState:function(){for(var b={},a=this.world.GetBodyList();a;a=a.m_next)if(a.IsActive()&&"undefined"!==typeof a.GetUserData()&&null!==a.GetUserData()&&(b[a.GetUserData()]={x:a.GetPosition().x,y:a.GetPosition().y,angle:a.GetAngle(),center:{x:a.GetWorldCenter().x,y:a.GetWorldCenter().y},linearVelocity:a.m_linearVelocity,angularVelocity:a.m_angularVelocity},this.resolveCollisions))b[a.GetUserData()].collisions=
this.collisions[a.GetUserData()]||null;return b},updateExternalState:function(b){var a=this.getState(),c;for(c in a){var f=b[c];f&&!f.staticBody&&f.update(a[c])}},setBodies:function(b){for(var a in b)this.addBody(b[a]);this.ready=!0},addBody:function(a){var g=new f,c=new l,e,k,j,h;c.restitution=a.restitution;c.density=a.density;c.friction=a.friction;g.type=a.staticBody?q.b2_staticBody:q.b2_dynamicBody;g.position.x=a.x;g.position.y=a.y;g.userData=a.id;g.angle=a.angle;g.linearDamping=a.linearDamping;
g.angularDamping=a.angularDamping;var u=this.world.CreateBody(g);if(a.radius)c.shape=new b(a.radius),u.CreateFixture(c);else if(a.points){k=[];for(g=0;g<a.points.length;g++)j=new i,j.Set(a.points[g].x,a.points[g].y),k[g]=j;c.shape=new m;c.shape.SetAsArray(k,k.length);u.CreateFixture(c)}else if(a.polys)for(e=0;e<a.polys.length;e++){k=a.polys[e];h=[];for(g=0;g<k.length;g++)j=new i,j.Set(k[g].x,k[g].y),h[g]=j;c.shape=new m;c.shape.SetAsArray(h,h.length);u.CreateFixture(c)}else c.shape=new m,c.shape.SetAsBox(a.halfWidth,
a.halfHeight),u.CreateFixture(c);this.bodiesMap[a.id]=u},setPosition:function(b,a,c){this.bodiesMap[b].SetPosition(new i(a,c))},setAngle:function(b,a){this.bodiesMap[b].SetAngle(a)},setLinearVelocity:function(b,a,c){this.bodiesMap[b].SetLinearVelocity(new i(a,c))},applyImpulseDegrees:function(b,a,c){b=this.bodiesMap[b];b.ApplyImpulse(new i(Math.sin(a*(Math.PI/180))*c,-1*Math.cos(a*(Math.PI/180))*c),b.GetWorldCenter())},applyForceDegrees:function(b,a,c){b=this.bodiesMap[b];b.ApplyForce(new i(Math.sin(a*
(Math.PI/180))*c,-1*Math.cos(a*(Math.PI/180))*c),b.GetWorldCenter())},applyImpulse:function(b,a,c){b=this.bodiesMap[b];b.ApplyImpulse(new i(Math.sin(a)*c,-1*Math.cos(a)*c),b.GetWorldCenter())},applyForce:function(b,a,c){b=this.bodiesMap[b];b.ApplyForce(new i(Math.sin(a)*c,-1*Math.cos(a)*c),b.GetWorldCenter())},applyTorque:function(b,a){this.bodiesMap[b].ApplyTorque(a)},setGravity:function(b){this.world.SetGravity(new i(b.x,b.y))},removeBody:function(b){this.bodiesMap[b]&&(this.fixturesMap[b]&&this.bodiesMap[b].DestroyFixture(this.fixturesMap[b]),
this.world.DestroyBody(this.bodiesMap[b]),delete this.bodiesMap[b])},wakeUpBody:function(b){this.bodiesMap[b]&&this.bodiesMap[b].SetAwake(!0)},addContactListener:function(b){var a=new Box2D.Dynamics.b2ContactListener;if(b.beginContact)a.BeginContact=function(c){b.beginContact(c.GetFixtureA().GetBody().GetUserData(),c.GetFixtureB().GetBody().GetUserData())};if(b.EndContact)a.endContact=function(c){b.endContact(c.GetFixtureA().GetBody().GetUserData(),c.GetFixtureB().GetBody().GetUserData())};if(b.postSolve)a.PostSolve=
function(c,a){b.postSolve(c.GetFixtureA().GetBody().GetUserData(),c.GetFixtureB().GetBody().GetUserData(),a.normalImpulses[0])};this.world.SetContactListener(a)},addRevoluteJoint:function(b,a,c){var b=this.bodiesMap[b],a=this.bodiesMap[a],f=new v;f.Initialize(b,a,b.GetWorldCenter());c&&h.mixin(f,c);this.world.CreateJoint(f)},beginContact:function(){},endContact:function(){},postSolve:function(b,a,c){this.collisions[b]=this.collisions[b]||[];this.collisions[b].push({id:a,impulse:c});this.collisions[a]=
this.collisions[a]||[];this.collisions[a].push({id:b,impulse:c})}})})},"frozen/box2d/RectangleEntity":function(){define(["dcl","dcl/bases/Mixer","./Entity"],function(a,e,h){return a([e,h],{halfWidth:1,halfHeight:1,draw:a.superCall(function(a){return function(f,e){f.save();f.translate(this.x*e,this.y*e);f.rotate(this.angle);f.translate(-this.x*e,-this.y*e);f.fillStyle=this.color;f.strokeStyle=this.strokeColor;f.fillRect((this.x-this.halfWidth)*e,(this.y-this.halfHeight)*e,2*this.halfWidth*e,2*this.halfHeight*
e);f.strokeRect((this.x-this.halfWidth)*e,(this.y-this.halfHeight)*e,2*this.halfWidth*e,2*this.halfHeight*e);f.restore();a.apply(this,[f,e])}}),scaleShape:a.superCall(function(a){return function(f){this.halfHeight*=f;this.halfWidth*=f;a.apply(this,[f])}})})})},"frozen/box2d/Entity":function(){define(["dcl","dcl/bases/Mixer","dojo/_base/lang"],function(a,e,h){return a(e,{id:0,x:0,y:0,angle:0,center:null,restitution:0.3,density:1,friction:0.9,linearDamping:0,linearVelocity:null,angularVelocity:0,angularDamping:0,
staticBody:!1,color:"rgba(128,128,128,0.5)",strokeColor:"#000",hidden:!1,update:function(a){h.mixin(this,a)},draw:function(a,f){a.fillStyle="black";a.beginPath();a.arc(this.x*f,this.y*f,4,0,2*Math.PI,!0);a.closePath();a.fill();if(this.center)a.fillStyle="yellow",a.beginPath(),a.arc(this.center.x*f,this.center.y*f,2,0,2*Math.PI,!0),a.closePath(),a.fill()},scaleShape:function(a){this.x*=a;this.y*=a}})})},"frozen/box2d/PolygonEntity":function(){define(["dcl","dcl/bases/Mixer","./Entity","../utils"],
function(a,e,h,i){return a([e,h],{points:[],draw:a.superCall(function(a){return function(e,h){e.save();e.translate(this.x*h,this.y*h);e.rotate(this.angle);e.translate(-this.x*h,-this.y*h);e.fillStyle=this.color;e.beginPath();e.moveTo((this.x+this.points[0].x)*h,(this.y+this.points[0].y)*h);for(var i=1;i<this.points.length;i++)e.lineTo((this.points[i].x+this.x)*h,(this.points[i].y+this.y)*h);e.lineTo((this.x+this.points[0].x)*h,(this.y+this.points[0].y)*h);e.closePath();e.fill();e.stroke();e.restore();
a.apply(this,[e,h])}}),scaleShape:a.superCall(function(a){return function(e){this.points=i.scalePoints(this.points,e);a.apply(this,[e])}})})})},"frozen/utils":function(){define("./utils/averagePoints,./utils/degreesToRadians,./utils/radiansToDegrees,./utils/pointInPolygon,./utils/distance,./utils/degreesFromCenter,./utils/radiansFromCenter,./utils/scalePoints,./utils/translatePoints".split(","),function(a,e,h,i,f,q,l,p,m){return{averagePoints:a,degreesToRadians:e,radiansToDegrees:h,pointInPolygon:i,
distance:f,degreesFromCenter:q,radiansFromCenter:l,scalePoints:p,translatePoints:m}})},"frozen/utils/averagePoints":function(){define([],function(){return function(a){var e={x:0,y:0};a.forEach(function(a){e.x+=a.x;e.y+=a.y});e.x/=a.length;e.y/=a.length;return e}})},"frozen/utils/degreesToRadians":function(){define(function(){var a=Math.PI/180;return function(e){return e*a}})},"frozen/utils/radiansToDegrees":function(){define(function(){var a=180/Math.PI;return function(e){return e*a}})},"frozen/utils/pointInPolygon":function(){define(function(){return function(a,
e){for(var h=e.points||e,i=!1,f=-1,q=h.length,l=q-1;++f<q;l=f)(h[f].y<=a.y&&a.y<h[l].y||h[l].y<=a.y&&a.y<h[f].y)&&a.x<(h[l].x-h[f].x)*(a.y-h[f].y)/(h[l].y-h[f].y)+h[f].x&&(i=!i);return i}})},"frozen/utils/distance":function(){define(function(){return function(a,e){return Math.sqrt((e.x-a.x)*(e.x-a.x)+(e.y-a.y)*(e.y-a.y))}})},"frozen/utils/degreesFromCenter":function(){define(["./radiansToDegrees","./radiansFromCenter"],function(a,e){return function(h,i){return a(e(h,i))}})},"frozen/utils/radiansFromCenter":function(){define(function(){var a=
{x:0,y:0};return function(e,h){e=e||a;return e.x===h.x&&e.y===h.y?0:e.x===h.x?e.y>h.y?0:Math.PI:e.y===h.y?e.x>h.x?1.5*Math.PI:Math.PI/2:e.x<h.x&&e.y>h.y?Math.atan((h.x-e.x)/(e.y-h.y)):e.x<h.x&&e.y<h.y?Math.PI/2+Math.atan((h.y-e.y)/(h.x-e.x)):e.x>h.x&&e.y<h.y?Math.PI+Math.atan((e.x-h.x)/(h.y-e.y)):1.5*Math.PI+Math.atan((e.y-h.y)/(e.x-h.x))}})},"frozen/utils/scalePoints":function(){define(["dojo/_base/lang"],function(a){var e=function(h,i){if(a.isArray(h)){var f=[];h.forEach(function(a){f.push(e(a,
i))});h=f}else h="object"===typeof i?{x:h.x*i.x,y:h.y*i.y}:{x:h.x*i,y:h.y*i};return h};return e})},"frozen/utils/translatePoints":function(){define(["dojo/_base/lang"],function(a){var e=function(h,i){if(a.isArray(h)){var f=[];h.forEach(function(a){f.push(e(a,i))});h=f}else h={x:h.x,y:h.y},i.hasOwnProperty("x")&&(h.x+=i.x),i.hasOwnProperty("y")&&(h.y+=i.y);return h};return e})},"frozen/box2d/CircleEntity":function(){define(["dcl","dcl/bases/Mixer","./Entity"],function(a,e,h){return a([e,h],{radius:1,
draw:a.superCall(function(a){return function(f,e){f.fillStyle=this.color;f.strokeStyle=this.strokeColor;f.beginPath();f.arc(this.x*e,this.y*e,this.radius*e,0,2*Math.PI,!0);f.closePath();f.fill();f.stroke();this.staticBody||(f.save(),f.translate(this.x*e,this.y*e),f.rotate(this.angle),f.translate(-this.x*e,-this.y*e),f.beginPath(),f.moveTo(this.x*e,this.y*e),f.lineTo(this.x*e,this.y*e-this.radius*e),f.closePath(),f.stroke(),f.restore());a.apply(this,[f,e])}}),scaleShape:a.superCall(function(a){return function(e){this.radius*=
e;a.apply(this,[e])}})})})},"frozen/box2d/MultiPolygonEntity":function(){define(["dcl","dcl/bases/Mixer","./Entity","../utils"],function(a,e,h,i){return a([e,h],{polys:[],draw:a.superCall(function(a){return function(e,h){e.save();e.translate(this.x*h,this.y*h);e.rotate(this.angle);e.translate(-this.x*h,-this.y*h);e.fillStyle=this.color;for(var i=0;i<this.polys.length;i++){e.beginPath();e.moveTo((this.x+this.polys[i][0].x)*h,(this.y+this.polys[i][0].y)*h);for(var m=1;m<this.polys[i].length;m++)e.lineTo((this.polys[i][m].x+
this.x)*h,(this.polys[i][m].y+this.y)*h);e.lineTo((this.x+this.polys[i][0].x)*h,(this.y+this.polys[i][0].y)*h);e.closePath();e.fill();e.stroke()}e.restore();a.apply(this,[e,h])}}),scaleShape:a.superCall(function(a){return function(e){this.polys=i.scalePoints(this.polys,e);a.apply(this,[e])}})})})},"game/WsRpc":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/Deferred"],function(a,e,h,i){return a(null,{_callNum:0,_deferreds:{},_ready:null,socket:null,constructor:function(e){a.safeMixin(this,
e);this._create()},_create:function(){if(!this.socket||!this.socket.on||!this.socket.send||!this.socket.emit)return console.warn("Must pass in an object with a socket property to this cosntructor. ex: {socket : mySocket}");this._ready=new i;this.socket.emit=this.socket.emit||this.socket.send;var a=e.hitch(this,function(a){var e;if(a&&a.services)for(e in a.services)this[e]=function(a){return function(){var b=[],e,d;this._callNum++;h.forEach(arguments,function(a){b.push(a)});e={method:a,params:b,id:this._callNum};
d=new i;d.callNum=this._callNum;this._deferreds[this._callNum]=d;this.socket.emit("rpc",e);return d}}.call(this,e);this._ready.callback()}),q=e.hitch(this,function(a){try{var e=a.id;this._deferreds[e]&&(a.error?this._deferreds[e].errback(a.error):this._deferreds[e].callback(a.result),delete this._deferreds[e])}catch(f){}});this.socket.on("smd",a).emit("smd",{});this.socket.on("rpc",q)}})})},"dojo/_base/array":function(){define(["./kernel","../has","./lang"],function(a,e,h){function i(b){return l[b]=
new Function("item","index","array",b)}function f(b){var a=!b;return function(d,e,c){var f=0,h=d&&d.length||0,j;h&&"string"==typeof d&&(d=d.split(""));"string"==typeof e&&(e=l[e]||i(e));if(c)for(;f<h;++f){if(j=!e.call(c,d[f],f,d),b^j)return!j}else for(;f<h;++f)if(j=!e(d[f],f,d),b^j)return!j;return a}}function q(b){var a=1,d=0,e=0;b||(a=d=e=-1);return function(c,f,h,j){if(j&&0<a)return m.lastIndexOf(c,f,h);var j=c&&c.length||0,i=b?j+e:d;h===p?h=b?d:j+e:0>h?(h=j+h,0>h&&(h=d)):h=h>=j?j+e:h;for(j&&"string"==
typeof c&&(c=c.split(""));h!=i;h+=a)if(c[h]==f)return h;return-1}}var l={},p,m={every:f(!1),some:f(!0),indexOf:q(!0),lastIndexOf:q(!1),forEach:function(b,a,d){var e=0,c=b&&b.length||0;c&&"string"==typeof b&&(b=b.split(""));"string"==typeof a&&(a=l[a]||i(a));if(d)for(;e<c;++e)a.call(d,b[e],e,b);else for(;e<c;++e)a(b[e],e,b)},map:function(b,a,d,e){var c=0,f=b&&b.length||0,e=new (e||Array)(f);f&&"string"==typeof b&&(b=b.split(""));"string"==typeof a&&(a=l[a]||i(a));if(d)for(;c<f;++c)e[c]=a.call(d,b[c],
c,b);else for(;c<f;++c)e[c]=a(b[c],c,b);return e},filter:function(b,a,d){var e=0,c=b&&b.length||0,f=[],h;c&&"string"==typeof b&&(b=b.split(""));"string"==typeof a&&(a=l[a]||i(a));if(d)for(;e<c;++e)h=b[e],a.call(d,h,e,b)&&f.push(h);else for(;e<c;++e)h=b[e],a(h,e,b)&&f.push(h);return f},clearCache:function(){l={}}};h.mixin(a,m);return m})},"dojo/_base/Deferred":function(){define("./kernel,../Deferred,../promise/Promise,../errors/CancelError,../has,./lang,../when".split(","),function(a,e,h,i,f,q,l){var p=
function(){},m=Object.freeze||function(){},b=a.Deferred=function(a){function d(a){if(o)throw Error("This deferred has already been resolved");c=a;o=!0;g()}function g(){for(var a;!a&&r;){var b=r;r=r.next;if(a=b.progress==p)o=!1;var d=k?b.error:b.resolved;f("config-useDeferredInstrumentation")&&k&&e.instrumentRejected&&e.instrumentRejected(c,!!d);if(d)try{var j=d(c);j&&"function"===typeof j.then?j.then(q.hitch(b.deferred,"resolve"),q.hitch(b.deferred,"reject"),q.hitch(b.deferred,"progress")):(d=a&&
void 0===j,a&&!d&&(k=j instanceof Error),b.deferred[d&&k?"reject":"resolve"](d?c:j))}catch(h){b.deferred.reject(h)}else k?b.deferred.reject(c):b.deferred.resolve(c)}}var c,o,k,j,r,u=this.promise=new h;this.resolve=this.callback=function(a){this.fired=0;this.results=[a,null];d(a)};this.reject=this.errback=function(a){k=!0;this.fired=1;f("config-useDeferredInstrumentation")&&e.instrumentRejected&&e.instrumentRejected(a,!!r);d(a);this.results=[null,a]};this.progress=function(a){for(var c=r;c;){var b=
c.progress;b&&b(a);c=c.next}};this.addCallbacks=function(a,c){this.then(a,c,p);return this};u.then=this.then=function(a,c,d){var e=d==p?this:new b(u.cancel),a={resolved:a,error:c,progress:d,deferred:e};r?j=j.next=a:r=j=a;o&&g();return e.promise};var w=this;u.cancel=this.cancel=function(){if(!o){var c=a&&a(w);if(!o)c instanceof Error||(c=new i(c)),c.log=!1,w.reject(c)}};m(u)};q.extend(b,{addCallback:function(b){return this.addCallbacks(q.hitch.apply(a,arguments))},addErrback:function(b){return this.addCallbacks(null,
q.hitch.apply(a,arguments))},addBoth:function(b){var d=q.hitch.apply(a,arguments);return this.addCallbacks(d,d)},fired:-1});b.when=a.when=l;return b})},"dojo/Deferred":function(){define("dojo/Deferred",["./has","./_base/lang","./errors/CancelError","./promise/Promise","require"],function(a,e,h,i,f){var q=Object.freeze||function(){},l=function(a,b,c,e){for(var f=0;f<a.length;f++)p(a[f],b,c,e)},p=function(a,e,c){var f=a[e],h=a.deferred;if(f)try{var j=f(c);0===e?"undefined"!==typeof j&&b(h,e,j):j&&"function"===
typeof j.then?(a.cancel=j.cancel,j.then(m(h,1),m(h,2),m(h,0))):b(h,1,j)}catch(i){b(h,2,i)}else b(h,e,c)},m=function(a,e){return function(c){b(a,e,c)}},b=function(a,b,c){if(!a.isCanceled())switch(b){case 0:a.progress(c);break;case 1:a.resolve(c);break;case 2:a.reject(c)}},v=function(a){var b=this.promise=new i,c=this,e,f,j=!1,r=[];this.isResolved=b.isResolved=function(){return 1===e};this.isRejected=b.isRejected=function(){return 2===e};this.isFulfilled=b.isFulfilled=function(){return!!e};this.isCanceled=
b.isCanceled=function(){return j};this.progress=function(a,d){if(e){if(!0===d)throw Error("This deferred has already been fulfilled.");return b}l(r,0,a,null,c);return b};this.resolve=function(a,d){if(e){if(!0===d)throw Error("This deferred has already been fulfilled.");return b}l(r,e=1,f=a,null,c);r=null;return b};var u=this.reject=function(a,d){if(e){if(!0===d)throw Error("This deferred has already been fulfilled.");return b}l(r,e=2,f=a,void 0,c);r=null;return b};this.then=b.then=function(a,c,d){var j=
[d,a,c];j.cancel=b.cancel;j.deferred=new v(function(a){return j.cancel&&j.cancel(a)});e&&!r?p(j,e,f,void 0):r.push(j);return j.deferred.promise};this.cancel=b.cancel=function(b,c){if(e){if(!0===c)throw Error("This deferred has already been fulfilled.");}else{if(a)var g=a(b),b="undefined"===typeof g?b:g;j=!0;if(e){if(2===e&&f===b)return b}else return"undefined"===typeof b&&(b=new h),u(b),b}};q(b)};v.prototype.toString=function(){return"[object Deferred]"};f&&f(v);return v})},"dojo/errors/CancelError":function(){define(["./create"],
function(a){return a("CancelError",null,null,{dojoType:"cancel"})})},"dojo/errors/create":function(){define(["../_base/lang"],function(a){return function(e,h,i,f){var i=i||Error,q=function(a){if(i===Error){Error.captureStackTrace&&Error.captureStackTrace(this,q);var e=Error.call(this,a),f;for(f in e)e.hasOwnProperty(f)&&(this[f]=e[f]);this.message=a;this.stack=e.stack}else i.apply(this,arguments);h&&h.apply(this,arguments)};q.prototype=a.delegate(i.prototype,f);q.prototype.name=e;return q.prototype.constructor=
q}})},"dojo/promise/Promise":function(){define(["../_base/lang"],function(a){function e(){throw new TypeError("abstract");}return a.extend(function(){},{then:function(){e()},cancel:function(){e()},isResolved:function(){e()},isRejected:function(){e()},isFulfilled:function(){e()},isCanceled:function(){e()},always:function(a){return this.then(a,a)},otherwise:function(a){return this.then(null,a)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})})},
"dojo/when":function(){define("dojo/when",["./Deferred","./promise/Promise"],function(a,e){return function(h,i,f,q){var l=h&&"function"===typeof h.then,p=l&&h instanceof e;if(l){if(!p)l=new a(h.cancel),h.then(l.resolve,l.reject,l.progress),h=l.promise}else return i?i(h):(new a).resolve(h);return i||f||q?h.then(i,f,q):h}})},"qrcode/qrcode":function(){define([],function(){return function(){function a(b,d){if("undefined"==typeof b.length)throw Error(b.length+"/"+d);var e=function(){for(var a=0;a<b.length&&
0==b[a];)a+=1;for(var e=Array(b.length-a+d),f=0;f<b.length-a;f+=1)e[f]=b[f+a];return e}(),j={getAt:function(a){return e[a]},getLength:function(){return e.length}};j.multiply=function(b){for(var c=Array(j.getLength()+b.getLength()-1),d=0;d<j.getLength();d+=1)for(var e=0;e<b.getLength();e+=1)c[d+e]^=f.gexp(f.glog(j.getAt(d))+f.glog(b.getAt(e)));return a(c,0)};j.mod=function(b){if(0>j.getLength()-b.getLength())return j;for(var c=f.glog(j.getAt(0))-f.glog(b.getAt(0)),d=Array(j.getLength()),e=0;e<j.getLength();e+=
1)d[e]=j.getAt(e);for(e=0;e<b.getLength();e+=1)d[e]^=f.gexp(f.glog(b.getAt(e))+c);return a(d,0).mod(b)};return j}var e=function(b,d){var e=h[d],f=null,r=0,u=null,w=[],n={},m=function(d,h){for(var g=r=4*b+17,n=Array(g),o=0;o<g;o+=1){n[o]=Array(g);for(var m=0;m<g;m+=1)n[o][m]=null}f=n;v(0,0);v(r-7,0);v(0,r-7);g=i.getPatternPosition(b);for(n=0;n<g.length;n+=1)for(o=0;o<g.length;o+=1){var m=g[n],p=g[o];if(null==f[m][p])for(var x=-2;2>=x;x+=1)for(var t=-2;2>=t;t+=1)f[m+x][p+t]=-2==x||2==x||-2==t||2==t||
0==x&&0==t?!0:!1}for(g=8;g<r-8;g+=1)null==f[g][6]&&(f[g][6]=0==g%2);for(g=8;g<r-8;g+=1)null==f[6][g]&&(f[6][g]=0==g%2);g=i.getBCHTypeInfo(e<<3|h);for(n=0;15>n;n+=1)o=!d&&1==(g>>n&1),6>n?f[n][8]=o:8>n?f[n+1][8]=o:f[r-15+n][8]=o;for(n=0;15>n;n+=1)o=!d&&1==(g>>n&1),8>n?f[8][r-n-1]=o:9>n?f[8][15-n-1+1]=o:f[8][15-n-1]=o;f[r-8][8]=!d;if(7<=b){g=i.getBCHTypeNumber(b);for(n=0;18>n;n+=1)o=!d&&1==(g>>n&1),f[Math.floor(n/3)][n%3+r-8-3]=o;for(n=0;18>n;n+=1)o=!d&&1==(g>>n&1),f[n%3+r-8-3][Math.floor(n/3)]=o}if(null==
u){g=q.getRSBlocks(b,e);n=l();for(o=0;o<w.length;o+=1)m=w[o],n.put(m.getMode(),4),n.put(m.getLength(),i.getLengthInBits(m.getMode(),b)),m.write(n);for(o=m=0;o<g.length;o+=1)m+=g[o].dataCount;if(n.getLengthInBits()>8*m)throw Error("code length overflow. ("+n.getLengthInBits()+">"+8*m+")");for(n.getLengthInBits()+4<=8*m&&n.put(0,4);0!=n.getLengthInBits()%8;)n.putBit(!1);for(;!(n.getLengthInBits()>=8*m);){n.put(236,8);if(n.getLengthInBits()>=8*m)break;n.put(17,8)}for(var A=0,m=o=0,p=Array(g.length),
x=Array(g.length),t=0;t<g.length;t+=1){var y=g[t].dataCount,C=g[t].totalCount-y,o=Math.max(o,y),m=Math.max(m,C);p[t]=Array(y);for(var s=0;s<p[t].length;s+=1)p[t][s]=255&n.getBuffer()[s+A];A+=y;s=i.getErrorCorrectPolynomial(C);y=a(p[t],s.getLength()-1).mod(s);x[t]=Array(s.getLength()-1);for(s=0;s<x[t].length;s+=1)C=s+y.getLength()-x[t].length,x[t][s]=0<=C?y.getAt(C):0}for(s=n=0;s<g.length;s+=1)n+=g[s].totalCount;n=Array(n);for(s=A=0;s<o;s+=1)for(t=0;t<g.length;t+=1)s<p[t].length&&(n[A]=p[t][s],A+=
1);for(s=0;s<m;s+=1)for(t=0;t<g.length;t+=1)s<x[t].length&&(n[A]=x[t][s],A+=1);u=n}g=u;n=-1;o=r-1;m=7;p=0;x=i.getMaskFunction(h);for(t=r-1;0<t;t-=2)for(6==t&&(t-=1);;){for(s=0;2>s;s+=1)null==f[o][t-s]&&(A=!1,p<g.length&&(A=1==(g[p]>>>m&1)),x(o,t-s)&&(A=!A),f[o][t-s]=A,m-=1,-1==m&&(p+=1,m=7));o+=n;if(0>o||r<=o){o-=n;n=-n;break}}},v=function(a,b){for(var c=-1;7>=c;c+=1)if(!(-1>=a+c||r<=a+c))for(var d=-1;7>=d;d+=1)-1>=b+d||r<=b+d||(f[a+c][b+d]=0<=c&&6>=c&&(0==d||6==d)||0<=d&&6>=d&&(0==c||6==c)||2<=c&&
4>=c&&2<=d&&4>=d?!0:!1)};n.addData=function(a){a=p(a);w.push(a);u=null};n.isDark=function(a,b){if(0>a||r<=a||0>b||r<=b)throw Error(a+","+b);return f[a][b]};n.getModuleCount=function(){return r};n.make=function(){for(var a=0,b=0,c=0;8>c;c+=1){m(!0,c);var d=i.getLostPoint(n);if(0==c||a>d)a=d,b=c}m(!1,b)};n.createBitArray=function(){for(var a=[],b=0;b<n.getModuleCount();b+=1){for(var c=[],d=0;d<n.getModuleCount();d+=1)c.push(n.isDark(b,d)?0:1);a.push(c)}return a};n.renderToContext=function(a,b,c,d){for(var b=
b||3,c=c||0,d=d||0,e=this.createBitArray(),f=0;f<e.length;f++)for(var g=e[f],j=0;j<g.length;j++)a.fillStyle=g[j]?"#FFF":"#000",a.fillRect(j*b+c,f*b+d,b,b)};n.createTableTag=function(a,b){var a=a||2,c;c='<table style=" border-width: 0px; border-style: none; border-collapse: collapse;'+(" padding: 0px; margin: "+("undefined"==typeof b?4*a:b)+"px;")+'"><tbody>';for(var d=0;d<n.getModuleCount();d+=1){c+="<tr>";for(var e=0;e<n.getModuleCount();e+=1)c+='<td style="',c+=" border-width: 0px; border-style: none;",
c+=" border-collapse: collapse;",c+=" padding: 0px; margin: 0px;",c+=" width: "+a+"px;",c+=" height: "+a+"px;",c+=" background-color: ",c+=n.isDark(d,e)?"#000000":"#ffffff",c+=";",c+='"/>';c+="</tr>"}return c+"</tbody></table>"};n.createImgTag=function(a,b){var a=a||2,b="undefined"==typeof b?4*a:b,c=n.getModuleCount()*a+2*b,d=b,e=c-b;return g(c,c,function(b,c){return d<=b&&b<e&&d<=c&&c<e?n.isDark(Math.floor((c-d)/a),Math.floor((b-d)/a))?0:1:1})};return n};e.stringToBytes=function(a){for(var b=[],
d=0;d<a.length;d+=1){var e=a.charCodeAt(d);b.push(e&255)}return b};e.createStringToBytes=function(a,b){var d=function(){for(var d=v(a),e=function(){var a=d.read();if(-1==a)throw Error();return a},f=0,g={};;){var h=d.read();if(-1==h)break;var k=e(),i=e(),l=e(),h=String.fromCharCode(h<<8|k);g[h]=i<<8|l;f+=1}if(f!=b)throw Error(f+" != "+b);return g}();return function(a){for(var b=[],c=0;c<a.length;c+=1){var e=a.charCodeAt(c);128>e?b.push(e):(e=d[a.charAt(c)],"number"==typeof e?(e&255)==e?b.push(e):(b.push(e>>>
8),b.push(e&255)):b.push(63))}return b}};var h={L:1,M:0,Q:3,H:2},i=function(){var b=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],
[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],d={},e=function(b){for(var a=0;0!=b;)a+=1,b>>>=1;return a};d.getBCHTypeInfo=function(b){for(var a=b<<10;0<=e(a)-e(1335);)a^=1335<<e(a)-e(1335);return(b<<10|a)^21522};d.getBCHTypeNumber=function(a){for(var b=a<<12;0<=e(b)-e(7973);)b^=7973<<e(b)-e(7973);return a<<12|b};d.getPatternPosition=function(a){return b[a-
1]};d.getMaskFunction=function(a){switch(a){case 0:return function(a,b){return 0==(a+b)%2};case 1:return function(a){return 0==a%2};case 2:return function(a,b){return 0==b%3};case 3:return function(a,b){return 0==(a+b)%3};case 4:return function(a,b){return 0==(Math.floor(a/2)+Math.floor(b/3))%2};case 5:return function(a,b){return 0==a*b%2+a*b%3};case 6:return function(a,b){return 0==(a*b%2+a*b%3)%2};case 7:return function(a,b){return 0==(a*b%3+(a+b)%2)%2};default:throw Error("bad maskPattern:"+a);
}};d.getErrorCorrectPolynomial=function(b){for(var c=a([1],0),d=0;d<b;d+=1)c=c.multiply(a([1,f.gexp(d)],0));return c};d.getLengthInBits=function(a,b){if(1<=b&&10>b)switch(a){case 1:return 10;case 2:return 9;case 4:return 8;case 8:return 8;default:throw Error("mode:"+a);}else if(27>b)switch(a){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw Error("mode:"+a);}else if(41>b)switch(a){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw Error("mode:"+
a);}else throw Error("type:"+b);};d.getLostPoint=function(a){for(var b=a.getModuleCount(),c=0,d=0;d<b;d+=1)for(var e=0;e<b;e+=1){for(var f=0,g=a.isDark(d,e),h=-1;1>=h;h+=1)if(!(0>d+h||b<=d+h))for(var k=-1;1>=k;k+=1)0>e+k||b<=e+k||0==h&&0==k||g==a.isDark(d+h,e+k)&&(f+=1);5<f&&(c+=3+f-5)}for(d=0;d<b-1;d+=1)for(e=0;e<b-1;e+=1)if(f=0,a.isDark(d,e)&&(f+=1),a.isDark(d+1,e)&&(f+=1),a.isDark(d,e+1)&&(f+=1),a.isDark(d+1,e+1)&&(f+=1),0==f||4==f)c+=3;for(d=0;d<b;d+=1)for(e=0;e<b-6;e+=1)a.isDark(d,e)&&!a.isDark(d,
e+1)&&a.isDark(d,e+2)&&a.isDark(d,e+3)&&a.isDark(d,e+4)&&!a.isDark(d,e+5)&&a.isDark(d,e+6)&&(c+=40);for(e=0;e<b;e+=1)for(d=0;d<b-6;d+=1)a.isDark(d,e)&&!a.isDark(d+1,e)&&a.isDark(d+2,e)&&a.isDark(d+3,e)&&a.isDark(d+4,e)&&!a.isDark(d+5,e)&&a.isDark(d+6,e)&&(c+=40);for(e=f=0;e<b;e+=1)for(d=0;d<b;d+=1)a.isDark(d,e)&&(f+=1);a=Math.abs(100*f/b/b-50)/5;return c+10*a};return d}(),f=function(){for(var a=Array(256),b=Array(256),d=0;8>d;d+=1)a[d]=1<<d;for(d=8;256>d;d+=1)a[d]=a[d-4]^a[d-5]^a[d-6]^a[d-8];for(d=
0;255>d;d+=1)b[a[d]]=d;return{glog:function(a){if(1>a)throw Error("glog("+a+")");return b[a]},gexp:function(b){for(;0>b;)b+=255;for(;256<=b;)b-=255;return a[b]}}}(),q=function(){var a=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,
121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16]],b=function(a,b){var c={};c.totalCount=a;c.dataCount=b;return c},d={},e=function(b,d){switch(d){case h.L:return a[4*(b-1)+0];case h.M:return a[4*(b-1)+1];case h.Q:return a[4*(b-1)+2];case h.H:return a[4*(b-1)+3]}};d.getRSBlocks=function(a,c){var d=e(a,c);if("undefined"==typeof d)throw Error("bad rs block @ typeNumber:"+
a+"/errorCorrectLevel:"+c);for(var f=d.length/3,h=[],g=0;g<f;g+=1)for(var i=d[3*g+0],k=d[3*g+1],l=d[3*g+2],m=0;m<i;m+=1)h.push(b(k,l));return h};return d}(),l=function(){var a=[],b=0,d={getBuffer:function(){return a},getAt:function(b){return 1==(a[Math.floor(b/8)]>>>7-b%8&1)}};d.put=function(a,b){for(var c=0;c<b;c+=1)d.putBit(1==(a>>>b-c-1&1))};d.getLengthInBits=function(){return b};d.putBit=function(d){var e=Math.floor(b/8);a.length<=e&&a.push(0);d&&(a[e]|=128>>>b%8);b+=1};return d},p=function(a){var b=
e.stringToBytes(a);return{getMode:function(){return 4},getLength:function(){return b.length},write:function(a){for(var c=0;c<b.length;c+=1)a.put(b[c],8)}}},m=function(){var a=[],b={writeByte:function(b){a.push(b&255)}};b.writeShort=function(a){b.writeByte(a);b.writeByte(a>>>8)};b.writeBytes=function(a,c,d){for(var c=c||0,d=d||a.length,e=0;e<d;e+=1)b.writeByte(a[e+c])};b.writeString=function(a){for(var c=0;c<a.length;c+=1)b.writeByte(a.charCodeAt(c))};b.toByteArray=function(){return a};b.toString=
function(){var b;b="[";for(var d=0;d<a.length;d+=1)0<d&&(b+=","),b+=a[d];return b+"]"};return b},b=function(){var a=0,b=0,d=0,e="",f={},g=function(a){if(!(0>a)){if(26>a)return 65+a;if(52>a)return 97+(a-26);if(62>a)return 48+(a-52);if(62==a)return 43;if(63==a)return 47}throw Error("n:"+a);};f.writeByte=function(f){a=a<<8|f&255;b+=8;for(d+=1;6<=b;)e+=String.fromCharCode(g(a>>>b-6&63)),b-=6};f.flush=function(){0<b&&(e+=String.fromCharCode(g(a<<6-b&63)),b=a=0);if(0!=d%3)for(var f=3-d%3,h=0;h<f;h+=1)e+=
"="};f.toString=function(){return e};return f},v=function(a){var b=0,d=0,e=0,f=function(a){if(65<=a&&90>=a)return a-65;if(97<=a&&122>=a)return a-97+26;if(48<=a&&57>=a)return a-48+52;if(43==a)return 62;if(47==a)return 63;throw Error("c:"+a);};return{read:function(){for(;8>e;){if(b>=a.length){if(0==e)return-1;throw Error("unexpected end of file./"+e);}var g=a.charAt(b);b+=1;if("="==g)return e=0,-1;g.match(/^\s$/)||(d=d<<6|f(g.charCodeAt(0)),e+=6)}g=d>>>e-8&255;e-=8;return g}}},d=function(a,b){var d=
Array(a*b),e=function(a){var b=0,c=0;return{write:function(d,e){if(0!=d>>>e)throw Error("length over");for(;8<=b+e;)a.writeByte(255&(d<<b|c)),e-=8-b,d>>>=8-b,b=c=0;c|=d<<b;b+=e},flush:function(){0<b&&a.writeByte(c)}}},f=function(){var a={},b=0,c={};c.add=function(d){if(c.contains(d))throw Error("dup key:"+d);a[d]=b;b+=1};c.size=function(){return b};c.indexOf=function(b){return a[b]};c.contains=function(b){return"undefined"!=typeof a[b]};return c};return{setPixel:function(b,e,f){d[e*a+b]=f},write:function(g){g.writeString("GIF87a");
g.writeShort(a);g.writeShort(b);g.writeByte(128);g.writeByte(0);g.writeByte(0);g.writeByte(0);g.writeByte(0);g.writeByte(0);g.writeByte(255);g.writeByte(255);g.writeByte(255);g.writeString(",");g.writeShort(0);g.writeShort(0);g.writeShort(a);g.writeShort(b);g.writeByte(0);var h;h=3;for(var i=f(),l=0;4>l;l+=1)i.add(String.fromCharCode(l));i.add(String.fromCharCode(4));i.add(String.fromCharCode(5));var l=m(),p=e(l);p.write(4,h);for(var q=0,v=String.fromCharCode(d[q]),q=q+1;q<d.length;){var D=String.fromCharCode(d[q]),
q=q+1;i.contains(v+D)?v+=D:(p.write(i.indexOf(v),h),4095>i.size()&&(i.size()==1<<h&&(h+=1),i.add(v+D)),v=D)}p.write(i.indexOf(v),h);p.write(5,h);p.flush();h=l.toByteArray();g.writeByte(2);for(i=0;255<h.length-i;)g.writeByte(255),g.writeBytes(h,i,255),i+=255;g.writeByte(h.length-i);g.writeBytes(h,i,h.length-i);g.writeByte(0);g.writeString(";")}}},g=function(a,e,f,g){for(var h=d(a,e),i=0;i<e;i+=1)for(var l=0;l<a;l+=1)h.setPixel(l,i,f(l,i));f=m();h.write(f);h=b();f=f.toByteArray();for(i=0;i<f.length;i+=
1)h.writeByte(f[i]);h.flush();a='<img src="data:image/gif;base64,'+h+'" width="'+a+'" height="'+e+'"';g&&(a=a+' alt="'+g+'"');return a+"/>"};return e}()})}}});(function(){require({cache:{}});require.boot&&require.apply(null,require.boot)})();